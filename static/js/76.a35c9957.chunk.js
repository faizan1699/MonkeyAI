/*! For license information please see 76.a35c9957.chunk.js.LICENSE.txt */
(self.webpackChunkai_ai=self.webpackChunkai_ai||[]).push([[76],{8047:(t,e)=>{var i;!function(){function a(t,e){t.prototype=function(t){function e(){}return e.prototype=t,new e}(e.prototype),t.prototype.constructor=t,t.base=e.prototype}function s(t,e,i){return"millisecond"===i?t.setMilliseconds(t.getMilliseconds()+1*e):"second"===i?t.setSeconds(t.getSeconds()+1*e):"minute"===i?t.setMinutes(t.getMinutes()+1*e):"hour"===i?t.setHours(t.getHours()+1*e):"day"===i?t.setDate(t.getDate()+1*e):"week"===i?t.setDate(t.getDate()+7*e):"month"===i?t.setMonth(t.getMonth()+1*e):"year"===i&&t.setFullYear(t.getFullYear()+1*e),t}function n(t,e){var i=!1;for(0>t&&(i=!0,t*=-1),t=""+t,e=e||1;t.length<e;)t="0"+t;return i?"-"+t:t}function o(t){if(!t)return t;for(var e=/\s/,i=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(--i)););return t.slice(0,i+1)}function r(t){t.roundRect=function(t,e,i,a,s,n,o,r){o&&(this.fillStyle=o),r&&(this.strokeStyle=r),"undefined"===typeof s&&(s=5),this.lineWidth=n,this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-s,e),this.quadraticCurveTo(t+i,e,t+i,e+s),this.lineTo(t+i,e+a-s),this.quadraticCurveTo(t+i,e+a,t+i-s,e+a),this.lineTo(t+s,e+a),this.quadraticCurveTo(t,e+a,t,e+a-s),this.lineTo(t,e+s),this.quadraticCurveTo(t,e,t+s,e),this.closePath(),o&&this.fill(),r&&0<n&&this.stroke()}}function h(t,e){return t-e}function l(t){var e=((16711680&t)>>16).toString(16),i=((65280&t)>>8).toString(16);return t=((255&t)>>0).toString(16),"#"+(e=2>e.length?"0"+e:e)+(i=2>i.length?"0"+i:i)+(t=2>t.length?"0"+t:t)}function d(t,e){var i,a=this.length>>>0;for(0>(i=0>(i=Number(e)||0)?Math.ceil(i):Math.floor(i))&&(i+=a);i<a;i++)if(i in this&&this[i]===t)return i;return-1}function c(t){return null===t||"undefined"===typeof t}function p(t){return t.indexOf||(t.indexOf=d),t}function u(t){Y.fSDec&&t[xt("`eeDwdouMhrudods")](xt("e`u`@ohl`uhnoHuds`uhnoDoe"),(function(){Y._fTWm&&Y._fTWm(t)}))}function x(t,e,i){var a=t+"_"+e+"_"+(i=i||"normal"),s=et[a];if(isNaN(s)){try{if(!it){var n=document.body;(it=document.createElement("span")).innerHTML="";var o=document.createTextNode("Mpgyi");it.appendChild(o),n.appendChild(it)}it.style.display="",k(it,{position:"absolute",left:"0px",top:"-20000px",padding:"0px",margin:"0px",border:"none",whiteSpace:"pre",lineHeight:"normal",fontFamily:t,fontSize:e+"px",fontWeight:i}),s=Math.round(it.offsetHeight),it.style.display="none"}catch(Z){s=Math.ceil(1.1*e)}s=Math.max(s,e),et[a]=s}return s}function m(t,e){var i=[];if(i={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]}[t||"solid"])for(var a=0;a<i.length;a++)i[a]*=e;else i=[];return i}function g(t,e,i,a,s){return a=a||[],s=c(s)?!!tt&&{passive:!1,capture:!1}:s,a.push([t,e,i,s]),t.addEventListener?(t.addEventListener(e,i,s),i):!!t.attachEvent&&(a=function(e){(e=e||window.event).preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},i.call(t,e)},t.attachEvent("on"+e,a),a)}function f(t,e,i){for(t*=pt,e*=pt,t=i.getImageData(t,e,2,2).data,e=!0,i=0;4>i;i++)if(t[i]!==t[i+4]|t[i]!==t[i+8]|t[i]!==t[i+12]){e=!1;break}return e?t[0]<<16|t[1]<<8|t[2]:0}function y(t,e,i){return t in e?e[t]:i[t]}function b(t,e,i,a){R&&lt?(a=!c(a)&&a?t.getContext("2d",{willReadFrequently:!0}):t.getContext("2d"),ct=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1,pt=dt/ct,t.width=e*pt,t.height=i*pt,dt!==ct&&(t.style.width=e+"px",t.style.height=i+"px",a.scale(pt,pt))):(t.width=e,t.height=i)}function v(t){if(!mt){var e=!1,i=!1;"undefined"===typeof N.Chart.creditHref?(t.creditHref=xt("iuuqr;..b`ow`rkr/bnl."),t.creditText=xt("B`ow`rKR/bnl")):(e=t.updateOption("creditText"),i=t.updateOption("creditHref")),t.creditHref&&t.creditText&&(t._creditLink||(t._creditLink=document.createElement("a"),t._creditLink.setAttribute("class","canvasjs-chart-credit"),t._creditLink.setAttribute("title","JavaScript Charts"),k(t._creditLink,{outline:"none",margin:"0px",position:"absolute",right:"2px",top:t.height-14+"px",color:"dimgrey",textDecoration:"none",fontSize:"11px",fontFamily:"Calibri, Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"}),t._creditLink.setAttribute("tabIndex",-1),t._creditLink.setAttribute("target","_blank")),(0===t.renderCount||e||i)&&(t._creditLink.setAttribute("href",t.creditHref),t._creditLink.innerHTML=t.creditText),t._creditLink&&t.creditHref&&t.creditText?(t._creditLink.parentElement||t._canvasJSContainer.appendChild(t._creditLink),t._creditLink.style.top=t.height-14+"px"):t._creditLink.parentElement&&t._canvasJSContainer.removeChild(t._creditLink))}}function _(t,e,i){O&&(this.canvasCount|=0,window.console.log(++this.canvasCount));var a=document.createElement("canvas");return a.setAttribute("class","canvasjs-chart-canvas"),b(a,t,e,i),R||"undefined"===typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(a),a}function k(t,e){for(var i in e)t.style[i]=e[i]}function M(t,e,i){e.getAttribute("state")||(e.style.backgroundColor=t.toolbar.itemBackgroundColor,e.style.color=t.toolbar.fontColor,e.style.border="none",k(e,{WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"})),e.getAttribute("state")!==i&&(e.setAttribute("state",i),e.setAttribute("type","button"),k(e,{padding:"5px 12px",cursor:"pointer",float:"left",width:"40px",height:"25px",outline:"0px",verticalAlign:"baseline",lineHeight:"0"}),e.innerHTML="<img src='"+gt[i].image+"' alt='"+t._cultureInfo[i+"Text"]+"' />",k(e.childNodes[0],{height:"95%",pointerEvents:"none"})),e.setAttribute("title",t._cultureInfo[i+"Text"])}function w(){for(var t=null,e=0;e<arguments.length;e++)(t=arguments[e]).style&&(t.style.display="inline")}function T(){for(var t=null,e=0;e<arguments.length;e++)(t=arguments[e])&&t.style&&(t.style.display="none")}function P(t,e,i,a,s){return null===t||"undefined"===typeof t?"undefined"===typeof i?e:i:(t=parseFloat(t.toString())*(0<=t.toString().indexOf("%")?e/100:1),"undefined"!==typeof a&&(t=Math.min(a,t),"undefined"!==typeof s&&(t=Math.max(s,t))),!isNaN(t)&&t<=e&&0<=t?t:"undefined"===typeof i?e:i)}function C(t,e,i,a,s){this._defaultsKey=t,this._themeOptionsKey=e,this._index=a,this.parent=s,this._eventListeners=[],t={},this.theme&&c(this.parent)&&c(e)&&c(a)?t=c(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[e]&&(null===a?t=this.parent.themeOptions[e]:0<this.parent.themeOptions[e].length&&(a=Math.min(this.parent.themeOptions[e].length-1,a),t=this.parent.themeOptions[e][a])),this.themeOptions=t,this.options=i||{_isPlaceholder:!0},this.setOptions(this.options,t)}function S(t,e,i,a,s){"undefined"===typeof s&&(s=0),this._padding=s,this._x1=t,this._y1=e,this._x2=i,this._y2=a,this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function A(t,e){A.base.constructor.call(this,"TextBlock",null,e,null,null),this.ctx=t,this._isDirty=!0,this._wrappedText=null,this._initialize()}function L(t,e){L.base.constructor.call(this,"Toolbar","toolbar",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.optionsName="toolbar"}function B(t,e){if(B.base.constructor.call(this,"Title","title",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.optionsName="title",c(this.options.margin)&&t.options.subtitles)for(var i=t.options.subtitles,a=0;a<i.length;a++)if((c(i[a].horizontalAlign)&&"center"===this.horizontalAlign||i[a].horizontalAlign===this.horizontalAlign)&&(c(i[a].verticalAlign)&&"top"===this.verticalAlign||i[a].verticalAlign===this.verticalAlign)&&!i[a].dockInsidePlotArea===!this.dockInsidePlotArea){this.margin=0;break}"undefined"===typeof this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function F(t,e,i){F.base.constructor.call(this,"Subtitle","subtitles",e,i,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.optionsName="subtitles",this.isOptionsInArray=!0,"undefined"===typeof this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function I(){this.pool=[]}function z(t){var e;t&&H[t]&&(e=H[t]),z.base.constructor.call(this,"CultureInfo",null,e,null,null)}var V,D,W,E,X,O=!1,Y={},R=!!document.createElement("canvas").getContext,N={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"light1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditText:"CanvasJS",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null,publicProperties:{title:"readWrite",subtitles:"readWrite",toolbar:"readWrite",toolTip:"readWrite",legend:"readWrite",axisX:"readWrite",axisY:"readWrite",axisX2:"readWrite",axisY2:"readWrite",data:"readWrite",options:"readWrite",bounds:"readOnly",container:"readOnly",selectedColorSet:"readOnly"}},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:R?"transparent":null,margin:5,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,dockInsidePlotArea:!1,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},Toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white",publicProperties:{options:"readWrite",chart:"readOnly"}},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,backgroundColor:R?"transparent":null,borderColor:R?"transparent":null,borderThickness:0,cornerRadius:0,maxWidth:null,maxHeight:null,markerMargin:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null,publicProperties:{options:"readWrite",bounds:"readOnly",chart:"readOnly"}},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:R?"rgba(255,255,255,.9)":"rgb(255,255,255)",borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:"black",fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic",updated:null,hidden:null,publicProperties:{options:"readWrite",chart:"readOnly"}},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,reversed:!1,logarithmic:!1,logarithmBase:10,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",titleWrap:!0,titleMaxWidth:null,titleBackgroundColor:R?"transparent":null,titleBorderColor:R?"transparent":null,titleBorderThickness:0,titleCornerRadius:0,labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!0,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,labelBackgroundColor:R?"transparent":null,labelBorderColor:R?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelPlacement:"outside",labelTextAlign:"left",prefix:"",suffix:"",includeZero:!1,tickLength:5,tickColor:"black",tickThickness:1,tickPlacement:"outside",lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"#A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:R?"transparent":null,valueFormatString:null,margin:2,publicProperties:{options:"readWrite",stripLines:"readWrite",scaleBreaks:"readWrite",crosshair:"readWrite",bounds:"readOnly",chart:"readOnly"}},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelPlacement:"inside",labelAlign:"far",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:null,labelBorderColor:R?"transparent":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,showOnTop:!1,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},ScaleBreaks:{autoCalculate:!1,collapsibleThreshold:"25%",maxNumberOfAutoBreaks:2,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",customBreaks:"readWrite",axis:"readOnly",autoBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Break:{startValue:null,endValue:null,spacing:8,type:"straight",color:"#FFFFFF",fillOpacity:.9,lineThickness:2,lineColor:"#E16E6E",lineDashType:"solid",publicProperties:{options:"readWrite",scaleBreaks:"readOnly",bounds:"readOnly",chart:"readOnly"}},Crosshair:{enabled:!1,snapToDataPoint:!1,color:"grey",opacity:null,thickness:2,lineDashType:"solid",label:"",labelWrap:!0,labelMaxWidth:null,labelBackgroundColor:R?"grey":null,labelBorderColor:R?"grey":null,labelBorderThickness:0,labelCornerRadius:0,labelFontFamily:R?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:12,labelFontColor:"#fff",labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,valueFormatString:null,updated:null,hidden:null,publicProperties:{options:"readWrite",axis:"readOnly",bounds:"readOnly",chart:"readOnly"}},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:"default",indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelTextAlign:"left",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:"gray",indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",connectNullData:!1,nullDataLineDashType:"dash",color:null,lineColor:null,risingColor:"white",fallingColor:"red",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,neckHeight:null,neckWidth:null,reversed:!1,valueRepresents:null,linkedDataSeriesIndex:null,whiskerThickness:2,whiskerDashType:"solid",whiskerColor:null,whiskerLength:null,stemThickness:2,stemColor:null,stemDashType:"solid",upperBoxColor:"white",lowerBoxColor:"white",type:"column",xValueType:"number",axisXType:"primary",axisYType:"primary",axisXIndex:0,axisYIndex:0,xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:R?"transparent":null,legendMarkerBorderThickness:0,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:R?"transparent":null,markerBorderThickness:0,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0,publicProperties:{options:"readWrite",axisX:"readWrite",axisY:"readWrite",chart:"readOnly"}},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",textAlign:"left",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",printText:"Print",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},H={en:{}},Z=R?"Trebuchet MS, Helvetica, sans-serif":"Arial",j=R?"Impact, Charcoal, sans-serif":"Arial",U={colorSet1:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #7F6084 #77A033 #33558B #E59566".split(" "),colorSet2:"#6D78AD #51CDA0 #DF7970 #4C9CA0 #AE7D99 #C9D45C #5592AD #DF874D #52BCA8 #8E7AA3 #E3CB64 #C77B85 #C39762 #8DD17E #B57952 #FCC26C".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},q={colorSet:"colorSet1",backgroundColor:"#FFFFFF",title:{fontFamily:j,fontSize:32,fontColor:D="#333333",fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:j,fontSize:J=14,fontColor:D,fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:Z,indexLabelFontSize:J,indexLabelFontColor:D,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Z,titleFontSize:K=20,titleFontColor:D,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W="#000000",labelFontWeight:"normal",lineThickness:1,lineColor:V="#666666",tickThickness:1,tickColor:V,gridThickness:0,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:X=E="#000000",color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:D,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V,tickThickness:1,tickColor:V,gridThickness:0,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:D,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V,tickThickness:1,tickColor:V,gridThickness:1,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:D,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V,tickThickness:1,tickColor:V,gridThickness:1,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:Z,fontSize:14,fontColor:D,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};W=D="#F5F5F5",V="#FFFFFF",E="#40BAF1",X="#F5F5F5";var G={colorSet:"colorSet2",title:{fontFamily:Z,fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},subtitles:[{fontFamily:Z,fontSize:J=14,fontColor:"#3A3A3A",fontWeight:"normal",verticalAlign:"top",margin:5}],data:[{indexLabelFontFamily:Z,indexLabelFontSize:J,indexLabelFontColor:"#666666",indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Z,titleFontSize:K=20,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickThickness:1,tickColor:"#BBBBBB",gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisX2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:1,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],axisY2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:"#666666",titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:"#666666",labelFontWeight:"normal",lineThickness:0,lineColor:"#BBBBBB",tickColor:"#BBBBBB",tickThickness:1,gridThickness:1,gridColor:"#BBBBBB",stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FFA500",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FFA500",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#EEEEEE",labelFontWeight:"normal",labelBackgroundColor:"black",color:"black",thickness:1,lineDashType:"dot"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#BBBBBB",lineThickness:1,lineDashType:"solid"}}],legend:{fontFamily:Z,fontSize:14,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1},toolbar:{itemBackgroundColor:"white",itemBackgroundColorOnHover:"#2196f3",buttonBorderColor:"#2196f3",buttonBorderThickness:1,fontColor:"black",fontColorOnHover:"white"}};W=D="#F5F5F5",j={colorSet:"colorSet12",backgroundColor:"#2A2A2A",title:{fontFamily:j,fontSize:32,fontColor:D,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:j,fontSize:J=14,fontColor:D,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:Z,indexLabelFontSize:J,indexLabelFontColor:W,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Z,titleFontSize:K=20,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V="#FFFFFF",tickThickness:1,tickColor:V,gridThickness:0,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X="#F5F5F5",color:E="#40BAF1",thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V,tickThickness:1,tickColor:V,gridThickness:0,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V,tickThickness:1,tickColor:V,gridThickness:1,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V,tickThickness:1,tickColor:V,gridThickness:1,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:Z,fontSize:14,fontColor:D,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:W,backgroundColor:"rgba(0, 0, 0, .7)"}},W=D="#FAFAFA";var K,J,Q={light1:q,light2:G,dark1:j,dark2:{colorSet:"colorSet2",backgroundColor:"#32373A",title:{fontFamily:Z,fontSize:32,fontColor:D,fontWeight:"normal",verticalAlign:"top",margin:5},subtitles:[{fontFamily:Z,fontSize:J=14,fontColor:D,fontWeight:"normal",verticalAlign:"top",margin:5}],toolbar:{itemBackgroundColor:"#666666",itemBackgroundColorOnHover:"#FF7372",buttonBorderColor:"#FF7372",buttonBorderThickness:1,fontColor:"#F5F5F5",fontColorOnHover:"#F5F5F5"},data:[{indexLabelFontFamily:Z,indexLabelFontSize:J,indexLabelFontColor:W,indexLabelFontWeight:"normal",indexLabelLineThickness:1}],axisX:[{titleFontFamily:Z,titleFontSize:K=20,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V="#FFFFFF",tickThickness:1,tickColor:V,gridThickness:0,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X="#F5F5F5",color:E="#40BAF1",thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisX2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:1,lineColor:V,tickThickness:1,tickColor:V,gridThickness:0,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:0,lineColor:V,tickThickness:1,tickColor:V,gridThickness:1,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],axisY2:[{titleFontFamily:Z,titleFontSize:K,titleFontColor:W,titleFontWeight:"normal",labelFontFamily:Z,labelFontSize:J,labelFontColor:W,labelFontWeight:"normal",lineThickness:0,lineColor:V,tickThickness:1,tickColor:V,gridThickness:1,gridColor:V,stripLines:[{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#FF7300",labelFontWeight:"normal",labelBackgroundColor:null,color:"#FF7300",thickness:1}],crosshair:{labelFontFamily:Z,labelFontSize:J,labelFontColor:"#000000",labelFontWeight:"normal",labelBackgroundColor:X,color:E,thickness:1,lineDashType:"dash"},scaleBreaks:{type:"zigzag",spacing:"2%",lineColor:"#777777",lineThickness:1,lineDashType:"solid",color:"#111111"}}],legend:{fontFamily:Z,fontSize:14,fontColor:D,fontWeight:"bold",verticalAlign:"bottom",horizontalAlign:"center"},toolTip:{fontFamily:Z,fontSize:14,fontStyle:"normal",cornerRadius:0,borderThickness:1,fontColor:W,backgroundColor:"rgba(0, 0, 0, .7)"}},theme1:q,theme2:G,theme3:q},$={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")};Y.fSDec=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(Math.ceil(t.length/57/5)^t.charCodeAt(i));return e},delete N[Y.fSDec("Bi`su")][Y.fSDec("bsdehuIsdg")],Y.pro={sCH:N[Y.fSDec("Bi`su")][Y.fSDec("bsdehuIsdg")]};var tt=function(){var t=!1;try{var e=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){return t=!0,!1}});window.addEventListener&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(c){t=!1}return t}(),et={},it=null,at=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},st=function(t){t.width=1,t.height=1,t.getContext("2d")&&t.getContext("2d").clearRect(0,0,1,1)},nt=function(t,e,i){return e=Math.min(this.width,this.height),Math.max("theme4"===this.theme?0:300<=e?12:11,Math.round(e*(t/400)))},ot=function(){var t=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,e="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),i="Sun Mon Tue Wed Thu Fri Sat".split(" "),a="January February March April May June July August September October November December".split(" "),s="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g;return function(h,l,d){var c=d?d.days:e,p=d?d.months:a,u=d?d.shortDays:i,x=d?d.shortMonths:s;d="";var m=!1;if(h=h&&h.getTime?h:h?new Date(h):new Date,isNaN(h))throw SyntaxError("invalid date");"UTC:"===l.slice(0,4)&&(l=l.slice(4),m=!0);var g=h[(d=m?"getUTC":"get")+"Date"](),f=h[d+"Day"](),y=h[d+"Month"](),b=h[d+"FullYear"](),v=h[d+"Hours"](),_=h[d+"Minutes"](),k=h[d+"Seconds"](),M=h[d+"Milliseconds"](),w=m?0:h.getTimezoneOffset();return l.replace(t,(function(t){switch(t){case"D":return g;case"DD":return n(g,2);case"DDD":return u[f];case"DDDD":return c[f];case"M":return y+1;case"MM":return n(y+1,2);case"MMM":return x[y];case"MMMM":return p[y];case"Y":return parseInt(String(b).slice(-2));case"YY":return n(String(b).slice(-2),2);case"YYY":return n(String(b).slice(-3),3);case"YYYY":return n(b,4);case"h":return v%12||12;case"hh":return n(v%12||12,2);case"H":return v;case"HH":return n(v,2);case"m":return _;case"mm":return n(_,2);case"s":return k;case"ss":return n(k,2);case"f":return n(String(M),3).slice(0,1);case"ff":return n(String(M),3).slice(0,2);case"fff":return n(String(M),3).slice(0,3);case"t":return 12>v?"a":"p";case"tt":return 12>v?"am":"pm";case"T":return 12>v?"A":"P";case"TT":return 12>v?"AM":"PM";case"K":return m?"UTC":(String(h).match(o)||[""]).pop().replace(r,"");case"z":return(0<w?"-":"+")+Math.floor(Math.abs(w)/60);case"zz":return(0<w?"-":"+")+n(Math.floor(Math.abs(w)/60),2);case"zzz":return(0<w?"-":"+")+n(Math.floor(Math.abs(w)/60),2)+n(Math.abs(w)%60,2);default:return t.slice(1,t.length-1)}}))}}(),rt=function(t,e,i){if(null===t)return"";if(!isFinite(t))return t;var a=0>(t=Number(t));a&&(t*=-1);var s=i?i.decimalSeparator:".",o=i?i.digitGroupSeparator:",",r="";e=String(e);r=1;var h=i="",l=-1,d=[],c=[],p=0,u=0,x=0,m=!1,g=0;h=e.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);e=null;for(var f=0;h&&f<h.length;f++)if("."===(e=h[f])&&0>l)l=f;else{if("%"===e)r*=100;else{if("\u2030"===e){r*=1e3;continue}if(","===e[0]&&"."===e[e.length-1]){r/=Math.pow(1e3,e.length-1),l=f+e.length-1;continue}"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||(m=!0)}0>l?(d.push(e),"#"===e||"0"===e?p++:","===e&&x++):(c.push(e),"#"!==e&&"0"!==e||u++)}for(m&&(e=Math.floor(t),h=-Math.floor(Math.log(t)/Math.LN10+1),g=0===t?0:0===e?-(p+h):function(t){var e=0>t;if(1>Math.abs(t)){var i=parseInt(t.toString().split("e-")[1]);i&&(t=(e?-1*t:t)*Math.pow(10,i-1),t="0."+Array(i).join("0")+t.toString().substring(2),t=e?"-"+t:t)}else 20<(i=parseInt(t.toString().split("+")[1]))&&(i-=20,t=(t/=Math.pow(10,i)).toString()+Array(i+1).join("0"));return String(t)}(e).length-p,r/=Math.pow(10,g)),0>l&&(l=f),e=(r=(t*r).toFixed(u)).split("."),r=(e[0]+"").split(""),t=(e[1]+"").split(""),r&&"0"===r[0]&&r.shift(),m=h=f=u=l=0;0<d.length;)if("#"===(e=d.pop())||"0"===e)if(++l===p){var y=r;r=[];if("0"===e)for(e=p-u-(y?y.length:0);0<e;)y.unshift("0"),e--;for(;0<y.length;)i=y.pop()+i,0===++m%h&&f===x&&0<y.length&&(i=o+i)}else 0<r.length?(i=r.pop()+i,u++,m++):"0"===e&&(i="0"+i,u++,m++),0===m%h&&f===x&&0<r.length&&(i=o+i);else"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?","===e?(f++,h=m,m=0,0<r.length&&(i=o+i)):i=1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?e.slice(1,e.length-1)+i:e+i:i+=(e=0>g?e.replace("+","").replace("-",""):e.replace("-","")).replace(/[0]+/,(function(t){return n(g,t.length)}));for(o="",d=!1;0<c.length;)"#"===(e=c.shift())||"0"===e?0<t.length&&0!==Number(t.join(""))?(o+=t.shift(),d=!0):"0"===e&&(o+="0",d=!0):1<e.length&&('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])?o+=e.slice(1,e.length-1):"E"!==e[0]&&"e"!==e[0]||"0"!==e[e.length-1]||!/[eE][+-]*[0]+/.test(e)?o+=e:o+=(e=0>g?e.replace("+","").replace("-",""):e.replace("-","")).replace(/[0]+/,(function(t){return n(g,t.length)}));return i+=(d?s:"")+o,a?"-"+i:i},ht=function(t){var e=0,i=0;return(t=t||window.event).offsetX||0===t.offsetX?(e=t.offsetX,i=t.offsetY):t.layerX||0==t.layerX?(e=t.layerX,i=t.layerY):(e=t.pageX-t.target.offsetLeft,i=t.pageY-t.target.offsetTop),{x:e,y:i}},lt=!0,dt=window.devicePixelRatio||1,ct=1,pt=lt?dt/ct:1,ut=function(t,e,i,a,s,n,o,r,h,l,d,c,p){"undefined"===typeof p&&(p=1),o=o||0,r=r||"black";var u=15<a-e&&15<s-i?8:.35*Math.min(a-e,s-i);t.beginPath(),t.moveTo(e,i),t.save(),t.fillStyle=n,t.globalAlpha=p,t.fillRect(e,i,a-e,s-i),t.globalAlpha=1,0<o&&(p=0===o%2?0:.5,t.beginPath(),t.lineWidth=o,t.strokeStyle=r,t.moveTo(e,i),t.rect(e-p,i-p,a-e+2*p,s-i+2*p),t.stroke()),t.restore(),!0===h&&(t.save(),t.beginPath(),t.moveTo(e,i),t.lineTo(e+u,i+u),t.lineTo(a-u,i+u),t.lineTo(a,i),t.closePath(),(o=t.createLinearGradient((a+e)/2,i+u,(a+e)/2,i)).addColorStop(0,n),o.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=o,t.fill(),t.restore()),!0===l&&(t.save(),t.beginPath(),t.moveTo(e,s),t.lineTo(e+u,s-u),t.lineTo(a-u,s-u),t.lineTo(a,s),t.closePath(),(o=t.createLinearGradient((a+e)/2,s-u,(a+e)/2,s)).addColorStop(0,n),o.addColorStop(1,"rgba(255, 255, 255, .4)"),t.fillStyle=o,t.fill(),t.restore()),!0===d&&(t.save(),t.beginPath(),t.moveTo(e,i),t.lineTo(e+u,i+u),t.lineTo(e+u,s-u),t.lineTo(e,s),t.closePath(),(o=t.createLinearGradient(e+u,(s+i)/2,e,(s+i)/2)).addColorStop(0,n),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=o,t.fill(),t.restore()),!0===c&&(t.save(),t.beginPath(),t.moveTo(a,i),t.lineTo(a-u,i+u),t.lineTo(a-u,s-u),t.lineTo(a,s),(o=t.createLinearGradient(a-u,(s+i)/2,a,(s+i)/2)).addColorStop(0,n),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=o,o.addColorStop(0,n),o.addColorStop(1,"rgba(255, 255, 255, 0.1)"),t.fillStyle=o,t.fill(),t.closePath(),t.restore())},xt=function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(Math.ceil(t.length/57/5)^t.charCodeAt(i));return e},mt=window&&window[xt("mnb`uhno")]&&window[xt("mnb`uhno")].href&&window[xt("mnb`uhno")].href.indexOf&&(-1!==window[xt("mnb`uhno")].href.indexOf(xt("b`ow`rkr/bnl"))||-1!==window[xt("mnb`uhno")].href.indexOf(xt("gdonqhy/bnl"))||-1!==window[xt("mnb`uhno")].href.indexOf(xt("gheemd")))&&-1===window[xt("mnb`uhno")].href.indexOf(xt("gheemd")),gt={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg=="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC"},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALWSURBVEhLvZZLaBNRFIabyftBIgEfqCCBoCC6MYqiXYiIj4U76U4X7sUHbhQhUBfixhZEUBDB16YuFERaUaQLK7ooCOJj4UKtYEFU0EptShO/A9Ph3js3k8lo/eHnP7n3nP/M3LlzMz1hkUwmNziOcyKRSFyFt+LxeD/c2Wq1Ym7Kv0M2m11Os1OxWGycn1OwZXCGuXfwIhezkd9/jRgNT2L4ldhs1pbkX5OLJe4euVxuGQaPCa3mnUjtJx7BDuKusJTCV6jVVGHTMuYRjxma7yIOhTgFY6jNaAKew2xPKpVay9ganmkvj+M448/MfJdT5K5Gg4HJacRngPFgqVRaRNwW1B4i7yehWfsEDdz1K+A01AoxPIqGAiuwGfkOTY8+1A6u7AyiFTB2Hu0KPIrdiOnzHLWDybeImvy+Wq2mZa5bUHsD0Zpz+KxHdWQymV6kAb1ElqeORgJLvgnRdj1+R1AfzkIvSUjxVjQSarVakrueIPT8+H1F5jSUy+WXiJrUYBVWyVxU4PEU8TzhfaijUqnMIWrjaY492eWRwdKOIqrnIxnXwLLeRLwk2GQzrEMjg0avEbXxkIxr4OoOImpj2QwyFgms1koa/SZUG8s+0iGnEhNfCNXEhzIXBVz0McTzEvJ+70P9oNFtxEzei3aFYrFYxmuSUPWSv9Yi9IMm2xE1We56Mp1OV4nDwqFmBDV9gk9AEh4gZtFHNt8W4kAUCoXF5MorY9Z/kDni9nDv7hc0i2fhgLvTtX8a99PoMPPagTFPxofRzmDJ9yM+AyEmTfgGysYbQcfhDzPPJDmX0c7gDg4gs9BqFIWhm/Nct5H8gtBq1I7UfIbtvmIuoaGQcp+fdpbbSM43eEH5wrwLbXmhm/fU63VHXjcuok7hEByFY/AeHGC8L5/PL3HT5xGH1uYwfPOICGo+CBcU0vwO1BqzUqILDl/z/9VYIMfpddiAc47jDP8BsUpb13wOLRwAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAeCAYAAABE4bxTAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADoSURBVFhH7dc9CsJAFATgRxIIBCwCqZKATX5sbawsY2MvWOtF9AB6AU8gguAJbD2AnZ2VXQT/Ko2TYGCL2OYtYQc+BuYA+1hCtnCVwMm27SGaXpDJIAiCvCkVR05hGOZNN3HkFMdx3nQRR06+76/R1IcFLJlNQEWlmWlBTwJtKLKHynehZqnjOGM0PYWRVXk61C37p7xlZ3Hk5HneCk1dmMH811xGoKLSzDiQwIBZB4ocoPJdqNkDt2yKlueWRVGUtzy3rPwo3sWRU3nLjuLI6OO67oZM00wMw3hrmpZx0XU9syxrR0T0BeMpb9dneSR2AAAAAElFTkSuQmCC"}};C.prototype.setOptions=function(t,e){if(N[this._defaultsKey]){var i,a=N[this._defaultsKey];for(i in a)"publicProperties"!==i&&a.hasOwnProperty(i)&&(this[i]=t&&i in t?t[i]:e&&i in e?e[i]:a[i])}else O&&window.console&&console.log("defaults not set")},C.prototype.get=function(t){var e=N[this._defaultsKey];return"options"===t?this.options&&this.options._isPlaceholder?null:this.options:e.hasOwnProperty(t)||e.publicProperties&&e.publicProperties.hasOwnProperty(t)?this[t]:void(window.console&&window.console.log('Property "'+t+"\" doesn't exist. Please check for typo."))},C.prototype.set=function(t,e,i){i="undefined"===typeof i||i;var a=N[this._defaultsKey];if("options"===t)this.createUserOptions(e);else{if(!(a.hasOwnProperty(t)||a.publicProperties&&a.publicProperties.hasOwnProperty(t)&&"readWrite"===a.publicProperties[t]))return void(window.console&&(a.publicProperties&&a.publicProperties.hasOwnProperty(t)&&"readOnly"===a.publicProperties[t]?window.console.log('Property "'+t+'" is read-only.'):window.console.log('Property "'+t+"\" doesn't exist. Please check for typo.")));this.options._isPlaceholder&&this.createUserOptions(),this.options[t]=e}i&&(this.stockChart||this.chart||this).render()},C.prototype.addTo=function(t,e,i,a){a="undefined"===typeof a||a;var s=N[this._defaultsKey];s.hasOwnProperty(t)||s.publicProperties&&s.publicProperties.hasOwnProperty(t)&&"readWrite"===s.publicProperties[t]?(this.options._isPlaceholder&&this.createUserOptions(),"undefined"===typeof this.options[t]&&(this.options[t]=[]),t=this.options[t],i="undefined"===typeof i||null===i?t.length:i,t.splice(i,0,e),a&&(this.stockChart||this.chart||this).render()):window.console&&(s.publicProperties&&s.publicProperties.hasOwnProperty(t)&&"readOnly"===s.publicProperties[t]?window.console.log('Property "'+t+'" is read-only.'):window.console.log('Property "'+t+"\" doesn't exist. Please check for typo."))},C.prototype.createUserOptions=function(t){if("undefined"!==typeof t||this.options._isPlaceholder)if(this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.isOptionsInArray){this.parent.options[this.optionsName]||(this.parent.options[this.optionsName]=[]);var e=this.parent.options[this.optionsName],i=e.length;this.options._isPlaceholder||(p(e),i=e.indexOf(this.options)),this.options="undefined"===typeof t?{}:t,e[i]=this.options}else this.options="undefined"===typeof t?{}:t,t=this.parent.options,this.optionsName?e=this.optionsName:(e=this._defaultsKey)&&0!==e.length?(i=e.charAt(0).toLowerCase(),1<e.length&&(i=i.concat(e.slice(1))),e=i):e=void 0,t[e]=this.options},C.prototype.remove=function(t){if(t="undefined"===typeof t||t,this.isOptionsInArray){var e=this.parent.options[this.optionsName];p(e);var i=e.indexOf(this.options);0<=i&&e.splice(i,1)}else delete this.parent.options[this.optionsName];t&&(this.stockChart||this.chart||this).render()},C.prototype.updateOption=function(t){!N[this._defaultsKey]&&O&&window.console&&console.log("defaults not set");var e=N[this._defaultsKey],i={},a=this[t],s=this._themeOptionsKey,n=this._index;return this.theme&&c(this.parent)&&c(s)&&c(n)?i=c(this.predefinedThemes[this.theme])?this.predefinedThemes.light1:this.predefinedThemes[this.theme]:this.parent&&this.parent.themeOptions&&this.parent.themeOptions[s]&&(null===n?i=this.parent.themeOptions[s]:0<this.parent.themeOptions[s].length&&(i=Math.min(this.parent.themeOptions[s].length-1,n),i=this.parent.themeOptions[s][i])),this.themeOptions=i,t in e&&(a=t in this.options?this.options[t]:i&&t in i?i[t]:e[t]),a!==this[t]&&(this[t]=a,!0)},C.prototype.trackChanges=function(t){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[t]=this.options[t]},C.prototype.isBeingTracked=function(t){return this.options._oldOptions||(this.options._oldOptions={}),!!this.options._oldOptions[t]},C.prototype.hasOptionChanged=function(t){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[t]!==this.options[t]},C.prototype.addEventListener=function(t,e,i){t&&e&&(this._eventListeners[t]=this._eventListeners[t]||[],this._eventListeners[t].push({context:i||this,eventHandler:e}))},C.prototype.removeEventListener=function(t,e){if(t&&e&&this._eventListeners[t])for(var i=this._eventListeners[t],a=0;a<i.length;a++)if(i[a].eventHandler===e){i[a].splice(a,1);break}},C.prototype.removeAllEventListeners=function(){this._eventListeners=[]},C.prototype.dispatchEvent=function(t,e,i){if(t&&this._eventListeners[t]){e=e||{};for(var a=this._eventListeners[t],s=0;s<a.length;s++)a[s].eventHandler.call(a[s].context,e)}"function"===typeof this[t]&&this[t].call(i||this.chart,e)},S.prototype.registerSpace=function(t,e){"top"===t?this._topOccupied+=e.height:"bottom"===t?this._bottomOccupied+=e.height:"left"===t?this._leftOccupied+=e.width:"right"===t&&(this._rightOccupied+=e.width)},S.prototype.unRegisterSpace=function(t,e){"top"===t?this._topOccupied-=e.height:"bottom"===t?this._bottomOccupied-=e.height:"left"===t?this._leftOccupied-=e.width:"right"===t&&(this._rightOccupied-=e.width)},S.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},S.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding},a(A,C),A.prototype._initialize=function(){c(this.padding)||"object"!==typeof this.padding?this.topPadding=this.rightPadding=this.bottomPadding=this.leftPadding=0|Number(this.padding):(this.topPadding=c(this.padding.top)?0:0|Number(this.padding.top),this.rightPadding=c(this.padding.right)?0:0|Number(this.padding.right),this.bottomPadding=c(this.padding.bottom)?0:0|Number(this.padding.bottom),this.leftPadding=c(this.padding.left)?0:0|Number(this.padding.left))},A.prototype.render=function(t){if(0!==this.fontSize){t&&this.ctx.save();var e=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var i=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+i),"middle"===this.textBaseline&&(i=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var a=0,s=this.topPadding,n=null;for(this.ctx.roundRect||r(this.ctx),(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,i,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,i=0;i<this._wrappedText.lines.length;i++)n=this._wrappedText.lines[i],"right"===this.horizontalAlign||"right"===this.textAlign?a=this.width-n.width-this.rightPadding:"left"===this.horizontalAlign||"left"===this.textAlign?a=this.leftPadding:"center"!==this.horizontalAlign&&"center"!==this.textAlign||(a=(this.width-(this.leftPadding+this.rightPadding))/2-n.width/2+this.leftPadding),this.ctx.fillText(n.text,a,s),s+=n.height;this.ctx.font=e,t&&this.ctx.restore()}},A.prototype.setText=function(t){this.text=t,this._isDirty=!0,this._wrappedText=null},A.prototype.measureText=function(){if(this._lineHeight=x(this.fontFamily,this.fontSize,this.fontWeight),null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},A.prototype._getLineWithWidth=function(t,e,i){if(!(t=String(t)))return{text:"",width:0};var a=i=0,s=t.length-1,n=1/0;for(this.ctx.font=this._getFontString();a<=s;){n=Math.floor((a+s)/2);var o=t.substr(0,n+1);if((i=this.ctx.measureText(o).width)<e)a=n+1;else{if(!(i>e))break;s=n-1}}return i>e&&1<o.length&&(o=o.substr(0,o.length-1),i=this.ctx.measureText(o).width),e=!0,o.length!==t.length&&" "!==t[o.length]||(e=!1),e&&(1<(t=o.split(" ")).length&&t.pop(),o=t.join(" "),i=this.ctx.measureText(o).width),{text:o,width:i}},A.prototype._wrapText=function(){var t=new String(o(String(this.text))),e=[],i=this.ctx.font,a=0,s=0;if(this.ctx.font=this._getFontString(),0===this.frontSize)s=a=0;else for(;0<t.length;){var n=this.maxHeight-(this.topPadding+this.bottomPadding),r=this._getLineWithWidth(t,this.maxWidth-(this.leftPadding+this.rightPadding),!1);r.height=this._lineHeight,e.push(r);var h=s;s=Math.max(s,r.width),a=a+r.height,t=o(t.slice(r.text.length,t.length));n&&a>n&&(a-=(r=e.pop()).height,s=h)}this._wrappedText={lines:e,width:s,height:a},this.width=s+(this.leftPadding+this.rightPadding),this.height=a+(this.topPadding+this.bottomPadding),this.ctx.font=i},A.prototype._getFontString=function(){var t;t=this.fontStyle?this.fontStyle+" ":"",t+=this.fontWeight?this.fontWeight+" ":"",t+=this.fontSize?this.fontSize+"px ":"";var e=this.fontFamily?this.fontFamily+"":"";return!R&&e&&("'"!==(e=e.split(",")[0])[0]&&'"'!==e[0]&&(e="'"+e+"'")),t+e},a(L,C),a(B,C),B.prototype.setLayout=function(){if(this.text){var t,e,i,a=this.dockInsidePlotArea?this.chart.plotArea:this.chart,s=a.layoutManager.getFreeSpace(),n=s.x1,o=s.y1,r=0,h=0,l=this.chart._menuButton&&this.chart.exportEnabled&&"top"===this.verticalAlign?40:0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(null===this.maxWidth&&(this.maxWidth=s.width-4-l*("center"===this.horizontalAlign?2:1)),h=.5*s.height-this.margin-2,r=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(null===this.maxWidth&&(this.maxWidth=s.height-4),h=.5*s.width-this.margin-2):"center"===this.horizontalAlign&&(null===this.maxWidth&&(this.maxWidth=s.width-4),h=.5*s.height-4)),c(this.padding)||"number"!==typeof this.padding?c(this.padding)||"object"!==typeof this.padding||(i=this.padding.top?this.padding.top:this.padding.bottom?this.padding.bottom:0,i+=this.padding.bottom?this.padding.bottom:this.padding.top?this.padding.top:0):i=2*this.padding,this.wrap||(h=Math.min(h,1.5*this.fontSize+i)),i=(h=new A(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,textAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:h,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"middle"})).measureText(),"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(o=s.y1+2+this.fontSize/2+4,e="top"):"bottom"===this.verticalAlign&&(o=s.y2-2-i.height+this.fontSize/2+4,e="bottom"),"left"===this.horizontalAlign?n=s.x1+2:"center"===this.horizontalAlign?n=s.x1+s.width/2-i.width/2:"right"===this.horizontalAlign&&(n=s.x2-2-i.width-l),t=this.horizontalAlign,this.width=i.width,this.height=i.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(n=s.x1+2+(this.fontSize/2+4),o=s.y2-2-(this.maxWidth/2-i.width/2),r=-90,e="left",this.width=i.height,this.height=i.width):"right"===this.horizontalAlign?(n=s.x2-2-(this.fontSize/2+4),o=s.y1+2+(this.maxWidth/2-i.width/2),r=90,e="right",this.width=i.height,this.height=i.width):"center"===this.horizontalAlign&&(o=a.y1+(a.height/2-i.height/2)+this.fontSize/2+4,n=a.x1+(a.width/2-i.width/2),e="center",this.width=i.width,this.height=i.height),t="center"),h.x=n,h.y=o,h.angle=r,h.horizontalAlign=t,this._textBlock=h,a.layoutManager.registerSpace(e,{width:this.width+("left"===e||"right"===e?this.margin+2:0),height:this.height+("top"===e||"bottom"===e?this.margin+2:0)}),this.bounds={x1:n,y1:o,x2:n+this.width,y2:o+this.height},this.ctx.textBaseline="top"}},B.prototype.render=function(){this._textBlock&&this._textBlock.render(!0)},a(F,C),F.prototype.setLayout=B.prototype.setLayout,F.prototype.render=B.prototype.render,I.prototype.get=function(t,e){var i=null;return 0<this.pool.length?b(i=this.pool.pop(),t,e):i=_(t,e),i},I.prototype.release=function(t){this.pool.push(t)},a(z,C);var ft={addTheme:function(t,e){Q[t]=e},addColorSet:function(t,e){U[t]=e},addCultureInfo:function(t,e){H[t]=e},formatNumber:function(t,e,i){if(H[i=i||"en"])return rt(t,e||"#,##0.##",new z(i));throw"Unknown Culture Name"},formatDate:function(t,e,i){if(H[i=i||"en"])return ot(t,e||"DD MMM YYYY",new z(i));throw"Unknown Culture Name"}};"undefined"!==typeof t.exports?t.exports=ft:void 0===(i=function(){return ft}.apply(e,[]))||(t.exports=i),Z=ft.Chart=function(){function t(t,e){return t.x-e.x}function e(t,i,a){i=i||{},c(a)?(this.predefinedThemes=Q,this.optionsName=this.parent=this.index=null):(this.parent=a.parent,this.index=a.index,this.predefinedThemes=a.predefinedThemes,this.optionsName=a.optionsName,this.stockChart=a.stockChart,this.panel=t,this.isOptionsInArray=a.isOptionsInArray),this.theme=c(i.theme)||c(this.predefinedThemes[i.theme])?"light1":i.theme,e.base.constructor.call(this,"Chart",this.optionsName,i,this.index,this.parent);var s=this;this._containerId=t,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.disableToolTip=this.animatedRender=!1,this.canvasPool=new I,this.allDOMEventHandlers=[],this.panEnabled=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],(this.container="string"===typeof this._containerId?document.getElementById(this._containerId):this._containerId)?(this.container.innerHTML="",i=t=0,t=this.options.width?this.width:0<this.container.clientWidth?this.container.clientWidth:this.width,i=this.options.height?this.height:0<this.container.clientHeight?this.container.clientHeight:this.height,this.width=t,this.height=i,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this.selectedColorSet="undefined"!==typeof U[this.colorSet]?U[this.colorSet]:U.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",this._canvasJSContainer.style.direction="ltr",R||(this._canvasJSContainer.style.height="0px"),this.container.appendChild(this._canvasJSContainer),this.canvas=_(t,i),this._preRenderCanvas=_(t,i),this.canvas.style.position="absolute",this.canvas.style.WebkitUserSelect="none",this.canvas.style.MozUserSelect="none",this.canvas.style.msUserSelect="none",this.canvas.style.userSelect="none",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",r(this.ctx),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),this._preRenderCtx.textBaseline="top",r(this._preRenderCtx),R?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=_(t,i),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=_(t,i),this.overlaidCanvas.style.position="absolute",this.overlaidCanvas.style.webkitTapHighlightColor="transparent",this.overlaidCanvas.style.WebkitUserSelect="none",this.overlaidCanvas.style.MozUserSelect="none",this.overlaidCanvas.style.msUserSelect="none",this.overlaidCanvas.style.userSelect="none",this.overlaidCanvas.getContext&&(this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",r(this.overlaidCanvasCtx)),this._eventManager=new Z(this),this.windowResizeHandler=g(window,"resize",(function(){s._updateSize()&&s.render()}),this.allDOMEventHandlers),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),k(this._toolBar,{position:"absolute",right:"1px",top:"1px"}),this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},g(this.overlaidCanvas,"click",(function(t){s._mouseEventHandler(t)}),this.allDOMEventHandlers),g(this.overlaidCanvas,"mousemove",(function(t){s._mouseEventHandler(t)}),this.allDOMEventHandlers),g(this.overlaidCanvas,"mouseup",(function(t){s._mouseEventHandler(t)}),this.allDOMEventHandlers),g(this.overlaidCanvas,"mousedown",(function(t){s._mouseEventHandler(t),T(s._dropdownMenu)}),this.allDOMEventHandlers),g(this.overlaidCanvas,"mouseout",(function(t){s._mouseEventHandler(t)}),this.allDOMEventHandlers),g(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",(function(t){s._touchEventHandler(t)}),this.allDOMEventHandlers),g(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",(function(t){s._touchEventHandler(t)}),this.allDOMEventHandlers),g(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",(function(t){s._touchEventHandler(t)}),this.allDOMEventHandlers),g(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",(function(t){s._touchEventHandler(t)}),this.allDOMEventHandlers),this.toolTip=new H(this,this.options.toolTip),this.data=null,this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this.sessionVariables={axisX:[],axisX2:[],axisY:[],axisY2:[]})):window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function i(t,e){for(var i,a=[],s=0;s<t.length;s++)if(0==s)a.push(t[0]);else{var n,o,r;n=0===(r=s-1)?0:r-1,o=r===t.length-1?r:r+1,i=Math.abs((t[o].x-t[n].x)/(0===t[o].x-t[r].x?.01:t[o].x-t[r].x))*(e-1)/2+1;var h=(t[o].x-t[n].x)/i;i=(t[o].y-t[n].y)/i,a[a.length]=t[r].x>t[n].x&&0<h||t[r].x<t[n].x&&0>h?{x:t[r].x+h/3,y:t[r].y+i/3}:{x:t[r].x,y:t[r].y+(1===a.length?0:i/9)},n=0===(r=s)?0:r-1,o=r===t.length-1?r:r+1,i=Math.abs((t[o].x-t[n].x)/(0===t[r].x-t[n].x?.01:t[r].x-t[n].x))*(e-1)/2+1,h=(t[o].x-t[n].x)/i,i=(t[o].y-t[n].y)/i,a[a.length]=t[r].x>t[n].x&&0<h||t[r].x<t[n].x&&0>h?{x:t[r].x-h/3,y:t[r].y-i/3}:{x:t[r].x,y:t[r].y-i/9},a[a.length]=t[s]}return a}function n(t,e,i,a,s,n,o,r,h,l){var d=0;l?(o.color=n,r.color=n):l=1,d=h?Math.abs(s-i):Math.abs(a-e),d=0<o.trimLength?Math.abs(d*o.trimLength/100):Math.abs(d-o.length),h?(i+=d/2,s-=d/2):(e+=d/2,a-=d/2);d=1===Math.round(o.thickness)%2?.5:0;var c=1===Math.round(r.thickness)%2?.5:0;t.save(),t.globalAlpha=l,t.strokeStyle=r.color||n,t.lineWidth=r.thickness||2,t.setLineDash&&t.setLineDash(m(r.dashType,r.thickness)),t.beginPath(),h&&0<r.thickness?(t.moveTo(a-o.thickness/2,Math.round((i+s)/2)-c),t.lineTo(e+o.thickness/2,Math.round((i+s)/2)-c)):0<r.thickness&&(t.moveTo(Math.round((e+a)/2)-c,i+o.thickness/2),t.lineTo(Math.round((e+a)/2)-c,s-o.thickness/2)),t.stroke(),t.strokeStyle=o.color||n,t.lineWidth=o.thickness||2,t.setLineDash&&t.setLineDash(m(o.dashType,o.thickness)),t.beginPath(),h&&0<o.thickness?(t.moveTo(a-d,i),t.lineTo(a-d,s),t.moveTo(e+d,i),t.lineTo(e+d,s)):0<o.thickness&&(t.moveTo(e,i+d),t.lineTo(a,i+d),t.moveTo(e,s-d),t.lineTo(a,s-d)),t.stroke(),t.restore()}function d(t,e){d.base.constructor.call(this,"Legend","legend",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.optionsName="legend",this.height=this.width=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},"undefined"===typeof this.options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=x(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function V(t,e,i,a){for(V.base.constructor.call(this,"DataSeries","data",e,i,t),this.chart=t,this.canvas=t.canvas,this._ctx=t.canvas.ctx,this.index=i,this.noDataPointsInPlotArea=0,this.id=a,this.chart._eventManager.objectMap[a]={id:a,objectType:"dataSeries",dataSeriesIndex:i},t=e.dataPoints?e.dataPoints.length:0,this.dataPointEOs=[],e=0;e<t;e++)this.dataPointEOs[e]={};this.dataPointIds=[],this.plotUnit=[],this.axisY=this.axisX=null,this.optionsName="data",this.isOptionsInArray=!0,null===this.fillOpacity&&(this.type.match(/area/i)?this.fillOpacity=.7:this.fillOpacity=1),this.axisPlacement=this.getDefaultAxisPlacement(),"undefined"===typeof this.options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function D(t,e,i,a,s,n){if(D.base.constructor.call(this,"Axis",e,i,a,t),this.chart=t,this.canvas=t.canvas,this.ctx=t.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this.dataSeries=[],this._stripLineLabels=this._ticks=this._labels=null,this.dataInfo={min:1/0,max:-1/0,viewPortMin:1/0,viewPortMax:-1/0,minDiff:1/0},this.isOptionsInArray=!0,"axisX"===s?("left"===n||"bottom"===n?(this.optionsName="axisX",c(this.chart.sessionVariables.axisX[a])&&(this.chart.sessionVariables.axisX[a]={}),this.sessionVariables=this.chart.sessionVariables.axisX[a]):(this.optionsName="axisX2",c(this.chart.sessionVariables.axisX2[a])&&(this.chart.sessionVariables.axisX2[a]={}),this.sessionVariables=this.chart.sessionVariables.axisX2[a]),this.options.interval||(this.intervalType=null)):"left"===n||"bottom"===n?(this.optionsName="axisY",c(this.chart.sessionVariables.axisY[a])&&(this.chart.sessionVariables.axisY[a]={}),this.sessionVariables=this.chart.sessionVariables.axisY[a]):(this.optionsName="axisY2",c(this.chart.sessionVariables.axisY2[a])&&(this.chart.sessionVariables.axisY2[a]={}),this.sessionVariables=this.chart.sessionVariables.axisY2[a]),"undefined"===typeof this.options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),"undefined"===typeof this.options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=s,"axisX"!==s||i&&"undefined"!==typeof i.gridThickness||(this.gridThickness=0),this._position=n,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this.options.scaleBreaks&&(this.scaleBreaks=new W(this.chart,this.options.scaleBreaks,++this.chart._eventManager.lastObjectId,this)),this.stripLines=[],this.options.stripLines&&0<this.options.stripLines.length)for(t=0;t<this.options.stripLines.length;t++)this.stripLines.push(new X(this.chart,this.options.stripLines[t],t,++this.chart._eventManager.lastObjectId,this));this.options.crosshair&&(this.crosshair=new N(this.chart,this.options.crosshair,this)),this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&null===this.viewportMinimum&&(this.options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||null===this.sessionVariables.newViewportMinimum?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&null===this.viewportMaximum&&(this.options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||null===this.sessionVariables.newViewportMaximum?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,null!==this.minimum&&null!==this.viewportMinimum&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),null!==this.maximum&&null!==this.viewportMaximum&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function W(t,e,i,a){if(W.base.constructor.call(this,"ScaleBreaks","scaleBreaks",e,null,a),this.id=i,this.chart=t,this.ctx=this.chart.ctx,this.axis=a,this.optionsName="scaleBreaks",this.isOptionsInArray=!1,this._appliedBreaks=[],this.customBreaks=[],this.autoBreaks=[],"string"===typeof this.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?8:(10<this.spacing?10:this.spacing)+"%"):"number"!==typeof this.spacing&&(this.spacing=8),this.autoCalculate&&(this.maxNumberOfAutoBreaks=Math.min(this.maxNumberOfAutoBreaks,5)),this.options.customBreaks&&0<this.options.customBreaks.length){for(t=0;t<this.options.customBreaks.length;t++)this.customBreaks.push(new E(this.chart,"customBreaks",this.options.customBreaks[t],t,++this.chart._eventManager.lastObjectId,this)),"number"===typeof this.customBreaks[t].startValue&&"number"===typeof this.customBreaks[t].endValue&&this.customBreaks[t].endValue!==this.customBreaks[t].startValue&&this._appliedBreaks.push(this.customBreaks[t]);for(this._appliedBreaks.sort((function(t,e){return t.startValue-e.startValue})),t=0;t<this._appliedBreaks.length-1;t++)this._appliedBreaks[t].endValue>=this._appliedBreaks[t+1].startValue&&(this._appliedBreaks[t].endValue=Math.max(this._appliedBreaks[t].endValue,this._appliedBreaks[t+1].endValue),window.console&&window.console.log("CanvasJS Error: Breaks "+t+" and "+(t+1)+" are overlapping."),this._appliedBreaks.splice(t,2),t--)}}function E(t,e,i,a,s,n){E.base.constructor.call(this,"Break",e,i,a,n),this.id=s,this.chart=t,this.ctx=this.chart.ctx,this.scaleBreaks=n,this.optionsName=e,this.isOptionsInArray=!0,this.type=i.type?this.type:n.type,this.fillOpacity=c(i.fillOpacity)?n.fillOpacity:this.fillOpacity,this.lineThickness=c(i.lineThickness)?n.lineThickness:this.lineThickness,this.color=i.color?this.color:n.color,this.lineColor=i.lineColor?this.lineColor:n.lineColor,this.lineDashType=i.lineDashType?this.lineDashType:n.lineDashType,!c(this.startValue)&&this.startValue.getTime&&(this.startValue=this.startValue.getTime()),!c(this.endValue)&&this.endValue.getTime&&(this.endValue=this.endValue.getTime()),"number"===typeof this.startValue&&"number"===typeof this.endValue&&this.endValue<this.startValue&&(t=this.startValue,this.startValue=this.endValue,this.endValue=t),this.spacing="undefined"===typeof i.spacing?n.spacing:i.spacing,"string"===typeof this.options.spacing?(this.spacing=parseFloat(this.spacing),this.spacing=isNaN(this.spacing)?0:(10<this.spacing?10:this.spacing)+"%"):"number"!==typeof this.options.spacing&&(this.spacing=n.spacing),this.size=n.parent.logarithmic?1:0}function X(t,e,i,a,s){X.base.constructor.call(this,"StripLine","stripLines",e,i,s),this.id=a,this.chart=t,this.ctx=this.chart.ctx,this.label=this.label,this.axis=s,this.optionsName="stripLines",this.isOptionsInArray=!0,this._thicknessType="pixel",null!==this.startValue&&null!==this.endValue&&(this.value=s.logarithmic?Math.sqrt((this.startValue.getTime?this.startValue.getTime():this.startValue)*(this.endValue.getTime?this.endValue.getTime():this.endValue)):((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this._thicknessType=null)}function N(t,e,i){N.base.constructor.call(this,"Crosshair","crosshair",e,null,i),this.chart=t,this.ctx=this.chart.ctx,this.axis=i,this.optionsName="crosshair",this._thicknessType="pixel"}function H(t,e){H.base.constructor.call(this,"ToolTip","toolTip",e,null,t),this.chart=t,this.canvas=t.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,this.containerTransitionDuration=.1,this.mozContainerTransition=this.getContainerTransition(this.containerTransitionDuration),this.optionsName="toolTip",this._initialize()}function Z(t){this.chart=t,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=_(this.chart.width,this.chart.height,!0),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function j(t){this.chart=t,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}a(e,C),e.prototype.destroy=function(){var t=this.allDOMEventHandlers;this._animator&&this._animator.cancelAllAnimations(),this._panTimerId&&clearTimeout(this._panTimerId);for(var e=0;e<t.length;e++){var i=t[e][0],a=t[e][1],s=t[e][2],n=(n=t[e][3])||!1;i.removeEventListener?i.removeEventListener(a,s,n):i.detachEvent&&i.detachEvent("on"+a,s)}for(this.allDOMEventHandlers=[],this.removeAllEventListeners();this._canvasJSContainer&&this._canvasJSContainer.hasChildNodes();)this._canvasJSContainer.removeChild(this._canvasJSContainer.lastChild);for(;this.container&&this.container.hasChildNodes();)this.container.removeChild(this.container.lastChild);for(;this._dropdownMenu&&this._dropdownMenu.hasChildNodes();)this._dropdownMenu.removeChild(this._dropdownMenu.lastChild);this.container=this._canvasJSContainer=null,this.toolTip.container=null,this.canvas&&st(this.canvas),this.overlaidCanvas&&st(this.overlaidCanvas),this._preRenderCanvas&&st(this._preRenderCanvas),this._breaksCanvas&&st(this._breaksCanvas),this._eventManager&&this._eventManager.ghostCanvas&&st(this._eventManager.ghostCanvas),this._toolBar=this._dropdownMenu=this._menuButton=this._resetButton=this._zoomButton=null},e.prototype._updateOptions=function(){var t=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.updateOption("colorSet")&&(this.selectedColorSet="undefined"!==typeof U[this.colorSet]?U[this.colorSet]:U.colorSet1),this.updateOption("backgroundColor"),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this._cultureInfo=new z(this.options.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&R,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this.toolbar=new L(this,this.options.toolbar),this.options.zoomEnabled||this.panEnabled){if(this._zoomButton)k(this._zoomButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor}),M(this,this._zoomButton,"zoom");else{var e=!1;T(this._zoomButton=document.createElement("button")),M(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,g(this._zoomButton,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),g(this._zoomButton,"click",(function(){t.zoomEnabled?(t.zoomEnabled=!1,t.panEnabled=!0,M(t,t._zoomButton,"zoom")):(t.zoomEnabled=!0,t.panEnabled=!1,M(t,t._zoomButton,"pan")),t.render()}),this.allDOMEventHandlers),g(this._zoomButton,"mousemove",(function(){e?e=!1:(k(t._zoomButton,{backgroundColor:t.toolbar.itemBackgroundColorOnHover,color:t.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&k(t._zoomButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))}),this.allDOMEventHandlers),g(this._zoomButton,"mouseout",(function(){e||(k(t._zoomButton,{backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&k(t._zoomButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))}),this.allDOMEventHandlers)}this._resetButton?(k(this._resetButton,{borderRight:this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor}),this._resetButton.title=this._cultureInfo.resetText):(e=!1,T(this._resetButton=document.createElement("button")),M(this,this._resetButton,"reset"),this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor,this._toolBar.appendChild(this._resetButton),g(this._resetButton,"touchstart",(function(t){e=!0}),this.allDOMEventHandlers),g(this._resetButton,"click",(function(){if(t.toolTip.hide(),t.toolTip&&t.toolTip.enabled&&t.toolTip.dispatchEvent("hidden",{chart:t,toolTip:t.toolTip},t.toolTip),t.zoomEnabled||t.panEnabled?(t.zoomEnabled=!0,t.panEnabled=!1,M(t,t._zoomButton,"pan"),t._defaultCursor="default",t.overlaidCanvas.style.cursor=t._defaultCursor):(t.zoomEnabled=!1,t.panEnabled=!1),t.sessionVariables.axisX)for(var e=0;e<t.sessionVariables.axisX.length;e++)t.sessionVariables.axisX[e].newViewportMinimum=null,t.sessionVariables.axisX[e].newViewportMaximum=null;if(t.sessionVariables.axisX2)for(e=0;e<t.sessionVariables.axisX2.length;e++)t.sessionVariables.axisX2[e].newViewportMinimum=null,t.sessionVariables.axisX2[e].newViewportMaximum=null;if(t.sessionVariables.axisY)for(e=0;e<t.sessionVariables.axisY.length;e++)t.sessionVariables.axisY[e].newViewportMinimum=null,t.sessionVariables.axisY[e].newViewportMaximum=null;if(t.sessionVariables.axisY2)for(e=0;e<t.sessionVariables.axisY2.length;e++)t.sessionVariables.axisY2[e].newViewportMinimum=null,t.sessionVariables.axisY2[e].newViewportMaximum=null;t.resetOverlayedCanvas(),0>=navigator.userAgent.search("MSIE")&&k(t._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}),T(t._zoomButton,t._resetButton),t.stockChart&&(t.stockChart._rangeEventParameter={stockChart:t.stockChart,source:"chart",index:t.stockChart.charts.indexOf(t),minimum:null,maximum:null}),t._dispatchRangeEvent("rangeChanging","reset"),t.stockChart&&(t.stockChart._rangeEventParameter.type="rangeChanging",t.stockChart.dispatchEvent("rangeChanging",t.stockChart._rangeEventParameter,t.stockChart)),t.render(),t.syncCharts&&t.syncCharts(null,null),t._dispatchRangeEvent("rangeChanged","reset"),t.stockChart&&(t.stockChart._rangeEventParameter.type="rangeChanged",t.stockChart.dispatchEvent("rangeChanged",t.stockChart._rangeEventParameter,t.stockChart))}),this.allDOMEventHandlers),g(this._resetButton,"mousemove",(function(){e||(k(t._resetButton,{backgroundColor:t.toolbar.itemBackgroundColorOnHover,color:t.toolbar.fontColorOnHover,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&k(t._resetButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))}),this.allDOMEventHandlers),g(this._resetButton,"mouseout",(function(){e||(k(t._resetButton,{backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor,transition:"0.4s",WebkitTransition:"0.4s"}),0>=navigator.userAgent.search("MSIE")&&k(t._resetButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))}),this.allDOMEventHandlers),this.overlaidCanvas.style.cursor=t._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(t._zoomButton.getAttribute("state")===t._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),w(t._zoomButton,t._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))}else this.panEnabled=this.zoomEnabled=!1;for(var i in function(t){if(t._menuButton)t.exportEnabled?(k(t._menuButton,{backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor}),w(t._menuButton),M(t,t._menuButton,"menu")):T(t._menuButton);else if(t.exportEnabled&&R){var e=!1;t._menuButton=document.createElement("button"),M(t,t._menuButton,"menu"),t._toolBar.appendChild(t._menuButton),g(t._menuButton,"touchstart",(function(t){e=!0}),t.allDOMEventHandlers),g(t._menuButton,"click",(function(){"none"!==t._dropdownMenu.style.display||t._dropDownCloseTime&&500>=(new Date).getTime()-t._dropDownCloseTime.getTime()||(t._dropdownMenu.style.display="block",t._menuButton.blur(),t._dropdownMenu.focus())}),t.allDOMEventHandlers,!0),g(t._menuButton,"mousemove",(function(){e||(k(t._menuButton,{backgroundColor:t.toolbar.itemBackgroundColorOnHover,color:t.toolbar.fontColorOnHover}),0>=navigator.userAgent.search("MSIE")&&k(t._menuButton.childNodes[0],{WebkitFilter:"invert(100%)",filter:"invert(100%)"}))}),t.allDOMEventHandlers,!0),g(t._menuButton,"mouseout",(function(){e||(k(t._menuButton,{backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor}),0>=navigator.userAgent.search("MSIE")&&k(t._menuButton.childNodes[0],{WebkitFilter:"invert(0%)",filter:"invert(0%)"}))}),t.allDOMEventHandlers,!0)}if(t.exportEnabled&&t._dropdownMenu){k(t._dropdownMenu,{backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor});for(var i=t._dropdownMenu.childNodes,a=[t._cultureInfo.printText,t._cultureInfo.saveJPGText,t._cultureInfo.savePNGText],s=0;s<i.length;s++)k(i[s],{backgroundColor:t.toolbar.itemBackgroundColor,color:t.toolbar.fontColor}),i[s].innerHTML=a[s]}else!t._dropdownMenu&&t.exportEnabled&&R&&(e=!1,t._dropdownMenu=document.createElement("div"),t._dropdownMenu.setAttribute("tabindex",-1),i=-1!==t.theme.indexOf("dark")?"black":"#888888",k(t._dropdownMenu,{position:"absolute",zIndex:1,userSelect:"none",MozUserSeelct:"none",WebkitUserSelect:"none",msUserSelect:"none",cursor:"pointer",right:"0px",top:"25px",minWidth:"120px",outline:0,fontSize:"14px",fontFamily:"Arial, Helvetica, sans-serif",padding:"5px 0px 5px 0px",textAlign:"left",lineHeight:"10px",backgroundColor:t.toolbar.itemBackgroundColor,boxShadow:"2px 2px 10px"+i}),t._dropdownMenu.style.display="none",t._toolBar.appendChild(t._dropdownMenu),g(t._dropdownMenu,"blur",(function(){T(t._dropdownMenu),t._dropDownCloseTime=new Date}),t.allDOMEventHandlers,!0),k(i=document.createElement("div"),{padding:"12px 8px 12px 8px"}),i.innerHTML=t._cultureInfo.printText,i.style.backgroundColor=t.toolbar.itemBackgroundColor,i.style.color=t.toolbar.fontColor,t._dropdownMenu.appendChild(i),g(i,"touchstart",(function(t){e=!0}),t.allDOMEventHandlers),g(i,"mousemove",(function(){e||(this.style.backgroundColor=t.toolbar.itemBackgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)}),t.allDOMEventHandlers,!0),g(i,"mouseout",(function(){e||(this.style.backgroundColor=t.toolbar.itemBackgroundColor,this.style.color=t.toolbar.fontColor)}),t.allDOMEventHandlers,!0),g(i,"click",(function(){t.print(),T(t._dropdownMenu)}),t.allDOMEventHandlers,!0),k(i=document.createElement("div"),{padding:"12px 8px 12px 8px"}),i.innerHTML=t._cultureInfo.saveJPGText,i.style.backgroundColor=t.toolbar.itemBackgroundColor,i.style.color=t.toolbar.fontColor,t._dropdownMenu.appendChild(i),g(i,"touchstart",(function(t){e=!0}),t.allDOMEventHandlers),g(i,"mousemove",(function(){e||(this.style.backgroundColor=t.toolbar.itemBackgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)}),t.allDOMEventHandlers,!0),g(i,"mouseout",(function(){e||(this.style.backgroundColor=t.toolbar.itemBackgroundColor,this.style.color=t.toolbar.fontColor)}),t.allDOMEventHandlers,!0),g(i,"click",(function(){t.exportChart({format:"jpeg",fileName:t.exportFileName}),T(t._dropdownMenu)}),t.allDOMEventHandlers,!0),k(i=document.createElement("div"),{padding:"12px 8px 12px 8px"}),i.innerHTML=t._cultureInfo.savePNGText,i.style.backgroundColor=t.toolbar.itemBackgroundColor,i.style.color=t.toolbar.fontColor,t._dropdownMenu.appendChild(i),g(i,"touchstart",(function(t){e=!0}),t.allDOMEventHandlers),g(i,"mousemove",(function(){e||(this.style.backgroundColor=t.toolbar.itemBackgroundColorOnHover,this.style.color=t.toolbar.fontColorOnHover)}),t.allDOMEventHandlers,!0),g(i,"mouseout",(function(){e||(this.style.backgroundColor=t.toolbar.itemBackgroundColor,this.style.color=t.toolbar.fontColor)}),t.allDOMEventHandlers,!0),g(i,"click",(function(){t.exportChart({format:"png",fileName:t.exportFileName}),T(t._dropdownMenu)}),t.allDOMEventHandlers,!0))}(this),"none"!==this._toolBar.style.display&&this._zoomButton&&(this.panEnabled?M(t,t._zoomButton,"zoom"):M(t,t._zoomButton,"pan"),t._resetButton.getAttribute("state")!==t._cultureInfo.resetText&&M(t,t._resetButton,"reset")),this.options.toolTip&&this.toolTip.options!==this.options.toolTip&&(this.toolTip.options=this.options.toolTip),this.toolTip.options)this.toolTip.options.hasOwnProperty(i)&&this.toolTip.updateOption(i)},e.prototype._updateSize=function(){var t;t=[this.canvas,this.overlaidCanvas,this._eventManager.ghostCanvas];var e=0,i=0;if(this.options.width?e=this.width:this.width=e=0<this.container.clientWidth?this.container.clientWidth:this.width,this.options.height?i=this.height:this.height=i=0<this.container.clientHeight?this.container.clientHeight:this.height,this.canvas.width!==e*pt||this.canvas.height!==i*pt){for(var a=0;a<t.length;a++)b(t[a],e,i);this.bounds={x1:0,y1:0,x2:this.width,y2:this.height,width:this.width,height:this.height},t=!0}else t=!1;return t},e.prototype._initialize=function(){this.isNavigator=!c(this.parent)&&!c(this.parent._defaultsKey)&&"Navigator"===this.parent._defaultsKey,this._animator?this._animator.cancelAllAnimations():this._animator=new j(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.funnelPyramidClickHandler=this.pieDoughnutClickHandler=null,this._updateOptions(),this.animatedRender=R&&this.animationEnabled&&0===this.renderCount,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisX=[],this.axisX2=[],this.axisY=[],this.axisY2=[],this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,plotTypes:[]},this.layoutManager=new S(0,0,this.width,this.height,this.isNavigator?0:2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[],this.title=null,this.subtitles=[];var i=0,a=null;if(this.options.data){for(var s=0;s<this.options.data.length;s++)if(i++,!this.options.data[s].type||0<=e._supportedChartTypes.indexOf(this.options.data[s].type)){var n=new V(this,this.options.data[s],i-1,++this._eventManager.lastObjectId);"error"===n.type&&(n.linkedDataSeriesIndex=c(this.options.data[s].linkedDataSeriesIndex)?s-1:this.options.data[s].linkedDataSeriesIndex,0>n.linkedDataSeriesIndex||n.linkedDataSeriesIndex>=this.options.data.length||"number"!==typeof n.linkedDataSeriesIndex||"error"===this.options.data[n.linkedDataSeriesIndex].type)&&(n.linkedDataSeriesIndex=null),null===n.name&&(n.name="DataSeries "+i),null===n.color?1<this.options.data.length?(n._colorSet=[this.selectedColorSet[n.index%this.selectedColorSet.length]],n.color=this.selectedColorSet[n.index%this.selectedColorSet.length]):n._colorSet="line"===n.type||"stepLine"===n.type||"spline"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type||"rangeArea"===n.type||"rangeSplineArea"===n.type||"candlestick"===n.type||"ohlc"===n.type||"waterfall"===n.type||"boxAndWhisker"===n.type?[this.selectedColorSet[0]]:this.selectedColorSet:n._colorSet=[n.color],null===n.markerSize&&(("line"===n.type||"stepLine"===n.type||"spline"===n.type||0<=n.type.toLowerCase().indexOf("area"))&&n.dataPoints&&n.dataPoints.length<this.width/16||"scatter"===n.type)&&(n.markerSize=8),"bubble"!==n.type&&"scatter"!==n.type||!n.dataPoints||(n.dataPoints.some?n.dataPoints.some((function(t){return t.x}))&&n.dataPoints.sort(t):n.dataPoints.sort(t)),this.data.push(n);var o,r=n.axisPlacement;a=a||r;if("normal"===r?"xySwapped"===this.plotInfo.axisPlacement?o='You cannot combine "'+n.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?o='You cannot combine "'+n.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===r?"normal"===this.plotInfo.axisPlacement?o='You cannot combine "'+n.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?o='You cannot combine "'+n.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"===r?"normal"===this.plotInfo.axisPlacement?o='You cannot combine "'+n.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?o='You cannot combine "'+n.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none"):null===r&&"none"===this.plotInfo.axisPlacement&&(o='You cannot combine "'+n.type+'" with pie chart'),o&&window.console)return void window.console.log(o)}for(s=0;s<this.data.length;s++){if("none"==a&&"error"===this.data[s].type&&window.console)return void window.console.log('You cannot combine "'+n.type+'" with error chart');"error"===this.data[s].type&&(this.data[s].axisPlacement=this.plotInfo.axisPlacement=a||"normal",this.data[s]._linkedSeries=null===this.data[s].linkedDataSeriesIndex?null:this.data[this.data[s].linkedDataSeriesIndex])}}this._objectsInitialized=!0,this._plotAreaElements=[]},e._supportedChartTypes=p("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc boxAndWhisker rangeColumn error rangeBar rangeArea rangeSplineArea pie doughnut funnel pyramid waterfall".split(" ")),e.prototype.setLayout=function(){for(var t=this._plotAreaElements,e=0;e<this.data.length;e++)if("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement){if(!this.data[e].axisYType||"primary"===this.data[e].axisYType)if(this.options.axisY&&0<this.options.axisY.length){if(!this.axisY.length)for(var i=0;i<this.options.axisY.length;i++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[i]=new D(this,"axisY",this.options.axisY[i],i,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[i]=new D(this,"axisY",this.options.axisY[i],i,"axisY","bottom"));this.data[e].axisY=this.axisY[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY.length?this.data[e].axisYIndex:0],this.axisY[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY.length?this.data[e].axisYIndex:0].dataSeries.push(this.data[e])}else this.axisY.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY[0]=new D(this,"axisY",this.options.axisY,0,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY[0]=new D(this,"axisY",this.options.axisY,0,"axisY","bottom"))),this.data[e].axisY=this.axisY[0],this.axisY[0].dataSeries.push(this.data[e]);if("secondary"===this.data[e].axisYType)if(this.options.axisY2&&0<this.options.axisY2.length){if(!this.axisY2.length)for(i=0;i<this.options.axisY2.length;i++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[i]=new D(this,"axisY2",this.options.axisY2[i],i,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[i]=new D(this,"axisY2",this.options.axisY2[i],i,"axisY","top"));this.data[e].axisY=this.axisY2[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY2.length?this.data[e].axisYIndex:0],this.axisY2[0<=this.data[e].axisYIndex&&this.data[e].axisYIndex<this.axisY2.length?this.data[e].axisYIndex:0].dataSeries.push(this.data[e])}else this.axisY2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2[0]=new D(this,"axisY2",this.options.axisY2,0,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2[0]=new D(this,"axisY2",this.options.axisY2,0,"axisY","top"))),this.data[e].axisY=this.axisY2[0],this.axisY2[0].dataSeries.push(this.data[e]);if(!this.data[e].axisXType||"primary"===this.data[e].axisXType)if(this.options.axisX&&0<this.options.axisX.length){if(!this.axisX.length)for(i=0;i<this.options.axisX.length;i++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[i]=new D(this,"axisX",this.options.axisX[i],i,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[i]=new D(this,"axisX",this.options.axisX[i],i,"axisX","left"));this.data[e].axisX=this.axisX[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX.length?this.data[e].axisXIndex:0],this.axisX[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX.length?this.data[e].axisXIndex:0].dataSeries.push(this.data[e])}else this.axisX.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX[0]=new D(this,"axisX",this.options.axisX,0,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX[0]=new D(this,"axisX",this.options.axisX,0,"axisX","left"))),this.data[e].axisX=this.axisX[0],this.axisX[0].dataSeries.push(this.data[e]);if("secondary"===this.data[e].axisXType)if(this.options.axisX2&&0<this.options.axisX2.length){if(!this.axisX2.length)for(i=0;i<this.options.axisX2.length;i++)"normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[i]=new D(this,"axisX2",this.options.axisX2[i],i,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[i]=new D(this,"axisX2",this.options.axisX2[i],i,"axisX","right"));this.data[e].axisX=this.axisX2[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX2.length?this.data[e].axisXIndex:0],this.axisX2[0<=this.data[e].axisXIndex&&this.data[e].axisXIndex<this.axisX2.length?this.data[e].axisXIndex:0].dataSeries.push(this.data[e])}else this.axisX2.length||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX2[0]=new D(this,"axisX2",this.options.axisX2,0,"axisX","top")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX2[0]=new D(this,"axisX2",this.options.axisX2,0,"axisX","right"))),this.data[e].axisX=this.axisX2[0],this.axisX2[0].dataSeries.push(this.data[e])}if(this.axisY){for(i=1;i<this.axisY.length;i++)"undefined"===typeof this.axisY[i].options.gridThickness&&(this.axisY[i].gridThickness=0);for(i=0;i<this.axisY.length-1;i++)"undefined"===typeof this.axisY[i].options.margin&&(this.axisY[i].margin=10)}if(this.axisY2){for(i=1;i<this.axisY2.length;i++)"undefined"===typeof this.axisY2[i].options.gridThickness&&(this.axisY2[i].gridThickness=0);for(i=0;i<this.axisY2.length-1;i++)"undefined"===typeof this.axisY2[i].options.margin&&(this.axisY2[i].margin=10)}if(this.axisY&&0<this.axisY.length&&this.axisY2&&0<this.axisY2.length&&(0<this.axisY[0].gridThickness&&"undefined"===typeof this.axisY2[0].options.gridThickness?this.axisY2[0].gridThickness=0:0<this.axisY2[0].gridThickness&&"undefined"===typeof this.axisY[0].options.gridThickness&&(this.axisY[0].gridThickness=0)),this.axisX)for(i=0;i<this.axisX.length;i++)"undefined"===typeof this.axisX[i].options.gridThickness&&(this.axisX[i].gridThickness=0);if(this.axisX2)for(i=0;i<this.axisX2.length;i++)"undefined"===typeof this.axisX2[i].options.gridThickness&&(this.axisX2[i].gridThickness=0);if(this.axisX&&0<this.axisX.length&&this.axisX2&&0<this.axisX2.length&&(0<this.axisX[0].gridThickness&&"undefined"===typeof this.axisX2[0].options.gridThickness?this.axisX2[0].gridThickness=0:0<this.axisX2[0].gridThickness&&"undefined"===typeof this.axisX[0].options.gridThickness&&(this.axisX[0].gridThickness=0)),i=!1,0<this._axes.length&&this.options.zoomEnabled&&(this.zoomEnabled||this.panEnabled))for(e=0;e<this._axes.length;e++)if(!c(this._axes[e].viewportMinimum)||!c(this._axes[e].viewportMaximum)){i=!0;break}if(i?(w(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._zoomButton.style.borderRight=this.toolbar.buttonBorderThickness+"px solid "+this.toolbar.buttonBorderColor,this._resetButton.style.borderRight=(this.exportEnabled?this.toolbar.buttonBorderThickness:0)+"px solid "+this.toolbar.buttonBorderColor):(T(this._zoomButton,this._resetButton),this._toolBar.style.border=this.toolbar.buttonBorderThickness+"px solid transparent",this.options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),u(this),this._processData(),this.options.title&&(this.title=new B(this,this.options.title),this.title.dockInsidePlotArea?t.push(this.title):this.title.setLayout()),this.options.subtitles)for(e=0;e<this.options.subtitles.length;e++)i=new F(this,this.options.subtitles[e],e),this.subtitles.push(i),i.dockInsidePlotArea?t.push(i):i.setLayout();for(this.legend=new d(this,this.options.legend),e=0;e<this.data.length;e++)(this.data[e].showInLegend||"pie"===this.data[e].type||"doughnut"===this.data[e].type||"funnel"===this.data[e].type||"pyramid"===this.data[e].type)&&this.legend.dataSeries.push(this.data[e]);for(this.legend.dockInsidePlotArea?t.push(this.legend):this.legend.setLayout(),e=0;e<this._axes.length;e++)if(this._axes[e].scaleBreaks&&this._axes[e].scaleBreaks._appliedBreaks.length){R?(this._breaksCanvas=_(this.width,this.height,!0),this._breaksCanvasCtx=this._breaksCanvas.getContext("2d")):(this._breaksCanvas=this.canvas,this._breaksCanvasCtx=this.ctx);break}this._preRenderCanvas=_(this.width,this.height),this._preRenderCtx=this._preRenderCanvas.getContext("2d"),"normal"!==this.plotInfo.axisPlacement&&"xySwapped"!==this.plotInfo.axisPlacement||D.setLayout(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace())},e.prototype.renderElements=function(){if(this.height){var t=this._plotAreaElements;this.title&&!this.title.dockInsidePlotArea&&this.title.render();for(var e=0;e<this.subtitles.length;e++)this.subtitles[e].dockInsidePlotArea||this.subtitles[e].render();if(this.legend.dockInsidePlotArea||this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)D.render(this.axisX,this.axisX2,this.axisY,this.axisY2,this.plotInfo.axisPlacement);else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(e=0;e<t.length;e++)t[e].setLayout(),t[e].render();var i=[];if(this.animatedRender){var a=_(this.width,this.height);a.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}v(this);var s;t=this.ctx.miterLimit;for(this.ctx.miterLimit=3,R&&this._breaksCanvas&&(this._preRenderCtx.drawImage(this.canvas,0,0,this.width,this.height),this._preRenderCtx.drawImage(this._breaksCanvas,0,0,this.width,this.height),this._breaksCanvasCtx.globalCompositeOperation="source-atop",this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),this._preRenderCtx.clearRect(0,0,this.width,this.height)),e=0;e<this.plotInfo.plotTypes.length;e++)for(var n=this.plotInfo.plotTypes[e],o=0;o<n.plotUnits.length;o++){var r=n.plotUnits[o],h=null;r.targetCanvas&&st(r.targetCanvas),r.targetCanvas=null,this.animatedRender&&(r.targetCanvas=_(this.width,this.height),r.targetCanvasCtx=r.targetCanvas.getContext("2d"),s=r.targetCanvasCtx.miterLimit,r.targetCanvasCtx.miterLimit=3),"line"===r.type?h=this.renderLine(r):"stepLine"===r.type?h=this.renderStepLine(r):"spline"===r.type?h=this.renderSpline(r):"column"===r.type?h=this.renderColumn(r):"bar"===r.type?h=this.renderBar(r):"area"===r.type?h=this.renderArea(r):"stepArea"===r.type?h=this.renderStepArea(r):"splineArea"===r.type?h=this.renderSplineArea(r):"stackedColumn"===r.type?h=this.renderStackedColumn(r):"stackedColumn100"===r.type?h=this.renderStackedColumn100(r):"stackedBar"===r.type?h=this.renderStackedBar(r):"stackedBar100"===r.type?h=this.renderStackedBar100(r):"stackedArea"===r.type?h=this.renderStackedArea(r):"stackedArea100"===r.type?h=this.renderStackedArea100(r):"bubble"===r.type?h=h=this.renderBubble(r):"scatter"===r.type?h=this.renderScatter(r):"pie"===r.type||"doughnut"===r.type?this.renderPie(r):"funnel"===r.type||"pyramid"===r.type?h=this.renderFunnel(r):"candlestick"===r.type||"ohlc"===r.type?h=this.renderCandlestick(r):"rangeColumn"===r.type?h=this.renderRangeColumn(r):"error"===r.type?h=this.renderError(r):"rangeBar"===r.type?h=this.renderRangeBar(r):"rangeArea"===r.type?h=this.renderRangeArea(r):"rangeSplineArea"===r.type?h=this.renderRangeSplineArea(r):"waterfall"===r.type?h=this.renderWaterfall(r):"boxAndWhisker"===r.type&&(h=this.renderBoxAndWhisker(r));for(var l=0;l<r.dataSeriesIndexes.length;l++)this._dataInRenderedOrder.push(this.data[r.dataSeriesIndexes[l]]);this.animatedRender&&(r.targetCanvasCtx.miterLimit=s,h&&i.push(h))}this.ctx.miterLimit=t,this.animatedRender&&this._breaksCanvasCtx&&i.push({source:this._breaksCanvasCtx,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0,startTimePercent:.7}),this.animatedRender&&0<this._indexLabels.length&&(s=_(this.width,this.height).getContext("2d"),i.push(this.renderIndexLabels(s)));var d=this;if(0<i.length)d.disableToolTip=!0,d._animator.animate(200,d.animationDuration,(function(t){d.ctx.clearRect(0,0,d.width,d.height),d.ctx.drawImage(a,0,0,Math.floor(d.width*pt),Math.floor(d.height*pt),0,0,d.width,d.height);for(var e=0;e<i.length;e++)h=i[e],1>t&&"undefined"!==typeof h.startTimePercent?t>=h.startTimePercent&&h.animationCallback(h.easingFunction(t-h.startTimePercent,0,1,1-h.startTimePercent),h):h.animationCallback(h.easingFunction(t,0,1,1),h);d.dispatchEvent("dataAnimationIterationEnd",{chart:d})}),(function(){i=[];for(var t=0;t<d.plotInfo.plotTypes.length;t++)for(var e=d.plotInfo.plotTypes[t],s=0;s<e.plotUnits.length;s++){var n=e.plotUnits[s];n.targetCanvas&&st(n.targetCanvas),n.targetCanvas=null}a=null,d.disableToolTip=!1,d.dispatchEvent("dataAnimationEnd",{chart:d})}));else{if(d._breaksCanvas)if(R)d.plotArea.ctx.drawImage(d._breaksCanvas,0,0,this.width,this.height);else for(l=0;l<d._axes.length;l++)d._axes[l].createMask();0<d._indexLabels.length&&d.renderIndexLabels(),d.dispatchEvent("dataAnimationIterationEnd",{chart:d}),d.dispatchEvent("dataAnimationEnd",{chart:d})}for(this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||"none"===this._zoomButton.style.display||T(this._zoomButton,this._resetButton),this.toolTip._updateToolTip(),this.renderCount++,O&&(d=this,setTimeout((function(){var t=document.getElementById("ghostCanvasCopy");t&&(b(t,d.width,d.height),t.getContext("2d").drawImage(d._eventManager.ghostCanvas,0,0))}),2e3)),this._breaksCanvas&&(delete this._breaksCanvas,delete this._breaksCanvasCtx),l=0;l<this._axes.length;l++)this._axes[l].maskCanvas&&(delete this._axes[l].maskCanvas,delete this._axes[l].maskCtx)}},e.prototype.render=function(t){t&&(this.options=t),this._initialize(),this.setLayout(),this.renderElements(),this._preRenderCanvas&&st(this._preRenderCanvas)},e.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},e.prototype.categoriseDataSeries=function(){for(var t="",i=0;i<this.data.length;i++)if((t=this.data[i]).dataPoints&&0!==t.dataPoints.length&&t.visible&&0<=e._supportedChartTypes.indexOf(t.type)){for(var a=null,s=!1,n=null,o=!1,r=0;r<this.plotInfo.plotTypes.length;r++)if(this.plotInfo.plotTypes[r].type===t.type){s=!0,a=this.plotInfo.plotTypes[r];break}for(s||(a={type:t.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(a)),r=0;r<a.plotUnits.length;r++)if(a.plotUnits[r].axisYType===t.axisYType&&a.plotUnits[r].axisXType===t.axisXType&&a.plotUnits[r].axisYIndex===t.axisYIndex&&a.plotUnits[r].axisXIndex===t.axisXIndex){o=!0,n=a.plotUnits[r];break}o||(n={type:t.type,previousDataSeriesCount:0,index:a.plotUnits.length,plotType:a,axisXType:t.axisXType,axisYType:t.axisYType,axisYIndex:t.axisYIndex,axisXIndex:t.axisXIndex,axisY:"primary"===t.axisYType?this.axisY[0<=t.axisYIndex&&t.axisYIndex<this.axisY.length?t.axisYIndex:0]:this.axisY2[0<=t.axisYIndex&&t.axisYIndex<this.axisY2.length?t.axisYIndex:0],axisX:"primary"===t.axisXType?this.axisX[0<=t.axisXIndex&&t.axisXIndex<this.axisX.length?t.axisXIndex:0]:this.axisX2[0<=t.axisXIndex&&t.axisXIndex<this.axisX2.length?t.axisXIndex:0],dataSeriesIndexes:[],yTotals:[],yAbsTotals:[]},a.plotUnits.push(n)),a.totalDataSeries++,n.dataSeriesIndexes.push(i),t.plotUnit=n}for(i=0;i<this.plotInfo.plotTypes.length;i++)for(a=this.plotInfo.plotTypes[i],r=t=0;r<a.plotUnits.length;r++)a.plotUnits[r].previousDataSeriesCount=t,t+=a.plotUnits[r].dataSeriesIndexes.length},e.prototype.assignIdToDataPoints=function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];if(e.dataPoints)for(var i=e.dataPoints.length,a=0;a<i;a++)e.dataPointIds[a]=++this._eventManager.lastObjectId}},e.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var t=0;t<this.plotInfo.plotTypes.length;t++)for(var e=this.plotInfo.plotTypes[t],i=0;i<e.plotUnits.length;i++){var a=e.plotUnits[i];"line"===a.type||"stepLine"===a.type||"spline"===a.type||"column"===a.type||"area"===a.type||"stepArea"===a.type||"splineArea"===a.type||"bar"===a.type||"bubble"===a.type||"scatter"===a.type?this._processMultiseriesPlotUnit(a):"stackedColumn"===a.type||"stackedBar"===a.type||"stackedArea"===a.type?this._processStackedPlotUnit(a):"stackedColumn100"===a.type||"stackedBar100"===a.type||"stackedArea100"===a.type?this._processStacked100PlotUnit(a):"candlestick"===a.type||"ohlc"===a.type||"rangeColumn"===a.type||"rangeBar"===a.type||"rangeArea"===a.type||"rangeSplineArea"===a.type||"error"===a.type||"boxAndWhisker"===a.type?this._processMultiYPlotUnit(a):"waterfall"===a.type&&this._processSpecificPlotUnit(a)}this.calculateAutoBreaks()},e.prototype._processMultiseriesPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,i,a=t.axisY.dataInfo,s=t.axisX.dataInfo,n=!1,o=0;o<t.dataSeriesIndexes.length;o++){var r,h=this.data[t.dataSeriesIndexes[o]],l=0,d=!1,c=!1;if("normal"===h.axisPlacement||"xySwapped"===h.axisPlacement)var p=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:t.axisX.options&&t.axisX.options.viewportMinimum?t.axisX.options.viewportMinimum:t.axisX.options&&t.axisX.options.minimum?t.axisX.options.minimum:t.axisX.logarithmic?0:-1/0,u=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:t.axisX.options&&t.axisX.options.viewportMaximum?t.axisX.options.viewportMaximum:t.axisX.options&&t.axisX.options.maximum?t.axisX.options.maximum:1/0;for((h.dataPoints[l].x&&h.dataPoints[l].x.getTime||"dateTime"===h.xValueType)&&(n=!0),l=0;l<h.dataPoints.length;l++){if("undefined"===typeof h.dataPoints[l].x&&(h.dataPoints[l].x=l+(t.axisX.logarithmic?1:0)),h.dataPoints[l].x.getTime?(n=!0,e=h.dataPoints[l].x.getTime()):e=h.dataPoints[l].x,i=h.dataPoints[l].y,e<s.min&&(s.min=e),e>s.max&&(s.max=e),i<a.min&&"number"===typeof i&&(a.min=i),i>a.max&&"number"===typeof i&&(a.max=i),0<l){if(t.axisX.logarithmic){var x=e/h.dataPoints[l-1].x;1>x&&(x=1/x),s.minDiff>x&&1!==x&&(s.minDiff=x)}else 0>(x=e-h.dataPoints[l-1].x)&&(x*=-1),s.minDiff>x&&0!==x&&(s.minDiff=x);null!==i&&null!==h.dataPoints[l-1].y&&(t.axisY.logarithmic?(1>(x=i/h.dataPoints[l-1].y)&&(x=1/x),a.minDiff>x&&1!==x&&(a.minDiff=x)):(0>(x=i-h.dataPoints[l-1].y)&&(x*=-1),a.minDiff>x&&0!==x&&(a.minDiff=x)))}if(e<p&&!d)null!==i&&(r=e);else{if(!d&&(d=!0,0<l)){l-=2;continue}if(e>u&&!c)c=!0;else if(e>u&&c)continue;h.dataPoints[l].label&&(t.axisX.labels[e]=h.dataPoints[l].label),e<s.viewPortMin&&(s.viewPortMin=e),e>s.viewPortMax&&(s.viewPortMax=e),null===i?s.viewPortMin===e&&r<e&&(s.viewPortMin=r):(i<a.viewPortMin&&"number"===typeof i&&(a.viewPortMin=i),i>a.viewPortMax&&"number"===typeof i&&(a.viewPortMax=i))}}h.axisX.valueType=h.xValueType=n?"dateTime":"number"}},e.prototype._processStackedPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,i,a=t.axisY.dataInfo,s=t.axisX.dataInfo,n=!1,o=[],r=[],h=1/0,l=-1/0,d=0;d<t.dataSeriesIndexes.length;d++){var p,u=this.data[t.dataSeriesIndexes[d]],x=0,m=!1,g=!1;if("normal"===u.axisPlacement||"xySwapped"===u.axisPlacement)var f=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:t.axisX.options&&t.axisX.options.viewportMinimum?t.axisX.options.viewportMinimum:t.axisX.options&&t.axisX.options.minimum?t.axisX.options.minimum:-1/0,y=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:t.axisX.options&&t.axisX.options.viewportMaximum?t.axisX.options.viewportMaximum:t.axisX.options&&t.axisX.options.maximum?t.axisX.options.maximum:1/0;for((u.dataPoints[x].x&&u.dataPoints[x].x.getTime||"dateTime"===u.xValueType)&&(n=!0),x=0;x<u.dataPoints.length;x++){if("undefined"===typeof u.dataPoints[x].x&&(u.dataPoints[x].x=x+(t.axisX.logarithmic?1:0)),u.dataPoints[x].x.getTime?(n=!0,e=u.dataPoints[x].x.getTime()):e=u.dataPoints[x].x,i=c(u.dataPoints[x].y)?0:u.dataPoints[x].y,e<s.min&&(s.min=e),e>s.max&&(s.max=e),0<x){if(t.axisX.logarithmic){var b=e/u.dataPoints[x-1].x;1>b&&(b=1/b),s.minDiff>b&&1!==b&&(s.minDiff=b)}else 0>(b=e-u.dataPoints[x-1].x)&&(b*=-1),s.minDiff>b&&0!==b&&(s.minDiff=b);null!==i&&null!==u.dataPoints[x-1].y&&(t.axisY.logarithmic?0<i&&(1>(b=i/u.dataPoints[x-1].y)&&(b=1/b),a.minDiff>b&&1!==b&&(a.minDiff=b)):(0>(b=i-u.dataPoints[x-1].y)&&(b*=-1),a.minDiff>b&&0!==b&&(a.minDiff=b)))}if(e<f&&!m)null!==u.dataPoints[x].y&&(p=e);else{if(!m&&(m=!0,0<x)){x-=2;continue}if(e>y&&!g)g=!0;else if(e>y&&g)continue;u.dataPoints[x].label&&(t.axisX.labels[e]=u.dataPoints[x].label),e<s.viewPortMin&&(s.viewPortMin=e),e>s.viewPortMax&&(s.viewPortMax=e),null===u.dataPoints[x].y?s.viewPortMin===e&&p<e&&(s.viewPortMin=p):(t.yTotals[e]=(t.yTotals[e]?t.yTotals[e]:0)+i,t.yAbsTotals[e]=(t.yAbsTotals[e]?t.yAbsTotals[e]:0)+Math.abs(i),0<=i?o[e]?o[e]+=i:(o[e]=i,h=Math.min(i,h)):r[e]?r[e]+=i:(r[e]=i,l=Math.max(i,l)))}}t.axisY.scaleBreaks&&t.axisY.scaleBreaks.autoCalculate&&1<=t.axisY.scaleBreaks.maxNumberOfAutoBreaks&&(a.dataPointYPositiveSums?(a.dataPointYPositiveSums.push.apply(a.dataPointYPositiveSums,o),a.dataPointYNegativeSums.push.apply(a.dataPointYPositiveSums,r)):(a.dataPointYPositiveSums=o,a.dataPointYNegativeSums=r)),u.axisX.valueType=u.xValueType=n?"dateTime":"number"}for(x in o)o.hasOwnProperty(x)&&!isNaN(x)&&((t=o[x])<a.min&&(a.min=Math.min(t,h)),t>a.max&&(a.max=t),x<s.viewPortMin||x>s.viewPortMax||(t<a.viewPortMin&&(a.viewPortMin=Math.min(t,h)),t>a.viewPortMax&&(a.viewPortMax=t)));for(x in r)r.hasOwnProperty(x)&&!isNaN(x)&&((t=r[x])<a.min&&(a.min=t),t>a.max&&(a.max=Math.max(t,l)),x<s.viewPortMin||x>s.viewPortMax||(t<a.viewPortMin&&(a.viewPortMin=t),t>a.viewPortMax&&(a.viewPortMax=Math.max(t,l))))}},e.prototype._processStacked100PlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){for(var e,i,a=t.axisY.dataInfo,s=t.axisX.dataInfo,n=!1,o=!1,r=!1,h=[],l=0;l<t.dataSeriesIndexes.length;l++){var d,p=this.data[t.dataSeriesIndexes[l]],u=0,x=!1,m=!1;if("normal"===p.axisPlacement||"xySwapped"===p.axisPlacement)var g=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:t.axisX.options&&t.axisX.options.viewportMinimum?t.axisX.options.viewportMinimum:t.axisX.options&&t.axisX.options.minimum?t.axisX.options.minimum:-1/0,f=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:t.axisX.options&&t.axisX.options.viewportMaximum?t.axisX.options.viewportMaximum:t.axisX.options&&t.axisX.options.maximum?t.axisX.options.maximum:1/0;for((p.dataPoints[u].x&&p.dataPoints[u].x.getTime||"dateTime"===p.xValueType)&&(n=!0),u=0;u<p.dataPoints.length;u++){if("undefined"===typeof p.dataPoints[u].x&&(p.dataPoints[u].x=u+(t.axisX.logarithmic?1:0)),p.dataPoints[u].x.getTime?(n=!0,e=p.dataPoints[u].x.getTime()):e=p.dataPoints[u].x,i=c(p.dataPoints[u].y)?null:p.dataPoints[u].y,e<s.min&&(s.min=e),e>s.max&&(s.max=e),0<u){if(t.axisX.logarithmic){var y=e/p.dataPoints[u-1].x;1>y&&(y=1/y),s.minDiff>y&&1!==y&&(s.minDiff=y)}else 0>(y=e-p.dataPoints[u-1].x)&&(y*=-1),s.minDiff>y&&0!==y&&(s.minDiff=y);c(i)||null===p.dataPoints[u-1].y||(t.axisY.logarithmic?0<i&&(1>(y=i/p.dataPoints[u-1].y)&&(y=1/y),a.minDiff>y&&1!==y&&(a.minDiff=y)):(0>(y=i-p.dataPoints[u-1].y)&&(y*=-1),a.minDiff>y&&0!==y&&(a.minDiff=y)))}if(e<g&&!x)null!==i&&(d=e);else{if(!x&&(x=!0,0<u)){u-=2;continue}if(e>f&&!m)m=!0;else if(e>f&&m)continue;p.dataPoints[u].label&&(t.axisX.labels[e]=p.dataPoints[u].label),e<s.viewPortMin&&(s.viewPortMin=e),e>s.viewPortMax&&(s.viewPortMax=e),null===i?s.viewPortMin===e&&d<e&&(s.viewPortMin=d):(t.yTotals[e]=(t.yTotals[e]?t.yTotals[e]:0)+i,t.yAbsTotals[e]=(t.yAbsTotals[e]?t.yAbsTotals[e]:0)+Math.abs(i),0<=i?o=!0:0>i&&(r=!0),h[e]=h[e]?h[e]+Math.abs(i):Math.abs(i))}}p.axisX.valueType=p.xValueType=n?"dateTime":"number"}t.axisY.logarithmic?(a.max=c(a.viewPortMax)?99*Math.pow(t.axisY.logarithmBase,-.05):Math.max(a.viewPortMax,99*Math.pow(t.axisY.logarithmBase,-.05)),a.min=c(a.viewPortMin)?1:Math.min(a.viewPortMin,1)):o&&!r?(a.max=c(a.viewPortMax)?99:Math.max(a.viewPortMax,99),a.min=c(a.viewPortMin)?1:Math.min(a.viewPortMin,1)):o&&r?(a.max=c(a.viewPortMax)?99:Math.max(a.viewPortMax,99),a.min=c(a.viewPortMin)?-99:Math.min(a.viewPortMin,-99)):!o&&r&&(a.max=c(a.viewPortMax)?-1:Math.max(a.viewPortMax,-1),a.min=c(a.viewPortMin)?-99:Math.min(a.viewPortMin,-99)),a.viewPortMin=a.min,a.viewPortMax=a.max,t.dataPointYSums=h}},e.prototype._processMultiYPlotUnit=function(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,i,a,s,n=t.axisY.dataInfo,o=t.axisX.dataInfo,r=!1,h=0;h<t.dataSeriesIndexes.length;h++){var l,d,c,p=this.data[t.dataSeriesIndexes[h]],u=0,x=!1,m=!1;if("normal"===p.axisPlacement||"xySwapped"===p.axisPlacement)var g=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:t.axisX.options&&t.axisX.options.viewportMinimum?t.axisX.options.viewportMinimum:t.axisX.options&&t.axisX.options.minimum?t.axisX.options.minimum:t.axisX.logarithmic?0:-1/0,f=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:t.axisX.options&&t.axisX.options.viewportMaximum?t.axisX.options.viewportMaximum:t.axisX.options&&t.axisX.options.maximum?t.axisX.options.maximum:1/0;for((p.dataPoints[u].x&&p.dataPoints[u].x.getTime||"dateTime"===p.xValueType)&&(r=!0),u=0;u<p.dataPoints.length;u++){if("undefined"===typeof p.dataPoints[u].x&&(p.dataPoints[u].x=u+(t.axisX.logarithmic?1:0)),p.dataPoints[u].x.getTime?(r=!0,e=p.dataPoints[u].x.getTime()):e=p.dataPoints[u].x,(i=p.dataPoints[u].y)&&i.length){a=Math.min.apply(null,i),s=Math.max.apply(null,i),d=!0;for(var y=0;y<i.length;y++)null===i.k&&(d=!1);d&&(x||(c=l),l=e)}if(e<o.min&&(o.min=e),e>o.max&&(o.max=e),a<n.min&&(n.min=a),s>n.max&&(n.max=s),0<u&&(t.axisX.logarithmic?(1>(d=e/p.dataPoints[u-1].x)&&(d=1/d),o.minDiff>d&&1!==d&&(o.minDiff=d)):(0>(d=e-p.dataPoints[u-1].x)&&(d*=-1),o.minDiff>d&&0!==d&&(o.minDiff=d)),i&&null!==i[0]&&p.dataPoints[u-1].y&&null!==p.dataPoints[u-1].y[0]&&(t.axisY.logarithmic?(1>(d=i[0]/p.dataPoints[u-1].y[0])&&(d=1/d),n.minDiff>d&&1!==d&&(n.minDiff=d)):(0>(d=i[0]-p.dataPoints[u-1].y[0])&&(d*=-1),n.minDiff>d&&0!==d&&(n.minDiff=d)))),!(e<g)||x){if(!x&&(x=!0,0<u)){u-=2,l=c;continue}if(e>f&&!m)m=!0;else if(e>f&&m)continue;if(p.dataPoints[u].label&&(t.axisX.labels[e]=p.dataPoints[u].label),e<o.viewPortMin&&(o.viewPortMin=e),e>o.viewPortMax&&(o.viewPortMax=e),o.viewPortMin===e&&i)for(y=0;y<i.length;y++)if(null===i[y]&&l<e){o.viewPortMin=l;break}null===i?o.viewPortMin===e&&l<e&&(o.viewPortMin=l):(a<n.viewPortMin&&(n.viewPortMin=a),s>n.viewPortMax&&(n.viewPortMax=s))}}p.axisX.valueType=p.xValueType=r?"dateTime":"number"}},e.prototype._processSpecificPlotUnit=function(t){if("waterfall"===t.type&&t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length))for(var e,i,a=t.axisY.dataInfo,s=t.axisX.dataInfo,n=!1,o=0;o<t.dataSeriesIndexes.length;o++){var r=this.data[t.dataSeriesIndexes[o]],h=0,l=!1,d=!1,c=e=0;if("normal"===r.axisPlacement||"xySwapped"===r.axisPlacement)var p=t.axisX.sessionVariables.newViewportMinimum?t.axisX.sessionVariables.newViewportMinimum:t.axisX.options&&t.axisX.options.viewportMinimum?t.axisX.options.viewportMinimum:t.axisX.options&&t.axisX.options.minimum?t.axisX.options.minimum:t.axisX.logarithmic?0:-1/0,u=t.axisX.sessionVariables.newViewportMaximum?t.axisX.sessionVariables.newViewportMaximum:t.axisX.options&&t.axisX.options.viewportMaximum?t.axisX.options.viewportMaximum:t.axisX.options&&t.axisX.options.maximum?t.axisX.options.maximum:1/0;for((r.dataPoints[h].x&&r.dataPoints[h].x.getTime||"dateTime"===r.xValueType)&&(n=!0),h=0;h<r.dataPoints.length;h++)"undefined"!==typeof r.dataPoints[h].isCumulativeSum&&!0===r.dataPoints[h].isCumulativeSum?(r.dataPointEOs[h].cumulativeSumYStartValue=0,r.dataPointEOs[h].cumulativeSum=0===h?0:r.dataPointEOs[h-1].cumulativeSum,r.dataPoints[h].y=0===h?0:r.dataPointEOs[h-1].cumulativeSum):"undefined"!==typeof r.dataPoints[h].isIntermediateSum&&!0===r.dataPoints[h].isIntermediateSum?(r.dataPointEOs[h].cumulativeSumYStartValue=c,r.dataPointEOs[h].cumulativeSum=0===h?0:r.dataPointEOs[h-1].cumulativeSum,r.dataPoints[h].y=0===h?0:e,c=0===h?0:r.dataPointEOs[h-1].cumulativeSum,e=0):(i="number"!==typeof r.dataPoints[h].y?0:r.dataPoints[h].y,r.dataPointEOs[h].cumulativeSumYStartValue=0===h?0:r.dataPointEOs[h-1].cumulativeSum,r.dataPointEOs[h].cumulativeSum=0===h?i:r.dataPointEOs[h-1].cumulativeSum+i,e+=i);for(h=0;h<r.dataPoints.length;h++)if("undefined"===typeof r.dataPoints[h].x&&(r.dataPoints[h].x=h+(t.axisX.logarithmic?1:0)),r.dataPoints[h].x.getTime?(n=!0,e=r.dataPoints[h].x.getTime()):e=r.dataPoints[h].x,i=r.dataPoints[h].y,e<s.min&&(s.min=e),e>s.max&&(s.max=e),r.dataPointEOs[h].cumulativeSum<a.min&&(a.min=r.dataPointEOs[h].cumulativeSum),r.dataPointEOs[h].cumulativeSum>a.max&&(a.max=r.dataPointEOs[h].cumulativeSum),0<h&&(t.axisX.logarithmic?(1>(c=e/r.dataPoints[h-1].x)&&(c=1/c),s.minDiff>c&&1!==c&&(s.minDiff=c)):(0>(c=e-r.dataPoints[h-1].x)&&(c*=-1),s.minDiff>c&&0!==c&&(s.minDiff=c)),null!==i&&null!==r.dataPoints[h-1].y&&(t.axisY.logarithmic?(1>(i=r.dataPointEOs[h].cumulativeSum/r.dataPointEOs[h-1].cumulativeSum)&&(i=1/i),a.minDiff>i&&1!==i&&(a.minDiff=i)):(0>(i=r.dataPointEOs[h].cumulativeSum-r.dataPointEOs[h-1].cumulativeSum)&&(i*=-1),a.minDiff>i&&0!==i&&(a.minDiff=i)))),!(e<p)||l){if(!l&&(l=!0,0<h)){h-=2;continue}if(e>u&&!d)d=!0;else if(e>u&&d)continue;r.dataPoints[h].label&&(t.axisX.labels[e]=r.dataPoints[h].label),e<s.viewPortMin&&(s.viewPortMin=e),e>s.viewPortMax&&(s.viewPortMax=e),0<h&&(r.dataPointEOs[h-1].cumulativeSum<a.viewPortMin&&(a.viewPortMin=r.dataPointEOs[h-1].cumulativeSum),r.dataPointEOs[h-1].cumulativeSum>a.viewPortMax&&(a.viewPortMax=r.dataPointEOs[h-1].cumulativeSum)),r.dataPointEOs[h].cumulativeSum<a.viewPortMin&&(a.viewPortMin=r.dataPointEOs[h].cumulativeSum),r.dataPointEOs[h].cumulativeSum>a.viewPortMax&&(a.viewPortMax=r.dataPointEOs[h].cumulativeSum)}r.axisX.valueType=r.xValueType=n?"dateTime":"number"}},e.prototype.calculateAutoBreaks=function(){function t(t,e,i,a){return a?(1>=(i=Math.pow(Math.min(i*t/e,e/t),.2))&&(i=Math.pow(1>t?1/t:Math.min(e/t,t),.25)),{startValue:t*i,endValue:e/i}):(0>=(i=.2*Math.min(i-e+t,e-t))&&(i=.25*Math.min(e-t,Math.abs(t))),{startValue:t+i,endValue:e-i})}function e(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)){var e=t.axisX.scaleBreaks&&t.axisX.scaleBreaks.autoCalculate&&1<=t.axisX.scaleBreaks.maxNumberOfAutoBreaks,i=t.axisY.scaleBreaks&&t.axisY.scaleBreaks.autoCalculate&&1<=t.axisY.scaleBreaks.maxNumberOfAutoBreaks;if(e||i)for(var a,n,o=t.axisY.dataInfo,r=(p=t.axisX.dataInfo).min,h=p.max,l=o.min,d=o.max,p=p._dataRanges,u=(o=o._dataRanges,0),x=0;x<t.dataSeriesIndexes.length;x++){var m=s.data[t.dataSeriesIndexes[x]];if(!(4>m.dataPoints.length))for(u=0;u<m.dataPoints.length;u++)if(e&&(n=(h+1-r)*Math.max(parseFloat(t.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,(a=m.dataPoints[u].x.getTime?m.dataPoints[u].x.getTime():m.dataPoints[u].x)<p[n=Math.floor((a-r)/n)].min&&(p[n].min=a),a>p[n].max&&(p[n].max=a)),i){var g=(d+1-l)*Math.max(parseFloat(t.axisY.scaleBreaks.collapsibleThreshold)||10,10)/100;if((a="waterfall"===t.type?m.dataPointEOs[u].cumulativeSum:m.dataPoints[u].y)&&a.length)for(var f=0;f<a.length;f++)n=Math.floor((a[f]-l)/g),a[f]<o[n].min&&(o[n].min=a[f]),a[f]>o[n].max&&(o[n].max=a[f]);else c(a)||(a<o[n=Math.floor((a-l)/g)].min&&(o[n].min=a),a>o[n].max&&(o[n].max=a))}}}}function i(t){if(t.dataSeriesIndexes&&!(1>t.dataSeriesIndexes.length)&&t.axisX.scaleBreaks&&t.axisX.scaleBreaks.autoCalculate&&1<=t.axisX.scaleBreaks.maxNumberOfAutoBreaks)for(var e,i=t.axisX.dataInfo,a=i.min,n=i.max,o=i._dataRanges,r=0,h=0;h<t.dataSeriesIndexes.length;h++){var l=s.data[t.dataSeriesIndexes[h]];if(!(4>l.dataPoints.length))for(r=0;r<l.dataPoints.length;r++)e=(n+1-a)*Math.max(parseFloat(t.axisX.scaleBreaks.collapsibleThreshold)||10,10)/100,(i=l.dataPoints[r].x.getTime?l.dataPoints[r].x.getTime():l.dataPoints[r].x)<o[e=Math.floor((i-a)/e)].min&&(o[e].min=i),i>o[e].max&&(o[e].max=i)}}for(var a,s=this,n=!1,o=0;o<this._axes.length;o++)if(this._axes[o].scaleBreaks&&this._axes[o].scaleBreaks.autoCalculate&&1<=this._axes[o].scaleBreaks.maxNumberOfAutoBreaks){n=!0,this._axes[o].dataInfo._dataRanges=[];for(var r=0;r<100/Math.max(parseFloat(this._axes[o].scaleBreaks.collapsibleThreshold)||10,10);r++)this._axes[o].dataInfo._dataRanges.push({min:1/0,max:-1/0})}if(n){for(o=0;o<this.plotInfo.plotTypes.length;o++)for(n=this.plotInfo.plotTypes[o],r=0;r<n.plotUnits.length;r++)"line"===(a=n.plotUnits[r]).type||"stepLine"===a.type||"spline"===a.type||"column"===a.type||"area"===a.type||"stepArea"===a.type||"splineArea"===a.type||"bar"===a.type||"bubble"===a.type||"scatter"===a.type||"candlestick"===a.type||"ohlc"===a.type||"rangeColumn"===a.type||"rangeBar"===a.type||"rangeArea"===a.type||"rangeSplineArea"===a.type||"waterfall"===a.type||"error"===a.type||"boxAndWhisker"===a.type?e(a):0<=a.type.indexOf("stacked")&&i(a);for(o=0;o<this._axes.length;o++)if(this._axes[o].dataInfo._dataRanges){var h=this._axes[o].dataInfo.min;a=(this._axes[o].dataInfo.max+1-h)*Math.max(parseFloat(this._axes[o].scaleBreaks.collapsibleThreshold)||10,10)/100;var l,d,p=this._axes[o].dataInfo._dataRanges;n=[];if(this._axes[o].dataInfo.dataPointYPositiveSums){var u=this._axes[o].dataInfo.dataPointYPositiveSums;for(r in l=p,u)if(u.hasOwnProperty(r)&&!isNaN(r)&&!c(d=u[r])){var x=Math.floor((d-h)/a);d<l[x].min&&(l[x].min=d),d>l[x].max&&(l[x].max=d)}delete this._axes[o].dataInfo.dataPointYPositiveSums}if(this._axes[o].dataInfo.dataPointYNegativeSums){for(r in l=p,u=this._axes[o].dataInfo.dataPointYNegativeSums)u.hasOwnProperty(r)&&!isNaN(r)&&(c(d=-1*u[r])||(d<l[x=Math.floor((d-h)/a)].min&&(l[x].min=d),d>l[x].max&&(l[x].max=d)));delete this._axes[o].dataInfo.dataPointYNegativeSums}for(r=0;r<p.length-1;r++)if(l=p[r].max,isFinite(l))for(;r<p.length-1;){if(h=p[r+1].min,isFinite(h)){(d=h-l)>a&&n.push({diff:d,start:l,end:h});break}r++}if(this._axes[o].scaleBreaks.customBreaks)for(r=0;r<this._axes[o].scaleBreaks.customBreaks.length;r++)for(a=0;a<n.length;a++)(this._axes[o].scaleBreaks.customBreaks[r].startValue<=n[a].start&&n[a].start<=this._axes[o].scaleBreaks.customBreaks[r].endValue||this._axes[o].scaleBreaks.customBreaks[r].startValue<=n[a].start&&n[a].start<=this._axes[o].scaleBreaks.customBreaks[r].endValue||n[a].start<=this._axes[o].scaleBreaks.customBreaks[r].startValue&&this._axes[o].scaleBreaks.customBreaks[r].startValue<=n[a].end||n[a].start<=this._axes[o].scaleBreaks.customBreaks[r].endValue&&this._axes[o].scaleBreaks.customBreaks[r].endValue<=n[a].end)&&(n.splice(a,1),a--);for(n.sort((function(t,e){return e.diff-t.diff})),r=0;r<Math.min(n.length,this._axes[o].scaleBreaks.maxNumberOfAutoBreaks);r++)a=t(n[r].start,n[r].end,this._axes[o].logarithmic?this._axes[o].dataInfo.max/this._axes[o].dataInfo.min:this._axes[o].dataInfo.max-this._axes[o].dataInfo.min,this._axes[o].logarithmic),this._axes[o].scaleBreaks.autoBreaks.push(new E(this,"autoBreaks",a,r,++this._eventManager.lastObjectId,this._axes[o].scaleBreaks)),this._axes[o].scaleBreaks._appliedBreaks.push(this._axes[o].scaleBreaks.autoBreaks[this._axes[o].scaleBreaks.autoBreaks.length-1]);this._axes[o].scaleBreaks._appliedBreaks.sort((function(t,e){return t.startValue-e.startValue}))}}},e.prototype.renderCrosshairs=function(t){for(var e=0;e<this.axisX.length;e++)this.axisX[e]!=t&&this.axisX[e].crosshair&&this.axisX[e].crosshair.enabled&&!this.axisX[e].crosshair._hidden&&this.axisX[e].showCrosshair(this.axisX[e].crosshair._updatedValue);for(e=0;e<this.axisX2.length;e++)this.axisX2[e]!=t&&this.axisX2[e].crosshair&&this.axisX2[e].crosshair.enabled&&!this.axisX2[e].crosshair._hidden&&this.axisX2[e].showCrosshair(this.axisX2[e].crosshair._updatedValue);for(e=0;e<this.axisY.length;e++)this.axisY[e]!=t&&this.axisY[e].crosshair&&this.axisY[e].crosshair.enabled&&!this.axisY[e].crosshair._hidden&&this.axisY[e].showCrosshair(this.axisY[e].crosshair._updatedValue);for(e=0;e<this.axisY2.length;e++)this.axisY2[e]!=t&&this.axisY2[e].crosshair&&this.axisY2[e].crosshair.enabled&&!this.axisY2[e].crosshair._hidden&&this.axisY2[e].showCrosshair(this.axisY2[e].crosshair._updatedValue)},e.prototype.getDataPointAtXY=function(t,e,i){i=i||!1;for(var a=[],s=this._dataInRenderedOrder.length-1;0<=s;s--){var n;(n=this._dataInRenderedOrder[s].getDataPointAtXY(t,e,i))&&a.push(n)}for(t=null,e=!1,i=0;i<a.length;i++)if(("line"===a[i].dataSeries.type||"stepLine"===a[i].dataSeries.type||"area"===a[i].dataSeries.type||"stepArea"===a[i].dataSeries.type)&&(s=y("markerSize",a[i].dataPoint,a[i].dataSeries)||8,a[i].distance<=s/2)){e=!0;break}for(i=0;i<a.length;i++)e&&"line"!==a[i].dataSeries.type&&"stepLine"!==a[i].dataSeries.type&&"area"!==a[i].dataSeries.type&&"stepArea"!==a[i].dataSeries.type||(t?a[i].distance<=t.distance&&(t=a[i]):t=a[i]);return t},e.prototype.getObjectAtXY=function(t,e,i){var a=null;if(i=this.getDataPointAtXY(t,e,i||!1))a=i.dataSeries.dataPointIds[i.dataPointIndex];else if(R)a=f(t,e,this._eventManager.ghostCtx);else for(i=0;i<this.legend.items.length;i++){var s=this.legend.items[i];t>=s.x1&&t<=s.x2&&e>=s.y1&&e<=s.y2&&(a=s.id)}return a},e.prototype.getAutoFontSize=nt,e.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},e.prototype.clearCanvas=at,e.prototype.attachEvent=function(t){this._events.push(t)},e.prototype._touchEventHandler=function(t){if(t.changedTouches&&this.interactivityEnabled){var e=[],i=t.changedTouches,a=i?i[0]:t,s=null;switch(t.type){case"touchstart":case"MSPointerDown":e=["mousemove","mousedown"],this._lastTouchData=ht(a),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":e=["mousemove"];break;case"touchend":case"MSPointerUp":var n=this._lastTouchData&&this._lastTouchData.time?new Date-this._lastTouchData.time:0;e="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType||300>n?["mouseup","click"]:["mouseup"];break;default:return}if(!(i&&1<i.length)){(s=ht(a)).time=new Date;try{var o=s.y-this._lastTouchData.y;n=s.time-this._lastTouchData.time;(1<Math.abs(o)&&this._lastTouchData.scroll||5<Math.abs(o)&&250>n)&&(this._lastTouchData.scroll=!0)}catch(r){}if(this._lastTouchEventType=t.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(i=0;i<e.length;i++)s=e[i],(o=document.createEvent("MouseEvent")).initMouseEvent(s,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(o),(!c(this._lastTouchData.scroll)&&!this._lastTouchData.scroll||!this._lastTouchData.scroll&&250<n||"click"===s)&&(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.cancelable&&t.preventDefault())}}},e.prototype._dispatchRangeEvent=function(t,e){var i={chart:this};i.type=t,i.trigger=e;var a=[];this.axisX&&0<this.axisX.length&&a.push("axisX"),this.axisX2&&0<this.axisX2.length&&a.push("axisX2"),this.axisY&&0<this.axisY.length&&a.push("axisY"),this.axisY2&&0<this.axisY2.length&&a.push("axisY2");for(var s=0;s<a.length;s++)if(c(i[a[s]])&&(i[a[s]]=[]),"axisY"===a[s])for(var n=0;n<this.axisY.length;n++)i[a[s]].push({viewportMinimum:this[a[s]][n].sessionVariables.newViewportMinimum,viewportMaximum:this[a[s]][n].sessionVariables.newViewportMaximum});else if("axisY2"===a[s])for(n=0;n<this.axisY2.length;n++)i[a[s]].push({viewportMinimum:this[a[s]][n].sessionVariables.newViewportMinimum,viewportMaximum:this[a[s]][n].sessionVariables.newViewportMaximum});else if("axisX"===a[s])for(n=0;n<this.axisX.length;n++)i[a[s]].push({viewportMinimum:this[a[s]][n].sessionVariables.newViewportMinimum,viewportMaximum:this[a[s]][n].sessionVariables.newViewportMaximum});else if("axisX2"===a[s])for(n=0;n<this.axisX2.length;n++)i[a[s]].push({viewportMinimum:this[a[s]][n].sessionVariables.newViewportMinimum,viewportMaximum:this[a[s]][n].sessionVariables.newViewportMaximum});this.dispatchEvent(t,i,this)},e.prototype._mouseEventHandler=function(t){"undefined"===typeof t.target&&t.srcElement&&(t.target=t.srcElement);var i,a,s=ht(t),n=t.type;if(t.which?a=3==t.which:t.button&&(a=2==t.button),e.capturedEventParam&&(i=e.capturedEventParam,"mouseup"===n&&(e.capturedEventParam=null,i.chart.overlaidCanvas.releaseCapture?i.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",i.chart._mouseEventHandler,!1)),i.hasOwnProperty(n)&&("mouseup"!==n||i.chart.overlaidCanvas.releaseCapture?t.target!==i.chart.overlaidCanvas&&R||i[n].call(i.context,s.x,s.y):t.target!==i.chart.overlaidCanvas&&(i.chart.isDrag=!1))),this.interactivityEnabled)if(this._ignoreNextEvent)this._ignoreNextEvent=!1;else if(t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault(),O&&window.console&&(window.console.log(n+" --\x3e x: "+s.x+"; y:"+s.y),a&&window.console.log(t.which),"mouseup"===n&&window.console.log("mouseup")),!a){if(!e.capturedEventParam&&this._events){for(var o=0;o<this._events.length;o++)if(this._events[o].hasOwnProperty(n)){if(a=(i=this._events[o]).bounds,s.x>=a.x1&&s.x<=a.x2&&s.y>=a.y1&&s.y<=a.y2){i[n].call(i.context,s.x,s.y),"mousedown"===n&&!0===i.capture?(e.capturedEventParam=i,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.documentElement.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===n&&(i.chart.overlaidCanvas.releaseCapture?i.chart.overlaidCanvas.releaseCapture():document.documentElement.removeEventListener("mouseup",this._mouseEventHandler,!1));break}i=null}t.target.style.cursor=i&&i.cursor?i.cursor:this._defaultCursor}if(n=this.plotArea,s.x<n.x1||s.x>n.x2||s.y<n.y1||s.y>n.y2){for(this.toolTip&&this.toolTip.enabled?(this.toolTip.hide(),this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip)):this.resetOverlayedCanvas(),o=0;o<this.axisX.length;o++)this.axisX[o].crosshair&&this.axisX[o].crosshair.enabled&&(this.axisX[o].crosshair.hide(),this.axisX[o].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[o].options},this.axisX[o].crosshair));for(o=0;o<this.axisX2.length;o++)this.axisX2[o].crosshair&&this.axisX2[o].crosshair.enabled&&(this.axisX2[o].crosshair.hide(),this.axisX2[o].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[o].options},this.axisX2[o].crosshair));for(o=0;o<this.axisY.length;o++)this.axisY[o].crosshair&&this.axisY[o].crosshair.enabled&&(this.axisY[o].crosshair.hide(),this.axisY[o].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[o].options},this.axisY[o].crosshair));for(o=0;o<this.axisY2.length;o++)this.axisY2[o].crosshair&&this.axisY2[o].crosshair.enabled&&(this.axisY2[o].crosshair.hide(),this.axisY2[o].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[o].options},this.axisY2[o].crosshair))}this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(t)}},e.prototype._plotAreaMouseDown=function(t,e){this.isDrag=!0,this.dragStartPoint={x:t,y:e}},e.prototype._plotAreaMouseUp=function(t,e){if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var i=e-this.dragStartPoint.y,a=t-this.dragStartPoint.x,s=0<=this.zoomType.indexOf("x"),n=0<=this.zoomType.indexOf("y"),o=!1;if(this.resetOverlayedCanvas(),"xySwapped"===this.plotInfo.axisPlacement){var r=n;n=s,s=r}if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(s=n=0;s<this._axes.length;s++)(i=this._axes[s]).logarithmic?i.viewportMinimum<i.minimum?(n=i.minimum/i.viewportMinimum,i.sessionVariables.newViewportMinimum=i.viewportMinimum*n,i.sessionVariables.newViewportMaximum=i.viewportMaximum*n,o=!0):i.viewportMaximum>i.maximum&&(n=i.viewportMaximum/i.maximum,i.sessionVariables.newViewportMinimum=i.viewportMinimum/n,i.sessionVariables.newViewportMaximum=i.viewportMaximum/n,o=!0):i.viewportMinimum<i.minimum?(n=i.minimum-i.viewportMinimum,i.sessionVariables.newViewportMinimum=i.viewportMinimum+n,i.sessionVariables.newViewportMaximum=i.viewportMaximum+n,o=!0):i.viewportMaximum>i.maximum&&(n=i.viewportMaximum-i.maximum,i.sessionVariables.newViewportMinimum=i.viewportMinimum-n,i.sessionVariables.newViewportMaximum=i.viewportMaximum-n,o=!0);else if((!s||2<Math.abs(a))&&(!n||2<Math.abs(i))&&this.zoomEnabled){if(!this.dragStartPoint)return;i=s?this.dragStartPoint.x:this.plotArea.x1,a=n?this.dragStartPoint.y:this.plotArea.y1,s=s?t:this.plotArea.x2,n=n?e:this.plotArea.y2,2<Math.abs(i-s)&&2<Math.abs(a-n)&&this._zoomPanToSelectedRegion(i,a,s,n)&&(o=!0)}o&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.stockChart&&this.stockChart.navigator&&this.stockChart.navigator.enabled&&(this.stockChart._rangeEventParameter||(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:this.stockChart.sessionVariables._axisXMin,maximum:this.stockChart.sessionVariables._axisXMax}),this.stockChart._rangeEventParameter.type="rangeChanging",this.stockChart.dispatchEvent("rangeChanging",this.stockChart._rangeEventParameter,this.stockChart)),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),this.stockChart&&this.stockChart.navigator&&this.stockChart.navigator.enabled&&(this.stockChart._rangeEventParameter.type="rangeChanged",this.stockChart.dispatchEvent("rangeChanged",this.stockChart._rangeEventParameter,this.stockChart)),o&&this.zoomEnabled&&"none"===this._zoomButton.style.display&&(w(this._zoomButton,this._resetButton),M(this,this._zoomButton,"pan"),M(this,this._resetButton,"reset")))}}if(this.isDrag=!1,"none"!==this.plotInfo.axisPlacement){if(this.resetOverlayedCanvas(),this.axisX&&0<this.axisX.length)for(o=0;o<this.axisX.length;o++)this.axisX[o].crosshair&&this.axisX[o].crosshair.enabled&&this.axisX[o].renderCrosshair(t,e);if(this.axisX2&&0<this.axisX2.length)for(o=0;o<this.axisX2.length;o++)this.axisX2[o].crosshair&&this.axisX2[o].crosshair.enabled&&this.axisX2[o].renderCrosshair(t,e);if(this.axisY&&0<this.axisY.length)for(o=0;o<this.axisY.length;o++)this.axisY[o].crosshair&&this.axisY[o].crosshair.enabled&&this.axisY[o].renderCrosshair(t,e);if(this.axisY2&&0<this.axisY2.length)for(o=0;o<this.axisY2.length;o++)this.axisY2[o].crosshair&&this.axisY2[o].crosshair.enabled&&this.axisY2[o].renderCrosshair(t,e);if(this.axisX&&0<this.axisX.length)for(o=0;o<this.axisX.length;o++)this.axisX[o].crosshair&&this.axisX[o].crosshair.enabled&&this.axisX[o].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(o=0;o<this.axisX2.length;o++)this.axisX2[o].crosshair&&this.axisX2[o].crosshair.enabled&&this.axisX2[o].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(o=0;o<this.axisY.length;o++)this.axisY[o].crosshair&&this.axisY[o].crosshair.enabled&&this.axisY[o].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(o=0;o<this.axisY2.length;o++)this.axisY2[o].crosshair&&this.axisY2[o].crosshair.enabled&&this.axisY2[o].crosshair.renderLabel()}},e.prototype._plotAreaMouseMove=function(t,e){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var i=0,a=0,s=i=null,n=(s=0<=this.zoomType.indexOf("x"),0<=this.zoomType.indexOf("y")),o=this;if("xySwapped"===this.plotInfo.axisPlacement&&(i=n,n=s,s=i),i=this.dragStartPoint.x-t,a=this.dragStartPoint.y-e,2<Math.abs(i)&&8>Math.abs(i)&&(this.panEnabled||this.zoomEnabled)){this.toolTip.hide(),this.toolTip&&this.toolTip.enabled&&this.toolTip.dispatchEvent("hidden",{chart:this,toolTip:this.toolTip},this.toolTip);for(var r=0;r<this.axisX.length;r++)this.axisX[r].crosshair&&this.axisX[r].crosshair.enabled&&(this.axisX[r].crosshair.hide(),this.axisX[r].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX[r].options},this.axisX[r].crosshair));for(r=0;r<this.axisX2.length;r++)this.axisX2[r].crosshair&&this.axisX2[r].crosshair.enabled&&(this.axisX2[r].crosshair.hide(),this.axisX2[r].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisX2[r].options},this.axisX2[r].crosshair));for(r=0;r<this.axisY.length;r++)this.axisY[r].crosshair&&this.axisY[r].crosshair.enabled&&(this.axisY[r].crosshair.hide(),this.axisY[r].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY[r].options},this.axisY[r].crosshair));for(r=0;r<this.axisY2.length;r++)this.axisY2[r].crosshair&&this.axisY2[r].crosshair.enabled&&(this.axisY2[r].crosshair.hide(),this.axisY2[r].crosshair.dispatchEvent("hidden",{chart:this,axis:this.axisY2[r].options},this.axisY2[r].crosshair))}else this.panEnabled||this.zoomEnabled||this.toolTip.mouseMoveHandler(t,e);if((!s||2<Math.abs(i)||!n||2<Math.abs(a))&&(this.panEnabled||this.zoomEnabled))if(this.panEnabled)s={x1:s?this.plotArea.x1+i:this.plotArea.x1,y1:n?this.plotArea.y1+a:this.plotArea.y1,x2:s?this.plotArea.x2+i:this.plotArea.x2,y2:n?this.plotArea.y2+a:this.plotArea.y2},clearTimeout(o._panTimerId),o._panTimerId=setTimeout(function(i,a,s,n){return function(){o._zoomPanToSelectedRegion(i,a,s,n,!0)&&(o._dispatchRangeEvent("rangeChanging","pan"),o.stockChart&&o.stockChart.navigator&&o.stockChart.navigator.enabled&&(o.stockChart._rangeEventParameter.type="rangeChanging",o.stockChart.dispatchEvent("rangeChanging",o.stockChart._rangeEventParameter,o.stockChart)),o.render(),o._dispatchRangeEvent("rangeChanged","pan"),o.stockChart&&o.stockChart.navigator&&o.stockChart.navigator.enabled&&(o.stockChart._rangeEventParameter.type="rangeChanged",o.stockChart.dispatchEvent("rangeChanged",o.stockChart._rangeEventParameter,o.stockChart)),o.dragStartPoint.x=t,o.dragStartPoint.y=e)}}(s.x1,s.y1,s.x2,s.y2),0);else if(this.zoomEnabled){this.resetOverlayedCanvas(),i=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.fillStyle="#A89896";a=s?this.dragStartPoint.x:this.plotArea.x1,r=n?this.dragStartPoint.y:this.plotArea.y1;var h=s?t-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,l=n?e-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1;this.validateRegion(a,r,s?t:this.plotArea.x2-this.plotArea.x1,n?e:this.plotArea.y2-this.plotArea.y1,"xy"!==this.zoomType).isValid&&(this.resetOverlayedCanvas(),this.overlaidCanvasCtx.fillStyle="#99B2B5"),this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillRect(a,r,h,l),this.overlaidCanvasCtx.globalAlpha=i}}else if(this.toolTip.mouseMoveHandler(t,e),"none"!==this.plotInfo.axisPlacement){if(this.axisX&&0<this.axisX.length)for(s=0;s<this.axisX.length;s++)this.axisX[s].crosshair&&this.axisX[s].crosshair.enabled&&this.axisX[s].renderCrosshair(t,e);if(this.axisX2&&0<this.axisX2.length)for(s=0;s<this.axisX2.length;s++)this.axisX2[s].crosshair&&this.axisX2[s].crosshair.enabled&&this.axisX2[s].renderCrosshair(t,e);if(this.axisY&&0<this.axisY.length)for(s=0;s<this.axisY.length;s++)this.axisY[s].crosshair&&this.axisY[s].crosshair.enabled&&this.axisY[s].renderCrosshair(t,e);if(this.axisY2&&0<this.axisY2.length)for(s=0;s<this.axisY2.length;s++)this.axisY2[s].crosshair&&this.axisY2[s].crosshair.enabled&&this.axisY2[s].renderCrosshair(t,e);if(this.axisX&&0<this.axisX.length)for(s=0;s<this.axisX.length;s++)this.axisX[s].crosshair&&this.axisX[s].crosshair.enabled&&this.axisX[s].crosshair.renderLabel();if(this.axisX2&&0<this.axisX2.length)for(s=0;s<this.axisX2.length;s++)this.axisX2[s].crosshair&&this.axisX2[s].crosshair.enabled&&this.axisX2[s].crosshair.renderLabel();if(this.axisY&&0<this.axisY.length)for(s=0;s<this.axisY.length;s++)this.axisY[s].crosshair&&this.axisY[s].crosshair.enabled&&this.axisY[s].crosshair.renderLabel();if(this.axisY2&&0<this.axisY2.length)for(s=0;s<this.axisY2.length;s++)this.axisY2[s].crosshair&&this.axisY2[s].crosshair.enabled&&this.axisY2[s].crosshair.renderLabel()}},e.prototype._zoomPanToSelectedRegion=function(t,e,i,a,s){if(e=(t=this.validateRegion(t,e,i,a,s)).axesWithValidRange,i=t.axesRanges,t.isValid)for(a=0;a<e.length;a++)s=i[a],e[a].setViewPortRange(s.val1,s.val2),this.syncCharts&&"y"!=this.zoomType&&this.syncCharts(s.val1,s.val2),this.stockChart&&(this.stockChart._rangeEventParameter={stockChart:this.stockChart,source:"chart",index:this.stockChart.charts.indexOf(this),minimum:s.val1,maximum:s.val2});return t.isValid},e.prototype.validateRegion=function(t,e,i,a,s){s=s||!1;for(var n=0<=this.zoomType.indexOf("x"),o=0<=this.zoomType.indexOf("y"),r=!1,h=[],l=[],d=[],c=0;c<this._axes.length;c++)("axisX"===this._axes[c].type&&n||"axisY"===this._axes[c].type&&o)&&l.push(this._axes[c]);for(o=0;o<l.length;o++){n=!1;if((x=(c=l[o]).convertPixelToValue({x:t,y:e}))>(u=c.convertPixelToValue({x:i,y:a})))var p=u,u=x,x=p;if(c.scaleBreaks)for(p=0;!n&&p<c.scaleBreaks._appliedBreaks.length;p++)n=c.scaleBreaks._appliedBreaks[p].startValue<=x&&c.scaleBreaks._appliedBreaks[p].endValue>=u;if(isFinite(c.dataInfo.minDiff))if(p=c.getApparentDifference(x,u,null,!0),n||!(this.panEnabled&&c.scaleBreaks&&c.scaleBreaks._appliedBreaks.length)&&(c.logarithmic&&p<Math.pow(c.dataInfo.minDiff,3)||!c.logarithmic&&p<3*Math.abs(c.dataInfo.minDiff))||x<c.minimum||u>c.maximum){if(!s){r=!1;break}}else h.push(c),d.push({val1:x,val2:u}),r=!0}return{isValid:r,axesWithValidRange:h,axesRanges:d}},e.prototype.preparePlotArea=function(){var t=this.plotArea;if(!R&&(0<t.x1||0<t.y1)&&t.ctx.translate(t.x1,t.y1),(this.axisX[0]||this.axisX2[0])&&(this.axisY[0]||this.axisY2[0])){var e=this.axisX[0]?this.axisX[0].lineCoordinates:this.axisX2[0].lineCoordinates;if(this.axisY&&0<this.axisY.length&&this.axisY[0]){var i=this.axisY[0];t.x1=e.x1<e.x2?e.x1:i.lineCoordinates.x1,t.y1=e.y1<i.lineCoordinates.y1?e.y1:i.lineCoordinates.y1,t.x2=e.x2>i.lineCoordinates.x2?e.x2:i.lineCoordinates.x2,t.y2=e.y2>e.y1?e.y2:i.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1}this.axisY2&&0<this.axisY2.length&&this.axisY2[0]&&(i=this.axisY2[0],t.x1=e.x1<e.x2?e.x1:i.lineCoordinates.x1,t.y1=e.y1<i.lineCoordinates.y1?e.y1:i.lineCoordinates.y1,t.x2=e.x2>i.lineCoordinates.x2?e.x2:i.lineCoordinates.x2,t.y2=e.y2>e.y1?e.y2:i.lineCoordinates.y2,t.width=t.x2-t.x1,t.height=t.y2-t.y1)}else e=this.layoutManager.getFreeSpace(),t.x1=e.x1,t.x2=e.x2,t.y1=e.y1,t.y2=e.y2,t.width=e.width,t.height=e.height;R||(t.canvas.width=t.width,t.canvas.height=t.height,t.canvas.style.left=t.x1+"px",t.canvas.style.top=t.y1+"px",(0<t.x1||0<t.y1)&&t.ctx.translate(-t.x1,-t.y1)),t.layoutManager=new S(t.x1,t.y1,t.x2,t.y2,2)},e.prototype.renderIndexLabels=function(t){var e=t||this.plotArea.ctx,i=this.plotArea,a=0,s=0,n=0,o=n=s=0,r=0,h=a=0,l=0;for(t=0;t<this._indexLabels.length;t++){var d,p,u=this._indexLabels[t],x=u.chartType.toLowerCase(),g=(o=y("indexLabelFontColor",u.dataPoint,u.dataSeries),y("indexLabelFontSize",u.dataPoint,u.dataSeries)),f=(r=y("indexLabelFontFamily",u.dataPoint,u.dataSeries),h=y("indexLabelFontStyle",u.dataPoint,u.dataSeries),l=y("indexLabelFontWeight",u.dataPoint,u.dataSeries),y("indexLabelBackgroundColor",u.dataPoint,u.dataSeries));d=y("indexLabelMaxWidth",u.dataPoint,u.dataSeries),p=y("indexLabelWrap",u.dataPoint,u.dataSeries);var b=y("indexLabelLineDashType",u.dataPoint,u.dataSeries),v=y("indexLabelLineColor",u.dataPoint,u.dataSeries),_=c(u.dataPoint.indexLabelLineThickness)?c(u.dataSeries.options.indexLabelLineThickness)?0:u.dataSeries.options.indexLabelLineThickness:u.dataPoint.indexLabelLineThickness,k=(a=0<_?Math.min(10,("normal"===this.plotInfo.axisPlacement?this.plotArea.height:this.plotArea.width)<<0):0,{percent:null,total:null}),M=null;(0<=u.dataSeries.type.indexOf("stacked")||"pie"===u.dataSeries.type||"doughnut"===u.dataSeries.type)&&(k=this.getPercentAndTotal(u.dataSeries,u.dataPoint)),(u.dataSeries.indexLabelFormatter||u.dataPoint.indexLabelFormatter)&&(M={chart:this,dataSeries:u.dataSeries,dataPoint:u.dataPoint,index:u.indexKeyword,total:k.total,percent:k.percent});var w=u.dataPoint.indexLabelFormatter?u.dataPoint.indexLabelFormatter(M):u.dataPoint.indexLabel?this.replaceKeywordsWithValue(u.dataPoint.indexLabel,u.dataPoint,u.dataSeries,null,u.indexKeyword):u.dataSeries.indexLabelFormatter?u.dataSeries.indexLabelFormatter(M):u.dataSeries.indexLabel?this.replaceKeywordsWithValue(u.dataSeries.indexLabel,u.dataPoint,u.dataSeries,null,u.indexKeyword):null;if(null!==w&&""!==w){k=y("indexLabelPlacement",u.dataPoint,u.dataSeries),M=y("indexLabelOrientation",u.dataPoint,u.dataSeries);var T=y("indexLabelTextAlign",u.dataPoint,u.dataSeries),P=u.direction,C=(s=u.dataSeries.axisX,n=u.dataSeries.axisY,!1);if((f=new A(e,{x:0,y:0,maxWidth:d||.5*this.width,maxHeight:p?5*g:1.5*g,angle:"horizontal"===M?0:-90,text:w,padding:0,backgroundColor:f,textAlign:T,fontSize:g,fontFamily:r,fontWeight:l,fontColor:o,fontStyle:h,textBaseline:"middle"})).measureText(),u.dataSeries.indexLabelMaxWidth=f.maxWidth,"stackedarea100"===x){if(u.point.x<i.x1||u.point.x>i.x2||u.point.y<i.y1-1||u.point.y>i.y2+1)continue}else if("rangearea"===x||"rangesplinearea"===x){if(u.dataPoint.x<s.viewportMinimum||u.dataPoint.x>s.viewportMaximum||Math.max.apply(null,u.dataPoint.y)<n.viewportMinimum||Math.min.apply(null,u.dataPoint.y)>n.viewportMaximum)continue}else if(0<=x.indexOf("line")||0<=x.indexOf("area")||0<=x.indexOf("bubble")||0<=x.indexOf("scatter")){if(u.dataPoint.x<s.viewportMinimum||u.dataPoint.x>s.viewportMaximum||u.dataPoint.y<n.viewportMinimum||u.dataPoint.y>n.viewportMaximum)continue}else if(0<=x.indexOf("column")||"waterfall"===x||"error"===x&&!u.axisSwapped){if(u.dataPoint.x<s.viewportMinimum||u.dataPoint.x>s.viewportMaximum||u.bounds.y1>i.y2||u.bounds.y2<i.y1)continue}else if(0<=x.indexOf("bar")||"error"===x){if(u.dataPoint.x<s.viewportMinimum||u.dataPoint.x>s.viewportMaximum||u.bounds.x1>i.x2||u.bounds.x2<i.x1)continue}else if("candlestick"===x||"ohlc"===x){if(u.dataPoint.x<s.viewportMinimum||u.dataPoint.x>s.viewportMaximum||Math.max.apply(null,u.dataPoint.y)<n.viewportMinimum||Math.min.apply(null,u.dataPoint.y)>n.viewportMaximum)continue}else if(u.dataPoint.x<s.viewportMinimum||u.dataPoint.x>s.viewportMaximum)continue;o=r=2,"horizontal"===M?(h=f.width,l=f.height):(l=f.width,h=f.height),"normal"===this.plotInfo.axisPlacement?(0<=x.indexOf("line")||0<=x.indexOf("area")?(k="auto",r=4):0<=x.indexOf("stacked")?"auto"===k&&(k="inside"):"bubble"!==x&&"scatter"!==x||(k="inside"),d=u.point.x-("horizontal"===M?h/2:h/2-g/2),"inside"!==k?(s=i.y1,n=i.y2,0<P?(p=u.point.y+("horizontal"===M?g/2:0)-l-r-a)<s&&(C=(p="auto"===k?Math.max(u.point.y,s)+g/2+r:s+g/2+r)+l>u.point.y):(p=u.point.y+g/2+r+a)>n-l&&(C=(p="auto"===k?Math.min(u.point.y,n)+g/2-l-r:n+g/2-l)<u.point.y)):(s=Math.max(u.bounds.y1,i.y1),n=Math.min(u.bounds.y2,i.y2-l+g/2),a=0<=x.indexOf("range")||"error"===x?0<P?Math.max(u.bounds.y1,i.y1)+g/2+r:Math.min(u.bounds.y2,i.y2)+g/2-l+r:(Math.max(u.bounds.y1,i.y1)+Math.min(u.bounds.y2,i.y2))/2-l/2+g/2+("horizontal"===M?r:0),0<P?(p=Math.max(u.point.y,a))<s&&("bubble"===x||"scatter"===x)&&(p=Math.max(u.point.y-l-r,i.y1+r)):(p=Math.min(u.point.y,a))>n-l-r&&("bubble"===x||"scatter"===x)&&(p=Math.min(u.point.y+r,i.y2-l-r)),p=Math.min(p,n))):(0<=x.indexOf("line")||0<=x.indexOf("area")||0<=x.indexOf("scatter")?(k="auto",o=4):0<=x.indexOf("stacked")?"auto"===k&&(k="inside"):"bubble"===x&&(k="inside"),p=u.point.y+g/2-l/2+r,"inside"!==k?(s=i.x1,n=i.x2,0>P?(d=u.point.x-("horizontal"===M?h:h-g/2)-o-a)<s&&(C=(d="auto"===k?Math.max(u.point.x,s)+o:s+o)+h>u.point.x):(d=u.point.x+("horizontal"===M?0:g/2)+o+a)>n-h-o-a&&(C=(d="auto"===k?Math.min(u.point.x,n)-("horizontal"===M?h:h/2)-o:n-h-o)<u.point.x)):(s=Math.max(u.bounds.x1,i.x1),Math.min(u.bounds.x2,i.x2),a=0<=x.indexOf("range")||"error"===x?0>P?Math.max(u.bounds.x1,i.x1)+g/2+o:Math.min(u.bounds.x2,i.x2)-h/2-o+("horizontal"===M?0:g/2):(Math.max(u.bounds.x1,i.x1)+Math.min(u.bounds.x2,i.x2))/2+("horizontal"===M?0:g/2),d=0>P?Math.max(u.point.x,a)-("horizontal"===M?h/2:0):Math.min(u.point.x,a)-h/2,d=Math.max(d,s))),"vertical"===M&&(p+=l-g/2),f.x=d,f.y=p,f.render(!0),_&&"inside"!==k&&(0>x.indexOf("bar")&&("error"!==x||!u.axisSwapped)&&u.point.x>i.x1&&u.point.x<i.x2||!C)&&(0>x.indexOf("column")&&("error"!==x||u.axisSwapped)&&u.point.y>i.y1&&u.point.y<i.y2||!C)&&(e.lineWidth=_,e.strokeStyle=v||"gray",e.setLineDash&&e.setLineDash(m(b,_)),e.beginPath(),e.moveTo(u.point.x,u.point.y),0<=x.indexOf("bar")||"error"===x&&u.axisSwapped?e.lineTo(d+(0<u.direction?-o:h+o)+("vertical"===M?-g/2:0),p+("vertical"===M?-l/2:l/2-g/2)-r):0<=x.indexOf("column")||"error"===x&&!u.axisSwapped?e.lineTo(d+h/2-("horizontal"===M?0:g/2),p+("vertical"===M?(p-l<u.point.y?0:-l)+r:(p-g/2<u.point.y?l:0)-g/2)):0<=x.indexOf("waterfall")?e.lineTo(d+h/2-("horizontal"===M?0:g/2),"vertical"===M?0<P&&p<u.point.y?p:0>P&&p-l>u.point.y?p-l:u.point.y:0<P&&p+l-g/2<u.point.y?p+l-g/2:0>P&&p-g/2>u.point.y?p-g/2-2:u.point.y):e.lineTo(d+h/2-("horizontal"===M?0:g/2),p+("vertical"===M?p-l<u.point.y?0:-l:(p+l<u.point.y?l:0)-g/2)),e.stroke())}}for(e={source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0,startTimePercent:.7},t=0;t<this._indexLabels.length;t++)f=y("indexLabelBackgroundColor",(u=this._indexLabels[t]).dataPoint,u.dataSeries),u.dataSeries.indexLabelBackgroundColor=c(f)?R?"transparent":null:f;return e},e.prototype.renderLine=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a=this._eventManager.ghostCtx;i.save();var s=this.plotArea;i.beginPath(),i.rect(s.x1,s.y1,s.width,s.height),i.clip();for(var n,o=[],r=0;r<t.dataSeriesIndexes.length;r++){var h=t.dataSeriesIndexes[r],d=this.data[h];i.lineWidth=d.lineThickness;var c=d.dataPoints,p="solid";if(i.setLineDash){var u=m(d.nullDataLineDashType,d.lineThickness),x=m(p=d.lineDashType,d.lineThickness);i.setLineDash(x)}var g=d.id;this._eventManager.objectMap[g]={objectType:"dataSeries",dataSeriesIndex:h},g=l(g),a.strokeStyle=g,a.lineWidth=0<d.lineThickness?Math.max(d.lineThickness,4):0;g=d._colorSet;var f=g=d.lineColor=d.options.lineColor?d.options.lineColor:g[0];i.strokeStyle=g;var y,b,v=!0,_=0;if(i.beginPath(),0<c.length){var k=!1;for(_=0;_<c.length;_++)if(!((y=c[_].x.getTime?c[_].x.getTime():c[_].x)<t.axisX.dataInfo.viewPortMin||y>t.axisX.dataInfo.viewPortMax&&(!d.connectNullData||!k)))if("number"!==typeof c[_].y)0<_&&!(d.connectNullData||k||v)&&(i.stroke(),R&&a.stroke()),k=!0;else{y=t.axisX.convertValueToPixel(y),b=t.axisY.convertValueToPixel(c[_].y);var M=d.dataPointIds[_];if(this._eventManager.objectMap[M]={id:M,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:_,x1:y,y1:b},v||k?(!v&&d.connectNullData?(i.setLineDash&&(d.options.nullDataLineDashType||p===d.lineDashType&&d.lineDashType!==d.nullDataLineDashType)&&(i.stroke(),i.beginPath(),i.moveTo(n.x,n.y),p=d.nullDataLineDashType,i.setLineDash(u)),i.lineTo(y,b),R&&a.lineTo(y,b)):(i.beginPath(),i.moveTo(y,b),R&&(a.beginPath(),a.moveTo(y,b))),k=v=!1):(i.lineTo(y,b),R&&a.lineTo(y,b),0==_%500&&(i.stroke(),i.beginPath(),i.moveTo(y,b),R&&(a.stroke(),a.beginPath(),a.moveTo(y,b)))),n={x:y,y:b},_<c.length-1&&(f!==(c[_].lineColor||g)||p!==(c[_].lineDashType||d.lineDashType))&&(i.stroke(),i.beginPath(),i.moveTo(y,b),f=c[_].lineColor||g,i.strokeStyle=f,i.setLineDash&&(c[_].lineDashType?(p=c[_].lineDashType,i.setLineDash(m(p,d.lineThickness))):(p=d.lineDashType,i.setLineDash(x)))),0!==c[_].markerSize&&(0<c[_].markerSize||0<d.markerSize)){var w=d.getMarkerProperties(_,y,b,i);o.push(w),M=l(M),R&&o.push({x:y,y:b,ctx:a,type:w.type,size:w.size,color:M,borderColor:M,borderThickness:w.borderThickness})}(c[_].indexLabel||d.indexLabel||c[_].indexLabelFormatter||d.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:c[_],dataSeries:d,point:{x:y,y:b},direction:0>c[_].y===t.axisY.reversed?1:-1,color:g})}i.stroke(),R&&a.stroke()}}return J.drawMarkers(o),R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(s.x1,s.y1,s.width,s.height),a.beginPath()),i.restore(),i.beginPath(),{source:e,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderStepLine=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a=this._eventManager.ghostCtx;i.save();var s=this.plotArea;i.beginPath(),i.rect(s.x1,s.y1,s.width,s.height),i.clip();for(var n,o=[],r=0;r<t.dataSeriesIndexes.length;r++){var h=t.dataSeriesIndexes[r],d=this.data[h];i.lineWidth=d.lineThickness;var c=d.dataPoints,p="solid";if(i.setLineDash){var u=m(d.nullDataLineDashType,d.lineThickness),x=m(p=d.lineDashType,d.lineThickness);i.setLineDash(x)}var g=d.id;this._eventManager.objectMap[g]={objectType:"dataSeries",dataSeriesIndex:h},g=l(g),a.strokeStyle=g,a.lineWidth=0<d.lineThickness?Math.max(d.lineThickness,4):0;g=d._colorSet;var f=g=d.lineColor=d.options.lineColor?d.options.lineColor:g[0];i.strokeStyle=g;var y,b,v=!0,_=0;if(i.beginPath(),0<c.length){var k=!1;for(_=0;_<c.length;_++)if(!((y=c[_].getTime?c[_].x.getTime():c[_].x)<t.axisX.dataInfo.viewPortMin||y>t.axisX.dataInfo.viewPortMax&&(!d.connectNullData||!k)))if("number"!==typeof c[_].y)0<_&&!(d.connectNullData||k||v)&&(i.stroke(),R&&a.stroke()),k=!0;else{var M=b;y=t.axisX.convertValueToPixel(y),b=t.axisY.convertValueToPixel(c[_].y);var w=d.dataPointIds[_];this._eventManager.objectMap[w]={id:w,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:_,x1:y,y1:b},v||k?(!v&&d.connectNullData?(i.setLineDash&&(d.options.nullDataLineDashType||p===d.lineDashType&&d.lineDashType!==d.nullDataLineDashType)&&(i.stroke(),i.beginPath(),i.moveTo(n.x,n.y),p=d.nullDataLineDashType,i.setLineDash(u)),i.lineTo(y,M),i.lineTo(y,b),R&&(a.lineTo(y,M),a.lineTo(y,b))):(i.beginPath(),i.moveTo(y,b),R&&(a.beginPath(),a.moveTo(y,b))),k=v=!1):(i.lineTo(y,M),R&&a.lineTo(y,M),i.lineTo(y,b),R&&a.lineTo(y,b),0==_%500&&(i.stroke(),i.beginPath(),i.moveTo(y,b),R&&(a.stroke(),a.beginPath(),a.moveTo(y,b)))),n={x:y,y:b},_<c.length-1&&(f!==(c[_].lineColor||g)||p!==(c[_].lineDashType||d.lineDashType))&&(i.stroke(),i.beginPath(),i.moveTo(y,b),f=c[_].lineColor||g,i.strokeStyle=f,i.setLineDash&&(c[_].lineDashType?(p=c[_].lineDashType,i.setLineDash(m(p,d.lineThickness))):(p=d.lineDashType,i.setLineDash(x)))),0!==c[_].markerSize&&(0<c[_].markerSize||0<d.markerSize)&&(M=d.getMarkerProperties(_,y,b,i),o.push(M),w=l(w),R&&o.push({x:y,y:b,ctx:a,type:M.type,size:M.size,color:w,borderColor:w,borderThickness:M.borderThickness})),(c[_].indexLabel||d.indexLabel||c[_].indexLabelFormatter||d.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:c[_],dataSeries:d,point:{x:y,y:b},direction:0>c[_].y===t.axisY.reversed?1:-1,color:g})}i.stroke(),R&&a.stroke()}}return J.drawMarkers(o),R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(s.x1,s.y1,s.width,s.height),a.beginPath()),i.restore(),i.beginPath(),{source:e,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderSpline=function(t){function e(t){if(0<(t=i(t,2)).length){s.beginPath(),R&&n.beginPath(),s.moveTo(t[0].x,t[0].y),t[0].newStrokeStyle&&(s.strokeStyle=t[0].newStrokeStyle),t[0].newLineDashArray&&s.setLineDash(t[0].newLineDashArray),R&&n.moveTo(t[0].x,t[0].y);for(var e=0;e<t.length-3;e+=3)s.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),R&&n.bezierCurveTo(t[e+1].x,t[e+1].y,t[e+2].x,t[e+2].y,t[e+3].x,t[e+3].y),(0<e&&0===e%3e3||t[e+3].newStrokeStyle||t[e+3].newLineDashArray)&&(s.stroke(),s.beginPath(),s.moveTo(t[e+3].x,t[e+3].y),t[e+3].newStrokeStyle&&(s.strokeStyle=t[e+3].newStrokeStyle),t[e+3].newLineDashArray&&s.setLineDash(t[e+3].newLineDashArray),R&&(n.stroke(),n.beginPath(),n.moveTo(t[e+3].x,t[e+3].y)));s.stroke(),R&&n.stroke()}}var a=t.targetCanvasCtx||this.plotArea.ctx,s=R?this._preRenderCtx:a;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx;s.save();var o=this.plotArea;s.beginPath(),s.rect(o.x1,o.y1,o.width,o.height),s.clip();for(var r=[],h=0;h<t.dataSeriesIndexes.length;h++){var d=t.dataSeriesIndexes[h],c=this.data[d];s.lineWidth=c.lineThickness;var p=c.dataPoints,u="solid";if(s.setLineDash){var x=m(c.nullDataLineDashType,c.lineThickness),g=m(u=c.lineDashType,c.lineThickness);s.setLineDash(g)}var f=c.id;this._eventManager.objectMap[f]={objectType:"dataSeries",dataSeriesIndex:d},f=l(f),n.strokeStyle=f,n.lineWidth=0<c.lineThickness?Math.max(c.lineThickness,4):0;f=c._colorSet;var y=f=c.lineColor=c.options.lineColor?c.options.lineColor:f[0];s.strokeStyle=f;var b,v,_=0,k=[];if(s.beginPath(),0<p.length)for(v=!1,_=0;_<p.length;_++)if(!((b=p[_].getTime?p[_].x.getTime():p[_].x)<t.axisX.dataInfo.viewPortMin||b>t.axisX.dataInfo.viewPortMax&&(!c.connectNullData||!v)))if("number"!==typeof p[_].y)0<_&&!v&&(c.connectNullData?s.setLineDash&&0<k.length&&(c.options.nullDataLineDashType||!p[_-1].lineDashType)&&(k[k.length-1].newLineDashArray=x,u=c.nullDataLineDashType):(e(k),k=[])),v=!0;else{b=t.axisX.convertValueToPixel(b),v=t.axisY.convertValueToPixel(p[_].y);var M=c.dataPointIds[_];if(this._eventManager.objectMap[M]={id:M,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:_,x1:b,y1:v},k[k.length]={x:b,y:v},_<p.length-1&&(y!==(p[_].lineColor||f)||u!==(p[_].lineDashType||c.lineDashType))&&(y=p[_].lineColor||f,k[k.length-1].newStrokeStyle=y,s.setLineDash&&(p[_].lineDashType?(u=p[_].lineDashType,k[k.length-1].newLineDashArray=m(u,c.lineThickness)):(u=c.lineDashType,k[k.length-1].newLineDashArray=g))),0!==p[_].markerSize&&(0<p[_].markerSize||0<c.markerSize)){var w=c.getMarkerProperties(_,b,v,s);r.push(w),M=l(M),R&&r.push({x:b,y:v,ctx:n,type:w.type,size:w.size,color:M,borderColor:M,borderThickness:w.borderThickness})}(p[_].indexLabel||c.indexLabel||p[_].indexLabelFormatter||c.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:p[_],dataSeries:c,point:{x:b,y:v},direction:0>p[_].y===t.axisY.reversed?1:-1,color:f}),v=!1}e(k)}return J.drawMarkers(r),R&&(a.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&s.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&s.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.clearRect(o.x1,o.y1,o.width,o.height),n.beginPath()),s.restore(),s.beginPath(),{source:a,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderColumn=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n,o=null,r=this.plotArea,h=0,d=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),c=(h=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,this.plotArea.width/t.plotType.totalDataSeries*.9)<<0),p=t.axisX.dataInfo.minDiff;for(isFinite(p)||(p=.3*Math.abs(t.axisX.range)),p=this.dataPointWidth=this.options.dataPointWidth?this.dataPointWidth:r.width*(t.axisX.logarithmic?Math.log(p)/Math.log(t.axisX.range):Math.abs(p)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&h>c&&(h=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<h&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,h)),p<h&&(p=h),p>c&&(p=c),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(r.x1,r.y1,r.width,r.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),c=0;c<t.dataSeriesIndexes.length;c++){var u=t.dataSeriesIndexes[c],x=this.data[u],m=x.dataPoints;if(0<m.length){var g=!!(5<p&&x.bevelEnabled);for(h=0;h<m.length;h++)if(!((n=m[h].getTime?m[h].x.getTime():m[h].x)<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"===typeof m[h].y){a=t.axisX.convertValueToPixel(n),s=t.axisY.convertValueToPixel(m[h].y),a=t.axisX.reversed?a+t.plotType.totalDataSeries*p/2-(t.previousDataSeriesCount+c)*p<<0:a-t.plotType.totalDataSeries*p/2+(t.previousDataSeriesCount+c)*p<<0;var f,y=t.axisX.reversed?a-p<<0:a+p<<0;0<=m[h].y?f=d:(f=s,s=d),s>f&&(o=s,s=f,f=o),o=m[h].color?m[h].color:x._colorSet[h%x._colorSet.length],ut(i,t.axisX.reversed?y:a,s,t.axisX.reversed?a:y,f,o,0,null,g&&(t.axisY.reversed?0>m[h].y:0<=m[h].y),(t.axisY.reversed?0<=m[h].y:0>m[h].y)&&g,!1,!1,x.fillOpacity),o=x.dataPointIds[h],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:h,x1:a,y1:s,x2:y,y2:f},o=l(o),R&&ut(this._eventManager.ghostCtx,t.axisX.reversed?y:a,s,t.axisX.reversed?a:y,f,o,0,null,!1,!1,!1,!1),(m[h].indexLabel||x.indexLabel||m[h].indexLabelFormatter||x.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:m[h],dataSeries:x,point:{x:a+(y-a)/2,y:0>m[h].y===t.axisY.reversed?s:f},direction:0>m[h].y===t.axisY.reversed?1:-1,bounds:{x1:a,y1:Math.min(s,f),x2:y,y2:Math.max(s,f)},color:o})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.yScaleAnimation,easingFunction:K.easing.easeOutQuart,animationBase:d<t.axisY.bounds.y1?t.axisY.bounds.y1:d>t.axisY.bounds.y2?t.axisY.bounds.y2:d}}},e.prototype.renderStackedColumn=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n=null,o=this.plotArea,r=[],h=[],d=[],c=[],p=0,u=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),x=(p=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0),m=t.axisX.dataInfo.minDiff;for(isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:o.width*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&p>x&&(p=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<p&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,p)),m<p&&(m=p),m>x&&(m=x),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),x=0;x<t.dataSeriesIndexes.length;x++){var g=t.dataSeriesIndexes[x],f=this.data[g],y=f.dataPoints;if(0<y.length){var b=!!(5<m&&f.bevelEnabled);for(i.strokeStyle="#4572A7 ",p=0;p<y.length;p++)if(!((n=y[p].x.getTime?y[p].x.getTime():y[p].x)<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"===typeof y[p].y){var v,_=(a=(a=t.axisX.convertValueToPixel(n))-t.plotType.plotUnits.length*m/2+t.index*m<<0)+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<y[p].y)d[n]=y[p].y+(d[n]?d[n]:0),0<d[n]&&(s=t.axisY.convertValueToPixel(d[n]),v="undefined"!==typeof r[n]?r[n]:u,r[n]=s);else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=y[p].y)c[n]=y[p].y+(c[n]?c[n]:0),v=t.axisY.convertValueToPixel(c[n]),s="undefined"!==typeof h[n]?h[n]:u,h[n]=v;else if(s=t.axisY.convertValueToPixel(y[p].y),0<=y[p].y){var k="undefined"!==typeof r[n]?r[n]:0;s-=k,v=u-k,r[n]=k+(v-s)}else v=s+(k=h[n]?h[n]:0),s=u+k,h[n]=k+(v-s);n=y[p].color?y[p].color:f._colorSet[p%f._colorSet.length],ut(i,a,t.axisY.reversed?v:s,_,t.axisY.reversed?s:v,n,0,null,b&&(t.axisY.reversed?0>y[p].y:0<=y[p].y),(t.axisY.reversed?0<=y[p].y:0>y[p].y)&&b,!1,!1,f.fillOpacity),n=f.dataPointIds[p],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:p,x1:a,y1:s,x2:_,y2:v},n=l(n),R&&ut(this._eventManager.ghostCtx,a,s,_,v,n,0,null,!1,!1,!1,!1),(y[p].indexLabel||f.indexLabel||y[p].indexLabelFormatter||f.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:y[p],dataSeries:f,point:{x:a+(_-a)/2,y:0<=y[p].y?s:v},direction:0>y[p].y===t.axisY.reversed?1:-1,bounds:{x1:a,y1:Math.min(s,v),x2:_,y2:Math.max(s,v)},color:n})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.yScaleAnimation,easingFunction:K.easing.easeOutQuart,animationBase:u<t.axisY.bounds.y1?t.axisY.bounds.y1:u>t.axisY.bounds.y2?t.axisY.bounds.y2:u}}},e.prototype.renderStackedColumn100=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n=null,o=this.plotArea,r=[],h=[],d=[],c=[],p=0,u=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),x=(p=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.width<<0),m=t.axisX.dataInfo.minDiff;for(isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:o.width*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&p>x&&(p=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<p&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,p)),m<p&&(m=p),m>x&&(m=x),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),x=0;x<t.dataSeriesIndexes.length;x++){var g=t.dataSeriesIndexes[x],f=this.data[g],y=f.dataPoints;if(0<y.length){var b=!!(5<m&&f.bevelEnabled);for(p=0;p<y.length;p++)if(!((n=y[p].x.getTime?y[p].x.getTime():y[p].x)<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"===typeof y[p].y){a=t.axisX.convertValueToPixel(n),s=0!==t.dataPointYSums[n]?y[p].y/t.dataPointYSums[n]*100:0;var v,_=(a=a-t.plotType.plotUnits.length*m/2+t.index*m<<0)+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<y[p].y){if(d[n]=s+("undefined"!==typeof d[n]?d[n]:0),0>=d[n])continue;s=t.axisY.convertValueToPixel(d[n]),v=r[n]?r[n]:u,r[n]=s}else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=y[p].y)c[n]=s+("undefined"!==typeof c[n]?c[n]:0),v=t.axisY.convertValueToPixel(c[n]),s=h[n]?h[n]:u,h[n]=v;else if(s=t.axisY.convertValueToPixel(s),0<=y[p].y){var k="undefined"!==typeof r[n]?r[n]:0;s-=k,v=u-k,t.dataSeriesIndexes.length-1===x&&1>=Math.abs(o.y1-s)&&(s=o.y1),r[n]=k+(v-s)}else v=s+(k="undefined"!==typeof h[n]?h[n]:0),s=u+k,t.dataSeriesIndexes.length-1===x&&1>=Math.abs(o.y2-v)&&(v=o.y2),h[n]=k+(v-s);n=y[p].color?y[p].color:f._colorSet[p%f._colorSet.length],ut(i,a,t.axisY.reversed?v:s,_,t.axisY.reversed?s:v,n,0,null,b&&(t.axisY.reversed?0>y[p].y:0<=y[p].y),(t.axisY.reversed?0<=y[p].y:0>y[p].y)&&b,!1,!1,f.fillOpacity),n=f.dataPointIds[p],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:p,x1:a,y1:s,x2:_,y2:v},n=l(n),R&&ut(this._eventManager.ghostCtx,a,s,_,v,n,0,null,!1,!1,!1,!1),(y[p].indexLabel||f.indexLabel||y[p].indexLabelFormatter||f.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:y[p],dataSeries:f,point:{x:a+(_-a)/2,y:0<=y[p].y?s:v},direction:0>y[p].y===t.axisY.reversed?1:-1,bounds:{x1:a,y1:Math.min(s,v),x2:_,y2:Math.max(s,v)},color:n})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.yScaleAnimation,easingFunction:K.easing.easeOutQuart,animationBase:u<t.axisY.bounds.y1?t.axisY.bounds.y1:u>t.axisY.bounds.y2?t.axisY.bounds.y2:u}}},e.prototype.renderBar=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n,o=null,r=this.plotArea,h=0,d=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),c=(h=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,this.plotArea.height/t.plotType.totalDataSeries*.9)<<0),p=t.axisX.dataInfo.minDiff;for(isFinite(p)||(p=.3*Math.abs(t.axisX.range)),p=this.options.dataPointWidth?this.dataPointWidth:r.height*(t.axisX.logarithmic?Math.log(p)/Math.log(t.axisX.range):Math.abs(p)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&h>c&&(h=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,c)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c<h&&(c=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,h)),p<h&&(p=h),p>c&&(p=c),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(r.x1,r.y1,r.width,r.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip()),c=0;c<t.dataSeriesIndexes.length;c++){var u=t.dataSeriesIndexes[c],x=this.data[u],m=x.dataPoints;if(0<m.length){var g=!!(5<p&&x.bevelEnabled);for(i.strokeStyle="#4572A7 ",h=0;h<m.length;h++)if(!((n=m[h].getTime?m[h].x.getTime():m[h].x)<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"===typeof m[h].y){s=t.axisX.convertValueToPixel(n),a=t.axisY.convertValueToPixel(m[h].y),s=t.axisX.reversed?s+t.plotType.totalDataSeries*p/2-(t.previousDataSeriesCount+c)*p<<0:s-t.plotType.totalDataSeries*p/2+(t.previousDataSeriesCount+c)*p<<0;var f,y=t.axisX.reversed?s-p<<0:s+p<<0;0<=m[h].y?f=d:(f=a,a=d),o=m[h].color?m[h].color:x._colorSet[h%x._colorSet.length],ut(i,t.axisY.reversed?a:f,t.axisX.reversed?y:s,t.axisY.reversed?f:a,t.axisX.reversed?s:y,o,0,null,g,!1,!1,!1,x.fillOpacity),o=x.dataPointIds[h],this._eventManager.objectMap[o]={id:o,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:h,x1:f,y1:s,x2:a,y2:y},o=l(o),R&&ut(this._eventManager.ghostCtx,f,t.axisX.reversed?y:s,a,t.axisX.reversed?s:y,o,0,null,!1,!1,!1,!1),(m[h].indexLabel||x.indexLabel||m[h].indexLabelFormatter||x.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:m[h],dataSeries:x,point:{x:0<=m[h].y?a:f,y:s+(y-s)/2},direction:0>m[h].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(f,a),y1:s,x2:Math.max(f,a),y2:y},color:o})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.xScaleAnimation,easingFunction:K.easing.easeOutQuart,animationBase:d<t.axisY.bounds.x1?t.axisY.bounds.x1:d>t.axisY.bounds.x2?t.axisY.bounds.x2:d}}},e.prototype.renderStackedBar=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n=null,o=this.plotArea,r=[],h=[],d=[],c=[],p=0,u=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),x=(p=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0),m=t.axisX.dataInfo.minDiff;for(isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:o.height*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&p>x&&(p=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<p&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,p)),m<p&&(m=p),m>x&&(m=x),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),x=0;x<t.dataSeriesIndexes.length;x++){var g=t.dataSeriesIndexes[x],f=this.data[g],y=f.dataPoints;if(0<y.length){var b=!!(5<m&&f.bevelEnabled);for(i.strokeStyle="#4572A7 ",p=0;p<y.length;p++)if(!((n=y[p].x.getTime?y[p].x.getTime():y[p].x)<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"===typeof y[p].y){var v,_=(s=(s=t.axisX.convertValueToPixel(n))-t.plotType.plotUnits.length*m/2+t.index*m<<0)+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<y[p].y)d[n]=y[p].y+(d[n]?d[n]:0),0<d[n]&&(v=r[n]?r[n]:u,r[n]=a=t.axisY.convertValueToPixel(d[n]));else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=y[p].y)c[n]=y[p].y+(c[n]?c[n]:0),a=h[n]?h[n]:u,h[n]=v=t.axisY.convertValueToPixel(c[n]);else if(a=t.axisY.convertValueToPixel(y[p].y),0<=y[p].y){var k=r[n]?r[n]:0;v=u+k,a+=k,r[n]=k+(a-v)}else v=a-(k=h[n]?h[n]:0),a=u-k,h[n]=k+(a-v);n=y[p].color?y[p].color:f._colorSet[p%f._colorSet.length],ut(i,t.axisY.reversed?a:v,s,t.axisY.reversed?v:a,_,n,0,null,b,!1,!1,!1,f.fillOpacity),n=f.dataPointIds[p],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:p,x1:v,y1:s,x2:a,y2:_},n=l(n),R&&ut(this._eventManager.ghostCtx,v,s,a,_,n,0,null,!1,!1,!1,!1),(y[p].indexLabel||f.indexLabel||y[p].indexLabelFormatter||f.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:y[p],dataSeries:f,point:{x:0<=y[p].y?a:v,y:s+(_-s)/2},direction:0>y[p].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(v,a),y1:s,x2:Math.max(v,a),y2:_},color:n})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.xScaleAnimation,easingFunction:K.easing.easeOutQuart,animationBase:u<t.axisY.bounds.x1?t.axisY.bounds.x1:u>t.axisY.bounds.x2?t.axisY.bounds.x2:u}}},e.prototype.renderStackedBar100=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n=null,o=this.plotArea,r=[],h=[],d=[],c=[],p=0,u=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),x=(p=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.15*this.height<<0),m=t.axisX.dataInfo.minDiff;for(isFinite(m)||(m=.3*Math.abs(t.axisX.range)),m=this.options.dataPointWidth?this.dataPointWidth:o.height*(t.axisX.logarithmic?Math.log(m)/Math.log(t.axisX.range):Math.abs(m)/Math.abs(t.axisX.range))/t.plotType.plotUnits.length*.9<<0,this.dataPointMaxWidth&&p>x&&(p=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,x)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&x<p&&(x=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,p)),m<p&&(m=p),m>x&&(m=x),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.clip()),x=0;x<t.dataSeriesIndexes.length;x++){var g=t.dataSeriesIndexes[x],f=this.data[g],y=f.dataPoints;if(0<y.length){var b=!!(5<m&&f.bevelEnabled);for(i.strokeStyle="#4572A7 ",p=0;p<y.length;p++)if(!((n=y[p].x.getTime?y[p].x.getTime():y[p].x)<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&"number"===typeof y[p].y){var v;s=t.axisX.convertValueToPixel(n),v=0!==t.dataPointYSums[n]?y[p].y/t.dataPointYSums[n]*100:0;var _=(s=s-t.plotType.plotUnits.length*m/2+t.index*m<<0)+m<<0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0<y[p].y){if(d[n]=v+(d[n]?d[n]:0),0>=d[n])continue;v=r[n]?r[n]:u,r[n]=a=t.axisY.convertValueToPixel(d[n])}else if(t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length&&0>=y[p].y)c[n]=v+(c[n]?c[n]:0),a=h[n]?h[n]:u,h[n]=v=t.axisY.convertValueToPixel(c[n]);else if(a=t.axisY.convertValueToPixel(v),0<=y[p].y){var k=r[n]?r[n]:0;v=u+k,a+=k,t.dataSeriesIndexes.length-1===x&&1>=Math.abs(o.x2-a)&&(a=o.x2),r[n]=k+(a-v)}else v=a-(k=h[n]?h[n]:0),a=u-k,t.dataSeriesIndexes.length-1===x&&1>=Math.abs(o.x1-v)&&(v=o.x1),h[n]=k+(a-v);n=y[p].color?y[p].color:f._colorSet[p%f._colorSet.length],ut(i,t.axisY.reversed?a:v,s,t.axisY.reversed?v:a,_,n,0,null,b,!1,!1,!1,f.fillOpacity),n=f.dataPointIds[p],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:p,x1:v,y1:s,x2:a,y2:_},n=l(n),R&&ut(this._eventManager.ghostCtx,v,s,a,_,n,0,null,!1,!1,!1,!1),(y[p].indexLabel||f.indexLabel||y[p].indexLabelFormatter||f.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:y[p],dataSeries:f,point:{x:0<=y[p].y?a:v,y:s+(_-s)/2},direction:0>y[p].y===t.axisY.reversed?1:-1,bounds:{x1:Math.min(v,a),y1:s,x2:Math.max(v,a),y2:_},color:n})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.xScaleAnimation,easingFunction:K.easing.easeOutQuart,animationBase:u<t.axisY.bounds.x1?t.axisY.bounds.x1:u>t.axisY.bounds.x2?t.axisY.bounds.x2:u}}},e.prototype.renderArea=function(t){var e,i;function a(){M&&(0<x.lineThickness&&n.stroke(),t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?v=k:0>t.axisY.viewportMaximum?v=h.y1:0<t.axisY.viewportMinimum&&(v=k),n.lineTo(f,v),n.lineTo(M.x,v),n.closePath(),n.globalAlpha=x.fillOpacity,n.fill(),n.globalAlpha=1,R&&(r.lineTo(f,v),r.lineTo(M.x,v),r.closePath(),r.fill()),n.beginPath(),n.moveTo(f,y),r.beginPath(),r.moveTo(f,y),M={x:f,y:y})}var s=t.targetCanvasCtx||this.plotArea.ctx,n=R?this._preRenderCtx:s;if(!(0>=t.dataSeriesIndexes.length)){var o,r=this._eventManager.ghostCtx,h=t.axisY.lineCoordinates,d=[],c=this.plotArea;n.save(),R&&r.save(),n.beginPath(),n.rect(c.x1,c.y1,c.width,c.height),n.clip(),R&&(r.beginPath(),r.rect(c.x1,c.y1,c.width,c.height),r.clip());for(var p=0;p<t.dataSeriesIndexes.length;p++){var u=t.dataSeriesIndexes[p],x=this.data[u],g=x.dataPoints;d=x.id;this._eventManager.objectMap[d]={objectType:"dataSeries",dataSeriesIndex:u},d=l(d),r.fillStyle=d,d=[],e=!0;var f,y,b,v,_=0,k=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),M=null;if(0<g.length){var w=x._colorSet[_%x._colorSet.length],T=x.lineColor=x.options.lineColor||w,P=T;if(n.fillStyle=w,n.strokeStyle=T,n.lineWidth=x.lineThickness,i="solid",n.setLineDash){var C=m(x.nullDataLineDashType,x.lineThickness),S=m(i=x.lineDashType,x.lineThickness);n.setLineDash(S)}for(var A=!0;_<g.length;_++)if(!((b=g[_].x.getTime?g[_].x.getTime():g[_].x)<t.axisX.dataInfo.viewPortMin||b>t.axisX.dataInfo.viewPortMax&&(!x.connectNullData||!A)))if("number"!==typeof g[_].y)x.connectNullData||A||e||a(),A=!0;else{f=t.axisX.convertValueToPixel(b),y=t.axisY.convertValueToPixel(g[_].y),e||A?(!e&&x.connectNullData?(n.setLineDash&&(x.options.nullDataLineDashType||i===x.lineDashType&&x.lineDashType!==x.nullDataLineDashType)&&(e=f,i=y,f=o.x,y=o.y,a(),n.moveTo(o.x,o.y),f=e,y=i,M=o,i=x.nullDataLineDashType,n.setLineDash(C)),n.lineTo(f,y),R&&r.lineTo(f,y)):(n.beginPath(),n.moveTo(f,y),R&&(r.beginPath(),r.moveTo(f,y)),M={x:f,y:y}),A=e=!1):(n.lineTo(f,y),R&&r.lineTo(f,y),0==_%250&&a()),o={x:f,y:y},_<g.length-1&&(P!==(g[_].lineColor||T)||i!==(g[_].lineDashType||x.lineDashType))&&(a(),P=g[_].lineColor||T,n.strokeStyle=P,n.setLineDash&&(g[_].lineDashType?(i=g[_].lineDashType,n.setLineDash(m(i,x.lineThickness))):(i=x.lineDashType,n.setLineDash(S))));var L=x.dataPointIds[_];this._eventManager.objectMap[L]={id:L,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:_,x1:f,y1:y},0!==g[_].markerSize&&(0<g[_].markerSize||0<x.markerSize)&&(b=x.getMarkerProperties(_,f,y,n),d.push(b),L=l(L),R&&d.push({x:f,y:y,ctx:r,type:b.type,size:b.size,color:L,borderColor:L,borderThickness:b.borderThickness})),(g[_].indexLabel||x.indexLabel||g[_].indexLabelFormatter||x.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:g[_],dataSeries:x,point:{x:f,y:y},direction:0>g[_].y===t.axisY.reversed?1:-1,color:w})}a(),J.drawMarkers(d)}}return R&&(s.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:s,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderSplineArea=function(t){function e(){var e=i(_,2);if(0<e.length){if(0<p.lineThickness){s.beginPath(),s.moveTo(e[0].x,e[0].y),e[0].newStrokeStyle&&(s.strokeStyle=e[0].newStrokeStyle),e[0].newLineDashArray&&s.setLineDash(e[0].newLineDashArray);for(var a=0;a<e.length-3;a+=3)s.bezierCurveTo(e[a+1].x,e[a+1].y,e[a+2].x,e[a+2].y,e[a+3].x,e[a+3].y),R&&n.bezierCurveTo(e[a+1].x,e[a+1].y,e[a+2].x,e[a+2].y,e[a+3].x,e[a+3].y),(e[a+3].newStrokeStyle||e[a+3].newLineDashArray)&&(s.stroke(),s.beginPath(),s.moveTo(e[a+3].x,e[a+3].y),e[a+3].newStrokeStyle&&(s.strokeStyle=e[a+3].newStrokeStyle),e[a+3].newLineDashArray&&s.setLineDash(e[a+3].newLineDashArray));s.stroke()}for(s.beginPath(),s.moveTo(e[0].x,e[0].y),R&&(n.beginPath(),n.moveTo(e[0].x,e[0].y)),a=0;a<e.length-3;a+=3)s.bezierCurveTo(e[a+1].x,e[a+1].y,e[a+2].x,e[a+2].y,e[a+3].x,e[a+3].y),R&&n.bezierCurveTo(e[a+1].x,e[a+1].y,e[a+2].x,e[a+2].y,e[a+3].x,e[a+3].y);t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?f=b:0>t.axisY.viewportMaximum?f=o.y1:0<t.axisY.viewportMinimum&&(f=b),v={x:e[0].x,y:e[0].y},s.lineTo(e[e.length-1].x,f),s.lineTo(v.x,f),s.closePath(),s.globalAlpha=p.fillOpacity,s.fill(),s.globalAlpha=1,R&&(n.lineTo(e[e.length-1].x,f),n.lineTo(v.x,f),n.closePath(),n.fill())}}var a=t.targetCanvasCtx||this.plotArea.ctx,s=R?this._preRenderCtx:a;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,o=t.axisY.lineCoordinates,r=[],h=this.plotArea;s.save(),R&&n.save(),s.beginPath(),s.rect(h.x1,h.y1,h.width,h.height),s.clip(),R&&(n.beginPath(),n.rect(h.x1,h.y1,h.width,h.height),n.clip());for(var d=0;d<t.dataSeriesIndexes.length;d++){var c=t.dataSeriesIndexes[d],p=this.data[c],u=p.dataPoints;r=p.id;this._eventManager.objectMap[r]={objectType:"dataSeries",dataSeriesIndex:c},r=l(r),n.fillStyle=r;r=[];var x,g,f,y=0,b=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),v=null,_=[];if(0<u.length){var k=p._colorSet[y%p._colorSet.length],M=p.lineColor=p.options.lineColor||k,w=M;s.fillStyle=k,s.strokeStyle=M,s.lineWidth=p.lineThickness;var T="solid";if(s.setLineDash){var P=m(p.nullDataLineDashType,p.lineThickness),C=m(T=p.lineDashType,p.lineThickness);s.setLineDash(C)}for(g=!1;y<u.length;y++)if(!((x=u[y].x.getTime?u[y].x.getTime():u[y].x)<t.axisX.dataInfo.viewPortMin||x>t.axisX.dataInfo.viewPortMax&&(!p.connectNullData||!g)))if("number"!==typeof u[y].y)0<y&&!g&&(p.connectNullData?s.setLineDash&&0<_.length&&(p.options.nullDataLineDashType||!u[y-1].lineDashType)&&(_[_.length-1].newLineDashArray=P,T=p.nullDataLineDashType):(e(),_=[])),g=!0;else{x=t.axisX.convertValueToPixel(x),g=t.axisY.convertValueToPixel(u[y].y);var S=p.dataPointIds[y];if(this._eventManager.objectMap[S]={id:S,objectType:"dataPoint",dataSeriesIndex:c,dataPointIndex:y,x1:x,y1:g},_[_.length]={x:x,y:g},y<u.length-1&&(w!==(u[y].lineColor||M)||T!==(u[y].lineDashType||p.lineDashType))&&(w=u[y].lineColor||M,_[_.length-1].newStrokeStyle=w,s.setLineDash&&(u[y].lineDashType?(T=u[y].lineDashType,_[_.length-1].newLineDashArray=m(T,p.lineThickness)):(T=p.lineDashType,_[_.length-1].newLineDashArray=C))),0!==u[y].markerSize&&(0<u[y].markerSize||0<p.markerSize)){var A=p.getMarkerProperties(y,x,g,s);r.push(A),S=l(S),R&&r.push({x:x,y:g,ctx:n,type:A.type,size:A.size,color:S,borderColor:S,borderThickness:A.borderThickness})}(u[y].indexLabel||p.indexLabel||u[y].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:u[y],dataSeries:p,point:{x:x,y:g},direction:0>u[y].y===t.axisY.reversed?1:-1,color:k}),g=!1}e(),J.drawMarkers(r)}}return R&&(a.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&s.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&s.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.clearRect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.restore()),s.restore(),{source:a,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderStepArea=function(t){var e,i;function a(){M&&(0<x.lineThickness&&n.stroke(),t.axisY.logarithmic||0>=t.axisY.viewportMinimum&&0<=t.axisY.viewportMaximum?v=k:0>t.axisY.viewportMaximum?v=h.y1:0<t.axisY.viewportMinimum&&(v=k),n.lineTo(f,v),n.lineTo(M.x,v),n.closePath(),n.globalAlpha=x.fillOpacity,n.fill(),n.globalAlpha=1,R&&(r.lineTo(f,v),r.lineTo(M.x,v),r.closePath(),r.fill()),n.beginPath(),n.moveTo(f,y),r.beginPath(),r.moveTo(f,y),M={x:f,y:y})}var s=t.targetCanvasCtx||this.plotArea.ctx,n=R?this._preRenderCtx:s;if(!(0>=t.dataSeriesIndexes.length)){var o,r=this._eventManager.ghostCtx,h=t.axisY.lineCoordinates,d=[],c=this.plotArea;n.save(),R&&r.save(),n.beginPath(),n.rect(c.x1,c.y1,c.width,c.height),n.clip(),R&&(r.beginPath(),r.rect(c.x1,c.y1,c.width,c.height),r.clip());for(var p=0;p<t.dataSeriesIndexes.length;p++){var u=t.dataSeriesIndexes[p],x=this.data[u],g=x.dataPoints;d=x.id;this._eventManager.objectMap[d]={objectType:"dataSeries",dataSeriesIndex:u},d=l(d),r.fillStyle=d,d=[],e=!0;var f,y,b,v,_=0,k=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),M=null;if(i=!1,0<g.length){var w=x._colorSet[_%x._colorSet.length],T=x.lineColor=x.options.lineColor||w,P=T;n.fillStyle=w,n.strokeStyle=T,n.lineWidth=x.lineThickness;var C="solid";if(n.setLineDash){var S=m(x.nullDataLineDashType,x.lineThickness),A=m(C=x.lineDashType,x.lineThickness);n.setLineDash(A)}for(;_<g.length;_++)if(!((b=g[_].x.getTime?g[_].x.getTime():g[_].x)<t.axisX.dataInfo.viewPortMin||b>t.axisX.dataInfo.viewPortMax&&(!x.connectNullData||!i))){var L=y;"number"!==typeof g[_].y?(x.connectNullData||i||e||a(),i=!0):(f=t.axisX.convertValueToPixel(b),y=t.axisY.convertValueToPixel(g[_].y),e||i?(!e&&x.connectNullData?(n.setLineDash&&(x.options.nullDataLineDashType||C===x.lineDashType&&x.lineDashType!==x.nullDataLineDashType)&&(e=f,i=y,f=o.x,y=o.y,a(),n.moveTo(o.x,o.y),f=e,y=i,M=o,C=x.nullDataLineDashType,n.setLineDash(S)),n.lineTo(f,L),n.lineTo(f,y),R&&(r.lineTo(f,L),r.lineTo(f,y))):(n.beginPath(),n.moveTo(f,y),R&&(r.beginPath(),r.moveTo(f,y)),M={x:f,y:y}),i=e=!1):(n.lineTo(f,L),R&&r.lineTo(f,L),n.lineTo(f,y),R&&r.lineTo(f,y),0==_%250&&a()),o={x:f,y:y},_<g.length-1&&(P!==(g[_].lineColor||T)||C!==(g[_].lineDashType||x.lineDashType))&&(a(),P=g[_].lineColor||T,n.strokeStyle=P,n.setLineDash&&(g[_].lineDashType?(C=g[_].lineDashType,n.setLineDash(m(C,x.lineThickness))):(C=x.lineDashType,n.setLineDash(A)))),b=x.dataPointIds[_],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:_,x1:f,y1:y},0!==g[_].markerSize&&(0<g[_].markerSize||0<x.markerSize)&&(L=x.getMarkerProperties(_,f,y,n),d.push(L),b=l(b),R&&d.push({x:f,y:y,ctx:r,type:L.type,size:L.size,color:b,borderColor:b,borderThickness:L.borderThickness})),(g[_].indexLabel||x.indexLabel||g[_].indexLabelFormatter||x.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:g[_],dataSeries:x,point:{x:f,y:y},direction:0>g[_].y===t.axisY.reversed?1:-1,color:w}))}a(),J.drawMarkers(d)}}return R&&(s.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&n.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&n.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),n.clearRect(c.x1,c.y1,c.width,c.height),this._eventManager.ghostCtx.restore()),n.restore(),{source:s,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderStackedArea=function(t){function e(){if(!(1>f.length)){for(0<T.lineThickness&&a.stroke();0<f.length;){var t=f.pop();a.lineTo(t.x,t.y),R&&k.lineTo(t.x,t.y)}a.closePath(),a.globalAlpha=T.fillOpacity,a.fill(),a.globalAlpha=1,a.beginPath(),R&&(k.closePath(),k.fill(),k.beginPath()),f=[]}}var i=t.targetCanvasCtx||this.plotArea.ctx,a=R?this._preRenderCtx:i;if(!(0>=t.dataSeriesIndexes.length)){var s,n,o,r,d,c=null,p=null,u=[],x=this.plotArea,g=[],f=[],y=[],b=[],v=0,_=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),k=this._eventManager.ghostCtx;R&&k.beginPath(),a.save(),R&&k.save(),a.beginPath(),a.rect(x.x1,x.y1,x.width,x.height),a.clip(),R&&(k.beginPath(),k.rect(x.x1,x.y1,x.width,x.height),k.clip());c=[];for(var M=0;M<t.dataSeriesIndexes.length;M++){var w=t.dataSeriesIndexes[M],T=this.data[w],P=T.dataPoints;for(T.dataPointIndexes=[],v=0;v<P.length;v++)w=P[v].x.getTime?P[v].x.getTime():P[v].x,T.dataPointIndexes[w]=v,c[w]||(y.push(w),c[w]=!0);y.sort(h)}for(M=0;M<t.dataSeriesIndexes.length;M++){if(w=t.dataSeriesIndexes[M],P=(T=this.data[w]).dataPoints,r=!0,f=[],v=T.id,this._eventManager.objectMap[v]={objectType:"dataSeries",dataSeriesIndex:w},v=l(v),k.fillStyle=v,0<y.length){c=T._colorSet[0];var C=T.lineColor=T.options.lineColor||c,S=C;if(a.fillStyle=c,a.strokeStyle=C,a.lineWidth=T.lineThickness,d="solid",a.setLineDash){var A=m(T.nullDataLineDashType,T.lineThickness),L=m(d=T.lineDashType,T.lineThickness);a.setLineDash(L)}var B=!0;for(v=0;v<y.length;v++){p=y[v];var F=0<=T.dataPointIndexes[p]?P[T.dataPointIndexes[p]]:{x:p,y:null};if(!(p<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax&&(!T.connectNullData||!B)))if("number"!==typeof F.y)T.connectNullData||B||r||e(),B=!0;else{s=t.axisX.convertValueToPixel(p);var I=g[p]?g[p]:0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length){if(b[p]=F.y+(b[p]?b[p]:0),0>=b[p]&&t.axisY.logarithmic)continue;n=t.axisY.convertValueToPixel(b[p])}else n=t.axisY.convertValueToPixel(F.y),n-=I;if(f.push({x:s,y:_-I}),g[p]=_-n,r||B?(!r&&T.connectNullData?(a.setLineDash&&(T.options.nullDataLineDashType||d===T.lineDashType&&T.lineDashType!==T.nullDataLineDashType)&&(r=f.pop(),d=f[f.length-1],e(),a.moveTo(o.x,o.y),f.push(d),f.push(r),d=T.nullDataLineDashType,a.setLineDash(A)),a.lineTo(s,n),R&&k.lineTo(s,n)):(a.beginPath(),a.moveTo(s,n),R&&(k.beginPath(),k.moveTo(s,n))),B=r=!1):(a.lineTo(s,n),R&&k.lineTo(s,n),0==v%250&&(e(),a.moveTo(s,n),R&&k.moveTo(s,n),f.push({x:s,y:_-I}))),o={x:s,y:n},v<P.length-1&&(S!==(P[v].lineColor||C)||d!==(P[v].lineDashType||T.lineDashType))&&(e(),a.beginPath(),a.moveTo(s,n),f.push({x:s,y:_-I}),S=P[v].lineColor||C,a.strokeStyle=S,a.setLineDash&&(P[v].lineDashType?(d=P[v].lineDashType,a.setLineDash(m(d,T.lineThickness))):(d=T.lineDashType,a.setLineDash(L)))),0<=T.dataPointIndexes[p]){var z=T.dataPointIds[T.dataPointIndexes[p]];this._eventManager.objectMap[z]={id:z,objectType:"dataPoint",dataSeriesIndex:w,dataPointIndex:T.dataPointIndexes[p],x1:s,y1:n}}0<=T.dataPointIndexes[p]&&0!==F.markerSize&&(0<F.markerSize||0<T.markerSize)&&(I=T.getMarkerProperties(T.dataPointIndexes[p],s,n,a),u.push(I),p=l(z),R&&u.push({x:s,y:n,ctx:k,type:I.type,size:I.size,color:p,borderColor:p,borderThickness:I.borderThickness})),(F.indexLabel||T.indexLabel||F.indexLabelFormatter||T.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:F,dataSeries:T,point:{x:s,y:n},direction:0>P[v].y===t.axisY.reversed?1:-1,color:c})}}e(),a.moveTo(s,n),R&&k.moveTo(s,n)}delete T.dataPointIndexes}return J.drawMarkers(u),R&&(i.drawImage(this._preRenderCanvas,0,0,this.width,this.height),a.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&a.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&a.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),a.clearRect(x.x1,x.y1,x.width,x.height),k.restore()),a.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderStackedArea100=function(t){function e(){for(0<T.lineThickness&&a.stroke();0<f.length;){var t=f.pop();a.lineTo(t.x,t.y),R&&k.lineTo(t.x,t.y)}a.closePath(),a.globalAlpha=T.fillOpacity,a.fill(),a.globalAlpha=1,a.beginPath(),R&&(k.closePath(),k.fill(),k.beginPath()),f=[]}var i=t.targetCanvasCtx||this.plotArea.ctx,a=R?this._preRenderCtx:i;if(!(0>=t.dataSeriesIndexes.length)){var s,n,o,r,d,c=null,p=null,u=this.plotArea,x=[],g=[],f=[],y=[],b=[],v=0,_=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0),k=this._eventManager.ghostCtx;a.save(),R&&k.save(),a.beginPath(),a.rect(u.x1,u.y1,u.width,u.height),a.clip(),R&&(k.beginPath(),k.rect(u.x1,u.y1,u.width,u.height),k.clip());c=[];for(var M=0;M<t.dataSeriesIndexes.length;M++){var w=t.dataSeriesIndexes[M],T=this.data[w],P=T.dataPoints;for(T.dataPointIndexes=[],v=0;v<P.length;v++)w=P[v].x.getTime?P[v].x.getTime():P[v].x,T.dataPointIndexes[w]=v,c[w]||(y.push(w),c[w]=!0);y.sort(h)}for(M=0;M<t.dataSeriesIndexes.length;M++){if(w=t.dataSeriesIndexes[M],P=(T=this.data[w]).dataPoints,r=!0,c=T.id,this._eventManager.objectMap[c]={objectType:"dataSeries",dataSeriesIndex:w},c=l(c),k.fillStyle=c,f=[],0<y.length){c=T._colorSet[v%T._colorSet.length];var C=T.lineColor=T.options.lineColor||c,S=C;if(a.fillStyle=c,a.strokeStyle=C,a.lineWidth=T.lineThickness,d="solid",a.setLineDash){var A=m(T.nullDataLineDashType,T.lineThickness),L=m(d=T.lineDashType,T.lineThickness);a.setLineDash(L)}var B=!0;for(v=0;v<y.length;v++){p=y[v];var F=0<=T.dataPointIndexes[p]?P[T.dataPointIndexes[p]]:{x:p,y:null};if(!(p<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax&&(!T.connectNullData||!B)))if("number"!==typeof F.y)T.connectNullData||B||r||e(),B=!0;else{var I;I=0!==t.dataPointYSums[p]?F.y/t.dataPointYSums[p]*100:0,s=t.axisX.convertValueToPixel(p);var z=g[p]?g[p]:0;if(t.axisY.logarithmic||t.axisY.scaleBreaks&&0<t.axisY.scaleBreaks._appliedBreaks.length){if(b[p]=I+(b[p]?b[p]:0),0>=b[p]&&t.axisY.logarithmic)continue;n=t.axisY.convertValueToPixel(b[p])}else n=t.axisY.convertValueToPixel(I),n-=z;if(f.push({x:s,y:_-z}),g[p]=_-n,r||B?(!r&&T.connectNullData?(a.setLineDash&&(T.options.nullDataLineDashType||d===T.lineDashType&&T.lineDashType!==T.nullDataLineDashType)&&(r=f.pop(),d=f[f.length-1],e(),a.moveTo(o.x,o.y),f.push(d),f.push(r),d=T.nullDataLineDashType,a.setLineDash(A)),a.lineTo(s,n),R&&k.lineTo(s,n)):(a.beginPath(),a.moveTo(s,n),R&&(k.beginPath(),k.moveTo(s,n))),B=r=!1):(a.lineTo(s,n),R&&k.lineTo(s,n),0==v%250&&(e(),a.moveTo(s,n),R&&k.moveTo(s,n),f.push({x:s,y:_-z}))),o={x:s,y:n},v<P.length-1&&(S!==(P[v].lineColor||C)||d!==(P[v].lineDashType||T.lineDashType))&&(e(),a.beginPath(),a.moveTo(s,n),f.push({x:s,y:_-z}),S=P[v].lineColor||C,a.strokeStyle=S,a.setLineDash&&(P[v].lineDashType?(d=P[v].lineDashType,a.setLineDash(m(d,T.lineThickness))):(d=T.lineDashType,a.setLineDash(L)))),0<=T.dataPointIndexes[p]){var V=T.dataPointIds[T.dataPointIndexes[p]];this._eventManager.objectMap[V]={id:V,objectType:"dataPoint",dataSeriesIndex:w,dataPointIndex:T.dataPointIndexes[p],x1:s,y1:n}}0<=T.dataPointIndexes[p]&&0!==F.markerSize&&(0<F.markerSize||0<T.markerSize)&&(z=T.getMarkerProperties(v,s,n,a),x.push(z),p=l(V),R&&x.push({x:s,y:n,ctx:k,type:z.type,size:z.size,color:p,borderColor:p,borderThickness:z.borderThickness})),(F.indexLabel||T.indexLabel||F.indexLabelFormatter||T.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:F,dataSeries:T,point:{x:s,y:n},direction:0>P[v].y===t.axisY.reversed?1:-1,color:c})}}e(),a.moveTo(s,n),R&&k.moveTo(s,n)}delete T.dataPointIndexes}return J.drawMarkers(x),R&&(i.drawImage(this._preRenderCanvas,0,0,this.width,this.height),a.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&a.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&a.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),a.clearRect(u.x1,u.y1,u.width,u.height),k.restore()),a.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderBubble=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n=this.plotArea,o=0;i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(n.x1,n.y1,n.width,n.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(n.x1,n.y1,n.width,n.height),this._eventManager.ghostCtx.clip());for(var r=-1/0,h=1/0,d=0;d<t.dataSeriesIndexes.length;d++){var c=t.dataSeriesIndexes[d],p=this.data[c],u=p.dataPoints,x=0;for(o=0;o<u.length;o++)(a=a=u[o].getTime?u[o].x.getTime():u[o].x)<t.axisX.dataInfo.viewPortMin||a>t.axisX.dataInfo.viewPortMax||"undefined"===typeof u[o].z||((x=u[o].z)>r&&(r=x),x<h&&(h=x))}var m=25*Math.PI,g=Math.max(Math.pow(.25*Math.min(n.height,n.width)/2,2)*Math.PI,m);for(d=0;d<t.dataSeriesIndexes.length;d++)if(c=t.dataSeriesIndexes[d],0<(u=(p=this.data[c]).dataPoints).length)for(i.strokeStyle="#4572A7 ",o=0;o<u.length;o++)if(!((a=a=u[o].getTime?u[o].x.getTime():u[o].x)<t.axisX.dataInfo.viewPortMin||a>t.axisX.dataInfo.viewPortMax)&&"number"===typeof u[o].y){a=t.axisX.convertValueToPixel(a),s=t.axisY.convertValueToPixel(u[o].y);x=u[o].z;var f=2*Math.max(Math.sqrt((r===h?g/2:m+(g-m)/(r-h)*(x-h))/Math.PI)<<0,1);(x=p.getMarkerProperties(o,i)).size=f,i.globalAlpha=p.fillOpacity,J.drawMarker(a,s,i,x.type,x.size,x.color,x.borderColor,x.borderThickness),i.globalAlpha=1;var y=p.dataPointIds[o];this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:c,dataPointIndex:o,x1:a,y1:s,size:f},f=l(y),R&&J.drawMarker(a,s,this._eventManager.ghostCtx,x.type,x.size,f,f,x.borderThickness),(u[o].indexLabel||p.indexLabel||u[o].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:u[o],dataSeries:p,point:{x:a,y:s},direction:1,bounds:{x1:a-x.size/2,y1:s-x.size/2,x2:a+x.size/2,y2:s+x.size/2},color:null})}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(n.x1,n.y1,n.width,n.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}},e.prototype.renderScatter=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n=this.plotArea,o=0;i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(n.x1,n.y1,n.width,n.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(n.x1,n.y1,n.width,n.height),this._eventManager.ghostCtx.clip());for(var r=0;r<t.dataSeriesIndexes.length;r++){var h=t.dataSeriesIndexes[r],d=this.data[h],c=d.dataPoints;if(0<c.length){i.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(n.height,n.width)/2,2);var p=0,u=0;for(o=0;o<c.length;o++)if(!((a=a=c[o].getTime?c[o].x.getTime():c[o].x)<t.axisX.dataInfo.viewPortMin||a>t.axisX.dataInfo.viewPortMax)&&"number"===typeof c[o].y){a=t.axisX.convertValueToPixel(a),s=t.axisY.convertValueToPixel(c[o].y);var x=d.getMarkerProperties(o,a,s,i);i.globalAlpha=d.fillOpacity,J.drawMarker(x.x,x.y,x.ctx,x.type,x.size,x.color,x.borderColor,x.borderThickness),i.globalAlpha=1,Math.sqrt((p-a)*(p-a)+(u-s)*(u-s))<Math.min(x.size,5)&&c.length>Math.min(this.plotArea.width,this.plotArea.height)||(p=d.dataPointIds[o],this._eventManager.objectMap[p]={id:p,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:a,y1:s},p=l(p),R&&J.drawMarker(x.x,x.y,this._eventManager.ghostCtx,x.type,x.size,p,p,x.borderThickness),(c[o].indexLabel||d.indexLabel||c[o].indexLabelFormatter||d.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:c[o],dataSeries:d,point:{x:a,y:s},direction:1,bounds:{x1:a-x.size/2,y1:s-x.size/2,x2:a+x.size/2,y2:s+x.size/2},color:null}),p=a,u=s)}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(n.x1,n.y1,n.width,n.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}},e.prototype.renderCandlestick=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e,a=this._eventManager.ghostCtx;if(!(0>=t.dataSeriesIndexes.length)){var s,n,o,r,h,d,p=null,u=null,x=this.plotArea,m=0,g=(p=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,u=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,t.axisX.dataInfo.minDiff);isFinite(g)||(g=.3*Math.abs(t.axisX.range)),g=this.options.dataPointWidth?this.dataPointWidth:.7*x.width*(t.axisX.logarithmic?Math.log(g)/Math.log(t.axisX.range):Math.abs(g)/Math.abs(t.axisX.range))<<0,this.dataPointMaxWidth&&p>u&&(p=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,u)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&u<p&&(u=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,p)),g<p&&(g=p),g>u&&(g=u),i.save(),R&&a.save(),i.beginPath(),i.rect(x.x1,x.y1,x.width,x.height),i.clip(),R&&(a.beginPath(),a.rect(x.x1,x.y1,x.width,x.height),a.clip());for(var f=0;f<t.dataSeriesIndexes.length;f++){var y=t.dataSeriesIndexes[f],b=this.data[y],v=b.dataPoints;if(0<v.length){var _=!!(5<g&&b.bevelEnabled);for(m=0;m<v.length;m++)if(!((d=v[m].getTime?v[m].x.getTime():v[m].x)<t.axisX.dataInfo.viewPortMin||d>t.axisX.dataInfo.viewPortMax)&&!c(v[m].y)&&v[m].y.length&&"number"===typeof v[m].y[0]&&"number"===typeof v[m].y[1]&&"number"===typeof v[m].y[2]&&"number"===typeof v[m].y[3]){s=t.axisX.convertValueToPixel(d),n=t.axisY.convertValueToPixel(v[m].y[0]),o=t.axisY.convertValueToPixel(v[m].y[1]),r=t.axisY.convertValueToPixel(v[m].y[2]),h=t.axisY.convertValueToPixel(v[m].y[3]);var k=s-g/2<<0,M=k+g<<0,w=(u=b.options.fallingColor?b.fallingColor:b._colorSet[0],p=v[m].color?v[m].color:b._colorSet[0],Math.round(Math.max(1,.15*g))),T=0===w%2?0:.5,P=b.dataPointIds[m];this._eventManager.objectMap[P]={id:P,objectType:"dataPoint",dataSeriesIndex:y,dataPointIndex:m,x1:k,y1:n,x2:M,y2:o,x3:s,y3:r,x4:s,y4:h,borderThickness:w,color:p},i.strokeStyle=p,i.beginPath(),i.lineWidth=w,a.lineWidth=Math.max(w,4),"candlestick"===b.type?(i.moveTo(s-T,o),i.lineTo(s-T,Math.min(n,h)),i.stroke(),i.moveTo(s-T,Math.max(n,h)),i.lineTo(s-T,r),i.stroke(),ut(i,k,Math.min(n,h),M,Math.max(n,h),v[m].y[0]<=v[m].y[3]?b.risingColor:u,w,p,_,_,!1,!1,b.fillOpacity),R&&(p=l(P),a.strokeStyle=p,a.moveTo(s-T,o),a.lineTo(s-T,Math.min(n,h)),a.stroke(),a.moveTo(s-T,Math.max(n,h)),a.lineTo(s-T,r),a.stroke(),ut(a,k,Math.min(n,h),M,Math.max(n,h),p,0,null,!1,!1,!1,!1))):"ohlc"===b.type&&(i.moveTo(s-T,o),i.lineTo(s-T,r),i.stroke(),i.beginPath(),i.moveTo(s,n),i.lineTo(k,n),i.stroke(),i.beginPath(),i.moveTo(s,h),i.lineTo(M,h),i.stroke(),R&&(p=l(P),a.strokeStyle=p,a.moveTo(s-T,o),a.lineTo(s-T,r),a.stroke(),a.beginPath(),a.moveTo(s,n),a.lineTo(k,n),a.stroke(),a.beginPath(),a.moveTo(s,h),a.lineTo(M,h),a.stroke())),(v[m].indexLabel||b.indexLabel||v[m].indexLabelFormatter||b.indexLabelFormatter)&&this._indexLabels.push({chartType:b.type,dataPoint:v[m],dataSeries:b,point:{x:k+(M-k)/2,y:t.axisY.reversed?r:o},direction:1,bounds:{x1:k,y1:Math.min(o,r),x2:M,y2:Math.max(o,r)},color:p})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(x.x1,x.y1,x.width,x.height),a.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}},e.prototype.renderBoxAndWhisker=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e,a=this._eventManager.ghostCtx;if(!(0>=t.dataSeriesIndexes.length)){var s,n,o,r,h,d,p,u=null,x=this.plotArea,g=0,f=(u=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,g=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.015*this.width,t.axisX.dataInfo.minDiff);isFinite(f)||(f=.3*Math.abs(t.axisX.range)),f=this.options.dataPointWidth?this.dataPointWidth:.7*x.width*(t.axisX.logarithmic?Math.log(f)/Math.log(t.axisX.range):Math.abs(f)/Math.abs(t.axisX.range))<<0,this.dataPointMaxWidth&&u>g&&(u=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,g)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&g<u&&(g=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,u)),f<u&&(f=u),f>g&&(f=g),i.save(),R&&a.save(),i.beginPath(),i.rect(x.x1,x.y1,x.width,x.height),i.clip(),R&&(a.beginPath(),a.rect(x.x1,x.y1,x.width,x.height),a.clip());for(var y=!!t.axisY.reversed,b=0;b<t.dataSeriesIndexes.length;b++){var v=t.dataSeriesIndexes[b],_=this.data[v],k=_.dataPoints;if(0<k.length){var M=!!(5<f&&_.bevelEnabled);for(g=0;g<k.length;g++)if(!((p=k[g].getTime?k[g].x.getTime():k[g].x)<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax)&&!c(k[g].y)&&k[g].y.length&&"number"===typeof k[g].y[0]&&"number"===typeof k[g].y[1]&&"number"===typeof k[g].y[2]&&"number"===typeof k[g].y[3]&&"number"===typeof k[g].y[4]&&5===k[g].y.length){s=t.axisX.convertValueToPixel(p),n=t.axisY.convertValueToPixel(k[g].y[0]),o=t.axisY.convertValueToPixel(k[g].y[1]),r=t.axisY.convertValueToPixel(k[g].y[2]),h=t.axisY.convertValueToPixel(k[g].y[3]),d=t.axisY.convertValueToPixel(k[g].y[4]);var w=s-f/2<<0,T=s+f/2<<0,P=(u=k[g].color?k[g].color:_._colorSet[0],Math.round(Math.max(1,.15*f))),C=0===P%2?0:.5,S=k[g].whiskerColor?k[g].whiskerColor:k[g].color?_.whiskerColor?_.whiskerColor:k[g].color:_.whiskerColor?_.whiskerColor:u,A="number"===typeof k[g].whiskerThickness?k[g].whiskerThickness:"number"===typeof _.options.whiskerThickness?_.whiskerThickness:P,L=k[g].whiskerDashType?k[g].whiskerDashType:_.whiskerDashType,B="number"===typeof(B=c(k[g].whiskerLength)?c(_.options.whiskerLength)?f:_.whiskerLength:k[g].whiskerLength)?0>=B?0:B>=f?f:B:"string"===typeof B?parseInt(B)*f/100>f?f:parseInt(B)*f/100:f,F=1===Math.round(A)%2?.5:0,I=k[g].stemColor?k[g].stemColor:k[g].color?_.stemColor?_.stemColor:k[g].color:_.stemColor?_.stemColor:u,z="number"===typeof k[g].stemThickness?k[g].stemThickness:"number"===typeof _.options.stemThickness?_.stemThickness:P,V=1===Math.round(z)%2?.5:0,D=k[g].stemDashType?k[g].stemDashType:_.stemDashType,W=k[g].lineColor?k[g].lineColor:k[g].color?_.lineColor?_.lineColor:k[g].color:_.lineColor?_.lineColor:u,E="number"===typeof k[g].lineThickness?k[g].lineThickness:"number"===typeof _.options.lineThickness?_.lineThickness:P,X=k[g].lineDashType?k[g].lineDashType:_.lineDashType,O=1===Math.round(E)%2?.5:0,Y=_.upperBoxColor,N=_.lowerBoxColor,H=c(_.options.fillOpacity)?1:_.fillOpacity,Z=_.dataPointIds[g];this._eventManager.objectMap[Z]={id:Z,objectType:"dataPoint",dataSeriesIndex:v,dataPointIndex:g,x1:w,y1:n,x2:T,y2:o,x3:s,y3:r,x4:s,y4:h,y5:d,borderThickness:P,color:u,stemThickness:z,stemColor:I,whiskerThickness:A,whiskerLength:B,whiskerColor:S,lineThickness:E,lineColor:W},i.save(),0<z&&(i.beginPath(),i.strokeStyle=I,i.lineWidth=z,i.setLineDash&&i.setLineDash(m(D,z)),i.moveTo(s-V,o),i.lineTo(s-V,n),i.stroke(),i.moveTo(s-V,h),i.lineTo(s-V,r),i.stroke()),i.restore(),a.lineWidth=Math.max(P,4),i.beginPath(),ut(i,w,Math.min(d,o),T,Math.max(o,d),N,0,u,!!y&&M,!y&&M,!1,!1,H),i.beginPath(),ut(i,w,Math.min(r,d),T,Math.max(d,r),Y,0,u,!y&&M,!!y&&M,!1,!1,H),i.beginPath(),i.lineWidth=P,i.strokeStyle=u,i.rect(w-C,Math.min(o,r)-C,T-w+2*C,Math.max(o,r)-Math.min(o,r)+2*C),i.stroke(),i.save(),0<E&&(i.beginPath(),i.globalAlpha=1,i.setLineDash&&i.setLineDash(m(X,E)),i.strokeStyle=W,i.lineWidth=E,i.moveTo(w,d-O),i.lineTo(T,d-O),i.stroke()),i.restore(),i.save(),0<A&&(i.beginPath(),i.setLineDash&&i.setLineDash(m(L,A)),i.strokeStyle=S,i.lineWidth=A,i.moveTo(s-B/2<<0,h-F),i.lineTo(s+B/2<<0,h-F),i.stroke(),i.moveTo(s-B/2<<0,n+F),i.lineTo(s+B/2<<0,n+F),i.stroke()),i.restore(),R&&(u=l(Z),a.strokeStyle=u,a.lineWidth=z,0<z&&(a.moveTo(s-C-V,o),a.lineTo(s-C-V,Math.max(n,h)),a.stroke(),a.moveTo(s-C-V,Math.min(n,h)),a.lineTo(s-C-V,r),a.stroke()),ut(a,w,Math.max(o,r),T,Math.min(o,r),u,0,null,!1,!1,!1,!1),0<A&&(a.beginPath(),a.lineWidth=A,a.moveTo(s+B/2,h-F),a.lineTo(s-B/2,h-F),a.stroke(),a.moveTo(s+B/2,n+F),a.lineTo(s-B/2,n+F),a.stroke())),(k[g].indexLabel||_.indexLabel||k[g].indexLabelFormatter||_.indexLabelFormatter)&&this._indexLabels.push({chartType:_.type,dataPoint:k[g],dataSeries:_,point:{x:w+(T-w)/2,y:t.axisY.reversed?n:h},direction:1,bounds:{x1:w,y1:Math.min(n,h),x2:T,y2:Math.max(n,h)},color:u})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(x.x1,x.y1,x.width,x.height),a.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}},e.prototype.renderRangeColumn=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n,o=null,r=this.plotArea,h=0;h=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;a=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:.03*this.width;var d=t.axisX.dataInfo.minDiff;isFinite(d)||(d=.3*Math.abs(t.axisX.range)),d=this.options.dataPointWidth?this.dataPointWidth:r.width*(t.axisX.logarithmic?Math.log(d)/Math.log(t.axisX.range):Math.abs(d)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&h>a&&(h=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,a)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&a<h&&(a=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,h)),d<h&&(d=h),d>a&&(d=a),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(r.x1,r.y1,r.width,r.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var p=0;p<t.dataSeriesIndexes.length;p++){var u=t.dataSeriesIndexes[p],x=this.data[u],m=x.dataPoints;if(0<m.length){var g=!!(5<d&&x.bevelEnabled);for(h=0;h<m.length;h++)if(!((n=m[h].getTime?m[h].x.getTime():m[h].x)<t.axisX.dataInfo.viewPortMin||n>t.axisX.dataInfo.viewPortMax)&&!c(m[h].y)&&m[h].y.length&&"number"===typeof m[h].y[0]&&"number"===typeof m[h].y[1]){o=t.axisX.convertValueToPixel(n),a=t.axisY.convertValueToPixel(m[h].y[0]),s=t.axisY.convertValueToPixel(m[h].y[1]);var f=t.axisX.reversed?o+t.plotType.totalDataSeries*d/2-(t.previousDataSeriesCount+p)*d<<0:o-t.plotType.totalDataSeries*d/2+(t.previousDataSeriesCount+p)*d<<0,y=t.axisX.reversed?f-d<<0:f+d<<0;o=m[h].color?m[h].color:x._colorSet[h%x._colorSet.length];if(a>s){var b=a;a=s,s=b}b=x.dataPointIds[h],this._eventManager.objectMap[b]={id:b,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:h,x1:f,y1:a,x2:y,y2:s},ut(i,t.axisX.reversed?y:f,a,t.axisX.reversed?f:y,s,o,0,o,g,g,!1,!1,x.fillOpacity),o=l(b),R&&ut(this._eventManager.ghostCtx,t.axisX.reversed?y:f,a,t.axisX.reversed?f:y,s,o,0,null,!1,!1,!1,!1),(m[h].indexLabel||x.indexLabel||m[h].indexLabelFormatter||x.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:m[h],dataSeries:x,indexKeyword:0,point:{x:f+(y-f)/2,y:m[h].y[1]>=m[h].y[0]?s:a},direction:m[h].y[1]>=m[h].y[0]?-1:1,bounds:{x1:f,y1:Math.min(a,s),x2:y,y2:Math.max(a,s)},color:o}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:m[h],dataSeries:x,indexKeyword:1,point:{x:f+(y-f)/2,y:m[h].y[1]>=m[h].y[0]?a:s},direction:m[h].y[1]>=m[h].y[0]?1:-1,bounds:{x1:f,y1:Math.min(a,s),x2:y,y2:Math.max(a,s)},color:o}))}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}},e.prototype.renderError=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e,a=!!t.axisY._position&&("left"!==t.axisY._position&&"right"!==t.axisY._position);if(!(0>=t.dataSeriesIndexes.length)){var s,o,r,h,l,d,p,u=null,x=!1,m=this.plotArea,g=0,f=t.axisX.dataInfo.minDiff;isFinite(f)||(f=.3*Math.abs(t.axisX.range)),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(m.x1,m.y1,m.width,m.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(m.x1,m.y1,m.width,m.height),this._eventManager.ghostCtx.clip());for(var y=0,b=0;b<this.data.length;b++)!this.data[b].type.match(/(bar|column)/gi)||!this.data[b].visible||this.data[b].type.match(/(stacked)/gi)&&y||y++;for(var v=0;v<t.dataSeriesIndexes.length;v++){var _=t.dataSeriesIndexes[v],k=this.data[_],M=k.dataPoints,w=!c(k._linkedSeries)&&!(!k._linkedSeries.type.match(/(bar|column)/gi)||!k._linkedSeries.visible),T=0;if(w)for(u=k._linkedSeries.id,b=0;b<u;b++)!this.data[b].type.match(/(bar|column)/gi)||!this.data[b].visible||this.data[b].type.match(/(stacked)/gi)&&T||(this.data[b].type.match(/(range)/gi)&&(x=!0),T++);if(u=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1,g=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:a?Math.min(.15*this.height,this.plotArea.height/(w?y:1)*.9)<<0:.3*this.width,x&&(g=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:a?Math.min(.15*this.height,this.plotArea.height/(w?y:1)*.9)<<0:.03*this.width),b=this.options.dataPointWidth?this.dataPointWidth:(a?m.height:m.width)*(t.axisX.logarithmic?Math.log(f)/Math.log(t.axisX.range):Math.abs(f)/Math.abs(t.axisX.range))/(w?y:1)*.9<<0,this.dataPointMaxWidth&&u>g&&(u=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,g)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&g<u&&(g=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,u)),b<u&&(b=u),b>g&&(b=g),0<M.length){var P=k._colorSet;for(g=0;g<M.length;g++){u=k.lineColor=k.options.color?k.options.color:P[0];var C={color:M[g].whiskerColor?M[g].whiskerColor:M[g].color?k.whiskerColor?k.whiskerColor:M[g].color:k.whiskerColor?k.whiskerColor:u,thickness:c(M[g].whiskerThickness)?k.whiskerThickness:M[g].whiskerThickness,dashType:M[g].whiskerDashType?M[g].whiskerDashType:k.whiskerDashType,length:c(M[g].whiskerLength)?c(k.options.whiskerLength)?b:k.options.whiskerLength:M[g].whiskerLength,trimLength:c(M[g].whiskerLength)&&c(k.options.whiskerLength)?50:0};C.length="number"===typeof C.length?0>=C.length?0:C.length>=b?b:C.length:"string"===typeof C.length?parseInt(C.length)*b/100>b?b:parseInt(C.length)*b/100>b:b,C.thickness="number"===typeof C.thickness?0>C.thickness?0:Math.round(C.thickness):2;var S={color:M[g].stemColor?M[g].stemColor:M[g].color?k.stemColor?k.stemColor:M[g].color:k.stemColor?k.stemColor:u,thickness:M[g].stemThickness?M[g].stemThickness:k.stemThickness,dashType:M[g].stemDashType?M[g].stemDashType:k.stemDashType};if(S.thickness="number"===typeof S.thickness?0>S.thickness?0:Math.round(S.thickness):2,!((p=M[g].getTime?M[g].x.getTime():M[g].x)<t.axisX.dataInfo.viewPortMin||p>t.axisX.dataInfo.viewPortMax)&&!c(M[g].y)&&M[g].y.length&&"number"===typeof M[g].y[0]&&"number"===typeof M[g].y[1]){var A=t.axisX.convertValueToPixel(p);a?o=A:s=A,A=t.axisY.convertValueToPixel(M[g].y[0]),a?r=A:l=A,A=t.axisY.convertValueToPixel(M[g].y[1]),a?h=A:d=A,a?(l=t.axisX.reversed?o+(w?y:1)*b/2-(w?T-1:0)*b<<0:o-(w?y:1)*b/2+(w?T-1:0)*b<<0,d=t.axisX.reversed?l-b<<0:l+b<<0):(r=t.axisX.reversed?s+(w?y:1)*b/2-(w?T-1:0)*b<<0:s-(w?y:1)*b/2+(w?T-1:0)*b<<0,h=t.axisX.reversed?r-b<<0:r+b<<0),!a&&l>d&&(A=l,l=d,d=A),a&&r>h&&(A=r,r=h,h=A),A=k.dataPointIds[g],this._eventManager.objectMap[A]={id:A,objectType:"dataPoint",dataSeriesIndex:_,dataPointIndex:g,x1:Math.min(r,h),y1:Math.min(l,d),x2:Math.max(h,r),y2:Math.max(d,l),isXYSwapped:a,stemProperties:S,whiskerProperties:C},n(i,Math.min(r,h),Math.min(l,d),Math.max(h,r),Math.max(d,l),u,C,S,a),R&&n(this._eventManager.ghostCtx,r,l,h,d,u,C,S,a),(M[g].indexLabel||k.indexLabel||M[g].indexLabelFormatter||k.indexLabelFormatter)&&(this._indexLabels.push({chartType:"error",dataPoint:M[g],dataSeries:k,indexKeyword:0,point:{x:a?M[g].y[1]>=M[g].y[0]?r:h:r+(h-r)/2,y:a?l+(d-l)/2:M[g].y[1]>=M[g].y[0]?d:l},direction:M[g].y[1]>=M[g].y[0]?-1:1,bounds:{x1:a?Math.min(r,h):r,y1:a?l:Math.min(l,d),x2:a?Math.max(r,h):h,y2:a?d:Math.max(l,d)},color:u,axisSwapped:a}),this._indexLabels.push({chartType:"error",dataPoint:M[g],dataSeries:k,indexKeyword:1,point:{x:a?M[g].y[1]>=M[g].y[0]?h:r:r+(h-r)/2,y:a?l+(d-l)/2:M[g].y[1]>=M[g].y[0]?l:d},direction:M[g].y[1]>=M[g].y[0]?1:-1,bounds:{x1:a?Math.min(r,h):r,y1:a?l:Math.min(l,d),x2:a?Math.max(r,h):h,y2:a?d:Math.max(l,d)},color:u,axisSwapped:a}))}}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(m.x1,m.y1,m.width,m.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}},e.prototype.renderRangeBar=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n,o,r=null,h=this.plotArea,d=0;d=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;a=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,this.plotArea.height/t.plotType.totalDataSeries*.9)<<0;var p=t.axisX.dataInfo.minDiff;isFinite(p)||(p=.3*Math.abs(t.axisX.range)),p=this.options.dataPointWidth?this.dataPointWidth:h.height*(t.axisX.logarithmic?Math.log(p)/Math.log(t.axisX.range):Math.abs(p)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.9<<0,this.dataPointMaxWidth&&d>a&&(d=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,a)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&a<d&&(a=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,d)),p<d&&(p=d),p>a&&(p=a),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(h.x1,h.y1,h.width,h.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.clip());for(var u=0;u<t.dataSeriesIndexes.length;u++){var x=t.dataSeriesIndexes[u],m=this.data[x],g=m.dataPoints;if(0<g.length){var f=!!(5<p&&m.bevelEnabled);for(i.strokeStyle="#4572A7 ",d=0;d<g.length;d++)if(!((o=g[d].getTime?g[d].x.getTime():g[d].x)<t.axisX.dataInfo.viewPortMin||o>t.axisX.dataInfo.viewPortMax)&&!c(g[d].y)&&g[d].y.length&&"number"===typeof g[d].y[0]&&"number"===typeof g[d].y[1]){a=t.axisY.convertValueToPixel(g[d].y[0]),s=t.axisY.convertValueToPixel(g[d].y[1]),n=t.axisX.convertValueToPixel(o),n=t.axisX.reversed?n+t.plotType.totalDataSeries*p/2-(t.previousDataSeriesCount+u)*p<<0:n-t.plotType.totalDataSeries*p/2+(t.previousDataSeriesCount+u)*p<<0;var y=t.axisX.reversed?n-p<<0:n+p<<0;a>s&&(r=a,a=s,s=r),r=g[d].color?g[d].color:m._colorSet[d%m._colorSet.length],ut(i,a,t.axisX.reversed?y:n,s,t.axisX.reversed?n:y,r,0,null,f,!1,!1,!1,m.fillOpacity),r=m.dataPointIds[d],this._eventManager.objectMap[r]={id:r,objectType:"dataPoint",dataSeriesIndex:x,dataPointIndex:d,x1:a,y1:n,x2:s,y2:y},r=l(r),R&&ut(this._eventManager.ghostCtx,a,t.axisX.reversed?y:n,s,t.axisX.reversed?n:y,r,0,null,!1,!1,!1,!1),(g[d].indexLabel||m.indexLabel||g[d].indexLabelFormatter||m.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:g[d],dataSeries:m,indexKeyword:0,point:{x:g[d].y[1]>=g[d].y[0]?a:s,y:n+(y-n)/2},direction:g[d].y[1]>=g[d].y[0]?-1:1,bounds:{x1:Math.min(a,s),y1:n,x2:Math.max(a,s),y2:y},color:r}),this._indexLabels.push({chartType:"rangeBar",dataPoint:g[d],dataSeries:m,indexKeyword:1,point:{x:g[d].y[1]>=g[d].y[0]?s:a,y:n+(y-n)/2},direction:g[d].y[1]>=g[d].y[0]?1:-1,bounds:{x1:Math.min(a,s),y1:n,x2:Math.max(a,s),y2:y},color:r}))}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(h.x1,h.y1,h.width,h.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}},e.prototype.renderRangeArea=function(t){function e(){if(v){for(var t=null,e=h.length-1;0<=e;e--)t=h[e],a.lineTo(t.x,t.y2),s.lineTo(t.x,t.y2);if(a.closePath(),a.globalAlpha=c.fillOpacity,a.fill(),a.globalAlpha=1,s.fill(),0<c.lineThickness){for(a.beginPath(),a.moveTo(t.x,t.y2),e=0;e<h.length;e++)t=h[e],a.lineTo(t.x,t.y2);for(a.moveTo(h[0].x,h[0].y1),e=0;e<h.length;e++)t=h[e],a.lineTo(t.x,t.y1);a.stroke()}a.beginPath(),a.moveTo(u,x),s.beginPath(),s.moveTo(u,x),v={x:u,y:x},(h=[]).push({x:u,y1:x,y2:g})}}var i=t.targetCanvasCtx||this.plotArea.ctx,a=R?this._preRenderCtx:i;if(!(0>=t.dataSeriesIndexes.length)){var s=this._eventManager.ghostCtx,n=[],o=this.plotArea;a.save(),R&&s.save(),a.beginPath(),a.rect(o.x1,o.y1,o.width,o.height),a.clip(),R&&(s.beginPath(),s.rect(o.x1,o.y1,o.width,o.height),s.clip());for(var r=0;r<t.dataSeriesIndexes.length;r++){var h=[],d=t.dataSeriesIndexes[r],c=this.data[d],p=c.dataPoints;n=c.id;this._eventManager.objectMap[n]={objectType:"dataSeries",dataSeriesIndex:d},n=l(n),s.fillStyle=n;n=[];var u,x,g,f,y=!0,b=0,v=null;if(0<p.length){var _=c._colorSet[b%c._colorSet.length],k=c.lineColor=c.options.lineColor||_,M=k;a.fillStyle=_,a.strokeStyle=k,a.lineWidth=c.lineThickness;var w="solid";if(a.setLineDash){var T=m(c.nullDataLineDashType,c.lineThickness),P=m(w=c.lineDashType,c.lineThickness);a.setLineDash(P)}for(var C=!0;b<p.length;b++)if(!((f=p[b].x.getTime?p[b].x.getTime():p[b].x)<t.axisX.dataInfo.viewPortMin||f>t.axisX.dataInfo.viewPortMax&&(!c.connectNullData||!C)))if(null!==p[b].y&&p[b].y.length&&"number"===typeof p[b].y[0]&&"number"===typeof p[b].y[1]){if(u=t.axisX.convertValueToPixel(f),x=t.axisY.convertValueToPixel(p[b].y[0]),g=t.axisY.convertValueToPixel(p[b].y[1]),y||C?(c.connectNullData&&!y?(a.setLineDash&&(c.options.nullDataLineDashType||w===c.lineDashType&&c.lineDashType!==c.nullDataLineDashType)&&(h[h.length-1].newLineDashArray=P,w=c.nullDataLineDashType,a.setLineDash(T)),a.lineTo(u,x),R&&s.lineTo(u,x),h.push({x:u,y1:x,y2:g})):(a.beginPath(),a.moveTo(u,x),v={x:u,y:x},(h=[]).push({x:u,y1:x,y2:g}),R&&(s.beginPath(),s.moveTo(u,x))),C=y=!1):(a.lineTo(u,x),h.push({x:u,y1:x,y2:g}),R&&s.lineTo(u,x),0==b%250&&e()),f=c.dataPointIds[b],this._eventManager.objectMap[f]={id:f,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:b,x1:u,y1:x,y2:g},b<p.length-1&&(M!==(p[b].lineColor||k)||w!==(p[b].lineDashType||c.lineDashType))&&(e(),M=p[b].lineColor||k,h[h.length-1].newStrokeStyle=M,a.strokeStyle=M,a.setLineDash&&(p[b].lineDashType?(w=p[b].lineDashType,h[h.length-1].newLineDashArray=m(w,c.lineThickness),a.setLineDash(h[h.length-1].newLineDashArray)):(w=c.lineDashType,h[h.length-1].newLineDashArray=P,a.setLineDash(P)))),0!==p[b].markerSize&&(0<p[b].markerSize||0<c.markerSize)){var S=c.getMarkerProperties(b,u,g,a);n.push(S);var A=l(f);R&&n.push({x:u,y:g,ctx:s,type:S.type,size:S.size,color:A,borderColor:A,borderThickness:S.borderThickness}),S=c.getMarkerProperties(b,u,x,a),n.push(S),A=l(f),R&&n.push({x:u,y:x,ctx:s,type:S.type,size:S.size,color:A,borderColor:A,borderThickness:S.borderThickness})}(p[b].indexLabel||c.indexLabel||p[b].indexLabelFormatter||c.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:p[b],dataSeries:c,indexKeyword:0,point:{x:u,y:x},direction:p[b].y[0]>p[b].y[1]===t.axisY.reversed?-1:1,color:_}),this._indexLabels.push({chartType:"rangeArea",dataPoint:p[b],dataSeries:c,indexKeyword:1,point:{x:u,y:g},direction:p[b].y[0]>p[b].y[1]===t.axisY.reversed?1:-1,color:_}))}else C||y||e(),C=!0;e(),J.drawMarkers(n)}}return R&&(i.drawImage(this._preRenderCanvas,0,0,this.width,this.height),a.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&a.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&a.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),a.clearRect(o.x1,o.y1,o.width,o.height),this._eventManager.ghostCtx.restore()),a.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderRangeSplineArea=function(t){function e(t,e){var a=i(y,2);if(0<a.length){if(0<c.lineThickness){s.strokeStyle=e,s.setLineDash&&s.setLineDash(t),s.beginPath(),s.moveTo(a[0].x,a[0].y);for(var o=0;o<a.length-3;o+=3)(a[o].newStrokeStyle||a[o].newLineDashArray)&&(s.stroke(),s.beginPath(),s.moveTo(a[o].x,a[o].y),a[o].newStrokeStyle&&(s.strokeStyle=a[o].newStrokeStyle),a[o].newLineDashArray&&s.setLineDash(a[o].newLineDashArray)),s.bezierCurveTo(a[o+1].x,a[o+1].y,a[o+2].x,a[o+2].y,a[o+3].x,a[o+3].y)}for(s.beginPath(),s.moveTo(a[0].x,a[0].y),R&&(n.beginPath(),n.moveTo(a[0].x,a[0].y)),o=0;o<a.length-3;o+=3)s.bezierCurveTo(a[o+1].x,a[o+1].y,a[o+2].x,a[o+2].y,a[o+3].x,a[o+3].y),R&&n.bezierCurveTo(a[o+1].x,a[o+1].y,a[o+2].x,a[o+2].y,a[o+3].x,a[o+3].y);for(a=i(b,2),s.lineTo(b[b.length-1].x,b[b.length-1].y),o=a.length-1;2<o;o-=3)s.bezierCurveTo(a[o-1].x,a[o-1].y,a[o-2].x,a[o-2].y,a[o-3].x,a[o-3].y),R&&n.bezierCurveTo(a[o-1].x,a[o-1].y,a[o-2].x,a[o-2].y,a[o-3].x,a[o-3].y);if(s.closePath(),s.globalAlpha=c.fillOpacity,s.fill(),R&&(n.closePath(),n.fill()),s.globalAlpha=1,0<c.lineThickness){s.strokeStyle=e,s.setLineDash&&s.setLineDash(t),s.beginPath(),s.moveTo(a[0].x,a[0].y);for(var r=o=0;o<a.length-3;o+=3,r++)(y[r].newStrokeStyle||y[r].newLineDashArray)&&(s.stroke(),s.beginPath(),s.moveTo(a[o].x,a[o].y),y[r].newStrokeStyle&&(s.strokeStyle=y[r].newStrokeStyle),y[r].newLineDashArray&&s.setLineDash(y[r].newLineDashArray)),s.bezierCurveTo(a[o+1].x,a[o+1].y,a[o+2].x,a[o+2].y,a[o+3].x,a[o+3].y);for(a=i(y,2),s.moveTo(a[0].x,a[0].y),r=o=0;o<a.length-3;o+=3,r++)(y[r].newStrokeStyle||y[r].newLineDashArray)&&(s.stroke(),s.beginPath(),s.moveTo(a[o].x,a[o].y),y[r].newStrokeStyle&&(s.strokeStyle=y[r].newStrokeStyle),y[r].newLineDashArray&&s.setLineDash(y[r].newLineDashArray)),s.bezierCurveTo(a[o+1].x,a[o+1].y,a[o+2].x,a[o+2].y,a[o+3].x,a[o+3].y);s.stroke()}s.beginPath()}}var a=t.targetCanvasCtx||this.plotArea.ctx,s=R?this._preRenderCtx:a;if(!(0>=t.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,o=[],r=this.plotArea;s.save(),R&&n.save(),s.beginPath(),s.rect(r.x1,r.y1,r.width,r.height),s.clip(),R&&(n.beginPath(),n.rect(r.x1,r.y1,r.width,r.height),n.clip());for(var h=0;h<t.dataSeriesIndexes.length;h++){var d=t.dataSeriesIndexes[h],c=this.data[d],p=c.dataPoints;o=c.id;this._eventManager.objectMap[o]={objectType:"dataSeries",dataSeriesIndex:d},o=l(o),n.fillStyle=o;o=[];var u,x,g,f=0,y=[],b=[];if(0<p.length){var v=c._colorSet[f%c._colorSet.length],_=c.lineColor=c.options.lineColor||v,k=_;s.fillStyle=v,s.lineWidth=c.lineThickness;var M,w="solid";if(s.setLineDash){var T=m(c.nullDataLineDashType,c.lineThickness);M=m(w=c.lineDashType,c.lineThickness)}for(x=!1;f<p.length;f++)if(!((u=p[f].x.getTime?p[f].x.getTime():p[f].x)<t.axisX.dataInfo.viewPortMin||u>t.axisX.dataInfo.viewPortMax&&(!c.connectNullData||!x)))if(null!==p[f].y&&p[f].y.length&&"number"===typeof p[f].y[0]&&"number"===typeof p[f].y[1]){u=t.axisX.convertValueToPixel(u),x=t.axisY.convertValueToPixel(p[f].y[0]),g=t.axisY.convertValueToPixel(p[f].y[1]);var P=c.dataPointIds[f];if(this._eventManager.objectMap[P]={id:P,objectType:"dataPoint",dataSeriesIndex:d,dataPointIndex:f,x1:u,y1:x,y2:g},y[y.length]={x:u,y:x},b[b.length]={x:u,y:g},f<p.length-1&&(k!==(p[f].lineColor||_)||w!==(p[f].lineDashType||c.lineDashType))&&(k=p[f].lineColor||_,y[y.length-1].newStrokeStyle=k,s.setLineDash&&(p[f].lineDashType?(w=p[f].lineDashType,y[y.length-1].newLineDashArray=m(w,c.lineThickness)):(w=c.lineDashType,y[y.length-1].newLineDashArray=M))),0!==p[f].markerSize&&(0<p[f].markerSize||0<c.markerSize)){var C=c.getMarkerProperties(f,u,x,s);o.push(C);var S=l(P);R&&o.push({x:u,y:x,ctx:n,type:C.type,size:C.size,color:S,borderColor:S,borderThickness:C.borderThickness}),C=c.getMarkerProperties(f,u,g,s),o.push(C),S=l(P),R&&o.push({x:u,y:g,ctx:n,type:C.type,size:C.size,color:S,borderColor:S,borderThickness:C.borderThickness})}(p[f].indexLabel||c.indexLabel||p[f].indexLabelFormatter||c.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:p[f],dataSeries:c,indexKeyword:0,point:{x:u,y:x},direction:p[f].y[0]<=p[f].y[1]?-1:1,color:v}),this._indexLabels.push({chartType:"rangeSplineArea",dataPoint:p[f],dataSeries:c,indexKeyword:1,point:{x:u,y:g},direction:p[f].y[0]<=p[f].y[1]?1:-1,color:v})),x=!1}else 0<f&&!x&&(c.connectNullData?s.setLineDash&&0<y.length&&(c.options.nullDataLineDashType||!p[f-1].lineDashType)&&(y[y.length-1].newLineDashArray=T,w=c.nullDataLineDashType):(e(M,_),y=[],b=[])),x=!0;e(M,_),J.drawMarkers(o)}}return R&&(a.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&s.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&s.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),s.clearRect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.restore()),s.restore(),{source:a,dest:this.plotArea.ctx,animationCallback:K.xClipAnimation,easingFunction:K.easing.linear,animationBase:0}}},e.prototype.renderWaterfall=function(t){var e=t.targetCanvasCtx||this.plotArea.ctx,i=R?this._preRenderCtx:e;if(!(0>=t.dataSeriesIndexes.length)){var a,s,n,o,r=this._eventManager.ghostCtx,h=null,d=this.plotArea,c=0,p=t.axisY.convertValueToPixel(t.axisY.logarithmic?t.axisY.viewportMinimum:0);c=this.options.dataPointMinWidth?this.dataPointMinWidth:this.options.dataPointWidth?this.dataPointWidth:1;s=this.options.dataPointMaxWidth?this.dataPointMaxWidth:this.options.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,this.plotArea.width/t.plotType.totalDataSeries*.9)<<0;var u=t.axisX.dataInfo.minDiff;isFinite(u)||(u=.3*Math.abs(t.axisX.range)),u=this.options.dataPointWidth?this.dataPointWidth:d.width*(t.axisX.logarithmic?Math.log(u)/Math.log(t.axisX.range):Math.abs(u)/Math.abs(t.axisX.range))/t.plotType.totalDataSeries*.6<<0,this.dataPointMaxWidth&&c>s&&(c=Math.min(this.options.dataPointWidth?this.dataPointWidth:1/0,s)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&s<c&&(s=Math.max(this.options.dataPointWidth?this.dataPointWidth:-1/0,c)),u<c&&(u=c),u>s&&(u=s),i.save(),R&&this._eventManager.ghostCtx.save(),i.beginPath(),i.rect(d.x1,d.y1,d.width,d.height),i.clip(),R&&(this._eventManager.ghostCtx.beginPath(),this._eventManager.ghostCtx.rect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.clip());for(var x=0;x<t.dataSeriesIndexes.length;x++){var g=t.dataSeriesIndexes[x],f=this.data[g],y=f.dataPoints;h=f._colorSet[0];f.risingColor=f.options.risingColor?f.options.risingColor:h,f.fallingColor=f.options.fallingColor?f.options.fallingColor:"#e40a0a";var b="number"===typeof f.options.lineThickness?Math.round(f.lineThickness):1,v=1===Math.round(b)%2?-.5:0;if(0<y.length){var _=!!(5<u&&f.bevelEnabled),k=!1,M=null,w=null;for(c=0;c<y.length;c++)if(o=y[c].getTime?y[c].x.getTime():y[c].x,"number"!==typeof y[c].y){if(0<c&&!k&&f.connectNullData)var T=f.options.nullDataLineDashType||!y[c-1].lineDashType?f.nullDataLineDashType:y[c-1].lineDashType;k=!0}else{a=t.axisX.convertValueToPixel(o),s=0===f.dataPointEOs[c].cumulativeSum?p:t.axisY.convertValueToPixel(f.dataPointEOs[c].cumulativeSum),n=0===f.dataPointEOs[c].cumulativeSumYStartValue?p:t.axisY.convertValueToPixel(f.dataPointEOs[c].cumulativeSumYStartValue),a=t.axisX.reversed?a+t.plotType.totalDataSeries*u/2-(t.previousDataSeriesCount+x)*u<<0:a-t.plotType.totalDataSeries*u/2+(t.previousDataSeriesCount+x)*u<<0;var P=t.axisX.reversed?a-u<<0:a+u<<0;s>n&&(h=s,s=n,n=h),t.axisY.reversed&&(h=s,s=n,n=h),h=f.dataPointIds[c],this._eventManager.objectMap[h]={id:h,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:c,x1:a,y1:s,x2:P,y2:n};var C=y[c].color?y[c].color:0<y[c].y?f.risingColor:f.fallingColor;ut(i,t.axisX.reversed?P:a,t.axisY.reversed?n:s,t.axisX.reversed?a:P,t.axisY.reversed?s:n,C,0,C,_,_,!1,!1,f.fillOpacity),h=l(h),R&&ut(this._eventManager.ghostCtx,t.axisX.reversed?P:a,s,t.axisX.reversed?a:P,n,h,0,null,!1,!1,!1,!1);var S;C=a;S="undefined"!==typeof y[c].isIntermediateSum&&!0===y[c].isIntermediateSum||"undefined"!==typeof y[c].isCumulativeSum&&!0===y[c].isCumulativeSum?0<y[c].y?s:n:0<y[c].y?n:s,0<c&&M&&(!k||f.connectNullData)&&(k&&i.setLineDash&&i.setLineDash(m(T,b)),i.beginPath(),i.moveTo(M,w-v),i.lineTo(C,S-v),0<b&&i.stroke(),R&&(r.beginPath(),r.moveTo(M,w-v),r.lineTo(C,S-v),0<b&&r.stroke())),k=!1,M=P,w=0<y[c].y?s:n,C=y[c].lineDashType?y[c].lineDashType:f.options.lineDashType?f.options.lineDashType:"shortDash",i.strokeStyle=y[c].lineColor?y[c].lineColor:f.options.lineColor?f.options.lineColor:"#9e9e9e",i.lineWidth=b,i.setLineDash&&(C=m(C,b),i.setLineDash(C)),(y[c].indexLabel||f.indexLabel||y[c].indexLabelFormatter||f.indexLabelFormatter)&&this._indexLabels.push({chartType:"waterfall",dataPoint:y[c],dataSeries:f,point:{x:a+(P-a)/2,y:0<=y[c].y?s:n},direction:0>y[c].y===t.axisY.reversed?1:-1,bounds:{x1:a,y1:Math.min(s,n),x2:P,y2:Math.max(s,n)},color:h})}}}return R&&(e.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.globalCompositeOperation="source-atop",t.axisX.maskCanvas&&i.drawImage(t.axisX.maskCanvas,0,0,this.width,this.height),t.axisY.maskCanvas&&i.drawImage(t.axisY.maskCanvas,0,0,this.width,this.height),this._breaksCanvasCtx&&this._breaksCanvasCtx.drawImage(this._preRenderCanvas,0,0,this.width,this.height),i.clearRect(d.x1,d.y1,d.width,d.height),this._eventManager.ghostCtx.restore()),i.restore(),{source:e,dest:this.plotArea.ctx,animationCallback:K.fadeInAnimation,easingFunction:K.easing.easeInQuad,animationBase:0}}};var q=function(t,e,i,a,s,n,o,r,h){if(!(0>i)){if("undefined"===typeof r&&(r=1),!R){var l=Number((o%(2*Math.PI)).toFixed(8));Number((n%(2*Math.PI)).toFixed(8))===l&&(o-=1e-4)}t.save(),t.globalAlpha=r,"pie"===s?(t.beginPath(),t.moveTo(e.x,e.y),t.arc(e.x,e.y,i,n,o,!1),t.fillStyle=a,t.strokeStyle="white",t.lineWidth=2,t.closePath(),t.fill()):"doughnut"===s&&(t.beginPath(),t.arc(e.x,e.y,i,n,o,!1),0<=h&&t.arc(e.x,e.y,h*i,o,n,!0),t.closePath(),t.fillStyle=a,t.strokeStyle="white",t.lineWidth=2,t.fill()),t.globalAlpha=1,t.restore()}};e.prototype.renderPie=function(t){function e(t){var e=r.plotArea.ctx;for(e.clearRect(u.x1,u.y1,u.width,u.height),e.fillStyle=r.backgroundColor,e.fillRect(u.x1,u.y1,u.width,u.height),e=0;e<d.length;e++){var i=x[e].startAngle,a=x[e].endAngle;if(a>i){var s=.07*M*Math.cos(x[e].midAngle),n=.07*M*Math.sin(x[e].midAngle),o=!1;d[e].exploded?(1e-9<Math.abs(x[e].center.x-(v.x+s))||1e-9<Math.abs(x[e].center.y-(v.y+n)))&&(x[e].center.x=v.x+s*t,x[e].center.y=v.y+n*t,o=!0):(0<Math.abs(x[e].center.x-v.x)||0<Math.abs(x[e].center.y-v.y))&&(x[e].center.x=v.x+s*(1-t),x[e].center.y=v.y+n*(1-t),o=!0),o&&((s={}).dataSeries=l,s.dataPoint=l.dataPoints[e],s.index=e,r.toolTip.highlightObjects([s])),q(r.plotArea.ctx,x[e].center,x[e].radius,d[e].color?d[e].color:l._colorSet[e%l._colorSet.length],l.type,i,a,l.fillOpacity,x[e].percentInnerRadius)}}for((t=r.plotArea.ctx).save(),t.fillStyle="black",t.strokeStyle="grey",t.textBaseline="middle",t.lineJoin="round",e=e=0;e<d.length;e++)(i=x[e]).indexLabelText&&(i.indexLabelTextBlock.y-=i.indexLabelTextBlock.height/2,a=0,a="left"===i.hemisphere?"inside"!==l.indexLabelPlacement?-(i.indexLabelTextBlock.width+p):-i.indexLabelTextBlock.width/2:"inside"!==l.indexLabelPlacement?p:-i.indexLabelTextBlock.width/2,i.indexLabelTextBlock.x+=a,i.indexLabelTextBlock.render(!0),i.indexLabelTextBlock.x-=a,i.indexLabelTextBlock.y+=i.indexLabelTextBlock.height/2,"inside"!==i.indexLabelPlacement&&0<i.indexLabelLineThickness&&(a=i.center.x+M*Math.cos(i.midAngle),s=i.center.y+M*Math.sin(i.midAngle),t.strokeStyle=i.indexLabelLineColor,t.lineWidth=i.indexLabelLineThickness,t.setLineDash&&t.setLineDash(m(i.indexLabelLineDashType,i.indexLabelLineThickness)),t.beginPath(),t.moveTo(a,s),t.lineTo(i.indexLabelTextBlock.x,i.indexLabelTextBlock.y),t.lineTo(i.indexLabelTextBlock.x+("left"===i.hemisphere?-p:p),i.indexLabelTextBlock.y),t.stroke()),t.lineJoin="miter");t.save()}function i(t,e){var i=0,a=(i=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2),s=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,n=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2;return e.indexLabelTextBlock.y>t.indexLabelTextBlock.y?s-a:i-n}function a(t){for(var e=null,a=1;a<d.length;a++){if(e=(t+a+x.length)%x.length,x[e].hemisphere!==x[t].hemisphere){e=null;break}if(x[e].indexLabelText&&e!==t&&(0>i(x[e],x[t])||("right"===x[t].hemisphere?x[e].indexLabelTextBlock.y>=x[t].indexLabelTextBlock.y:x[e].indexLabelTextBlock.y<=x[t].indexLabelTextBlock.y)))break;e=null}return e}function s(t,e,n){if(1e3<(n=(n||0)+1))return 0;e=e||0;var o=0,r=v.y-1*h,l=v.y+1*h;if(0<=t&&t<d.length){var c=x[t];if(0>e&&c.indexLabelTextBlock.y<r||0<e&&c.indexLabelTextBlock.y>l)return 0;var p=0,u=0;u=p=p=0;for(0>e?c.indexLabelTextBlock.y-c.indexLabelTextBlock.height/2>r&&c.indexLabelTextBlock.y-c.indexLabelTextBlock.height/2+e<r&&(e=-(r-(c.indexLabelTextBlock.y-c.indexLabelTextBlock.height/2+e))):c.indexLabelTextBlock.y+c.indexLabelTextBlock.height/2<r&&c.indexLabelTextBlock.y+c.indexLabelTextBlock.height/2+e>l&&(e=c.indexLabelTextBlock.y+c.indexLabelTextBlock.height/2+e-l),e=c.indexLabelTextBlock.y+e,r=0,r="right"===c.hemisphere?v.x+Math.sqrt(Math.pow(h,2)-Math.pow(e-v.y,2)):v.x-Math.sqrt(Math.pow(h,2)-Math.pow(e-v.y,2)),u=v.x+M*Math.cos(c.midAngle),p=v.y+M*Math.sin(c.midAngle),p=Math.sqrt(Math.pow(r-u,2)+Math.pow(e-p,2)),u=Math.acos(M/h),e=(p=Math.acos((h*h+M*M-p*p)/(2*M*h)))<u?e-c.indexLabelTextBlock.y:0,r=null,l=1;l<d.length;l++){if(r=(t-l+x.length)%x.length,x[r].hemisphere!==x[t].hemisphere){r=null;break}if(x[r].indexLabelText&&x[r].hemisphere===x[t].hemisphere&&r!==t&&(0>i(x[r],x[t])||("right"===x[t].hemisphere?x[r].indexLabelTextBlock.y<=x[t].indexLabelTextBlock.y:x[r].indexLabelTextBlock.y>=x[t].indexLabelTextBlock.y)))break;r=null}u=r,p=a(t),l=r=0,0>e?(o=e,null!==(l="right"===c.hemisphere?u:p)&&(u=-e,(e=c.indexLabelTextBlock.y-c.indexLabelTextBlock.height/2-(x[l].indexLabelTextBlock.y+x[l].indexLabelTextBlock.height/2))-u<g&&(+(l=s(l,r=-u,n+1)).toFixed(b)>+r.toFixed(b)&&(o=e>g?-(e-g):-(u-(l-r)))))):0<e&&(o=e,null!==(l="right"===c.hemisphere?p:u)&&(u=e,(e=x[l].indexLabelTextBlock.y-x[l].indexLabelTextBlock.height/2-(c.indexLabelTextBlock.y+c.indexLabelTextBlock.height/2))-u<g&&(+(l=s(l,r=u,n+1)).toFixed(b)<+r.toFixed(b)&&(o=e>g?e-g:u-(r-l))))),o&&(n=c.indexLabelTextBlock.y+o,e=0,e="right"===c.hemisphere?v.x+Math.sqrt(Math.pow(h,2)-Math.pow(n-v.y,2)):v.x-Math.sqrt(Math.pow(h,2)-Math.pow(n-v.y,2)),c.midAngle>Math.PI/2-y&&c.midAngle<Math.PI/2+y?(r=(t-1+x.length)%x.length,r=x[r],t=x[(t+1+x.length)%x.length],"left"===c.hemisphere&&"right"===r.hemisphere&&e>r.indexLabelTextBlock.x?e=r.indexLabelTextBlock.x-15:"right"===c.hemisphere&&"left"===t.hemisphere&&e<t.indexLabelTextBlock.x&&(e=t.indexLabelTextBlock.x+15)):c.midAngle>3*Math.PI/2-y&&c.midAngle<3*Math.PI/2+y&&(r=(t-1+x.length)%x.length,r=x[r],t=x[(t+1+x.length)%x.length],"right"===c.hemisphere&&"left"===r.hemisphere&&e<r.indexLabelTextBlock.x?e=r.indexLabelTextBlock.x+15:"left"===c.hemisphere&&"right"===t.hemisphere&&e>t.indexLabelTextBlock.x&&(e=t.indexLabelTextBlock.x-15)),c.indexLabelTextBlock.y=n,c.indexLabelTextBlock.x=e,c.indexLabelAngle=Math.atan2(c.indexLabelTextBlock.y-v.y,c.indexLabelTextBlock.x-v.x))}return o}function n(){(m=r.plotArea.ctx).fillStyle="grey",m.strokeStyle="grey",m.font="16px Arial",m.textBaseline="middle";var t=m=0,e=0,n=!0;for(t=0;10>t&&(1>t||0<e);t++){if((l.radius||!l.radius&&"undefined"!==typeof l.innerRadius&&null!==l.innerRadius&&M-e<=w)&&(n=!1),n&&(M-=e),e=0,"inside"!==l.indexLabelPlacement){for(h=M*f,m=0;m<d.length;m++){(y=x[m]).indexLabelTextBlock.x=v.x+h*Math.cos(y.midAngle),y.indexLabelTextBlock.y=v.y+h*Math.sin(y.midAngle),y.indexLabelAngle=y.midAngle,y.radius=M,y.percentInnerRadius=T}for(var o,c,m=0;m<d.length;m++){var y=x[m],_=a(m);if(null!==_){o=x[m],c=x[_];var k=0;if(0>(k=i(o,c)-g)){for(var P=c=0,C=0;C<d.length;C++)C!==m&&x[C].hemisphere===y.hemisphere&&(x[C].indexLabelTextBlock.y<y.indexLabelTextBlock.y?c++:P++);P=-1*(k-(c=k/(c+P||1)*P));var S=C=0;"right"===y.hemisphere?(C=s(m,c),+(S=s(_,P=-1*(k-C))).toFixed(b)<+P.toFixed(b)&&+C.toFixed(b)<=+c.toFixed(b)&&s(m,-(P-S))):(C=s(_,c),+(S=s(m,P=-1*(k-C))).toFixed(b)<+P.toFixed(b)&&+C.toFixed(b)<=+c.toFixed(b)&&s(_,-(P-S)))}}}}else for(m=0;m<d.length;m++)y=x[m],h="pie"===l.type?.7*M:.85*M,_=v.x+h*Math.cos(y.midAngle),c=v.y+h*Math.sin(y.midAngle),y.indexLabelTextBlock.x=_,y.indexLabelTextBlock.y=c;for(m=0;m<d.length;m++)0!==(_=(y=x[m]).indexLabelTextBlock.measureText()).height&&0!==_.width&&(_=_=0,"right"===y.hemisphere?(_=u.x2-(y.indexLabelTextBlock.x+y.indexLabelTextBlock.width+p),_*=-1):_=u.x1-(y.indexLabelTextBlock.x-y.indexLabelTextBlock.width-p),0<_&&(!n&&y.indexLabelText&&(c="right"===y.hemisphere?u.x2-y.indexLabelTextBlock.x:y.indexLabelTextBlock.x-u.x1,.3*y.indexLabelTextBlock.maxWidth>c?y.indexLabelText="":y.indexLabelTextBlock.maxWidth=.85*c,.3*y.indexLabelTextBlock.maxWidth<c&&(y.indexLabelTextBlock.x-="right"===y.hemisphere?2:-2)),Math.abs(y.indexLabelTextBlock.y-y.indexLabelTextBlock.height/2-v.y)<M||Math.abs(y.indexLabelTextBlock.y+y.indexLabelTextBlock.height/2-v.y)<M)&&(9<(_/=Math.abs(Math.cos(y.indexLabelAngle)))&&(_*=.3),_>e&&(e=_)),_=_=0,0<y.indexLabelAngle&&y.indexLabelAngle<Math.PI?(_=u.y2-(y.indexLabelTextBlock.y+y.indexLabelTextBlock.height/2+5),_*=-1):_=u.y1-(y.indexLabelTextBlock.y-y.indexLabelTextBlock.height/2-5),0<_&&(!n&&y.indexLabelText&&(0===s(m,_*(c=0<y.indexLabelAngle&&y.indexLabelAngle<Math.PI?-1:1))&&s(m,2*c)),Math.abs(y.indexLabelTextBlock.x-v.x)<M&&(9<(_/=Math.abs(Math.sin(y.indexLabelAngle)))&&(_*=.3),_>e&&(e=_))));var A=function(t,e,i){for(var a=[],s=0;a.push(x[e]),e!==i;e=(e+1+d.length)%d.length);for(a.sort((function(t,e){return t.y-e.y})),e=0;e<a.length&&(i=a[e],s<.7*t);e++)s+=i.indexLabelTextBlock.height,i.indexLabelTextBlock.text="",i.indexLabelText="",i.indexLabelTextBlock.measureText()};!function(){for(var t=-1,e=-1,s=0,n=!1,r=0;r<d.length;r++)if(n=!1,(o=x[r]).indexLabelText){var h=a(r);if(null!==h){var l,c=x[h];if(k=0,l=0>(k=i(o,c))){l=o.indexLabelTextBlock.x;var u=o.indexLabelTextBlock.y-o.indexLabelTextBlock.height/2,m=o.indexLabelTextBlock.y+o.indexLabelTextBlock.height/2,g=c.indexLabelTextBlock.y-c.indexLabelTextBlock.height/2,f=c.indexLabelTextBlock.x+c.indexLabelTextBlock.width,y=c.indexLabelTextBlock.y+c.indexLabelTextBlock.height/2;l=!(o.indexLabelTextBlock.x+o.indexLabelTextBlock.width<c.indexLabelTextBlock.x-p||l>f+p||u>y+p||m<g-p)}l?(0>t&&(t=r),h!==t&&(e=h,s+=-k),0===r%Math.max(d.length/10,3)&&(n=!0)):n=!0,n&&0<s&&0<=t&&0<=e&&(A(s,t,e),e=t=-1,s=0)}}0<s&&A(s,t,e)}()}}function o(){if(r.plotArea.layoutManager.reset(),r.title&&(r.title.dockInsidePlotArea||"center"===r.title.horizontalAlign&&"center"===r.title.verticalAlign)&&r.title.render(),r.subtitles)for(var t=0;t<r.subtitles.length;t++){var e=r.subtitles[t];(e.dockInsidePlotArea||"center"===e.horizontalAlign&&"center"===e.verticalAlign)&&e.render()}r.legend&&(r.legend.dockInsidePlotArea||"center"===r.legend.horizontalAlign&&"center"===r.legend.verticalAlign)&&(r.legend.setLayout(),r.legend.render())}var r=this;if(!(0>=t.dataSeriesIndexes.length)){var h,l=this.data[t.dataSeriesIndexes[0]],d=l.dataPoints,p=10,u=this.plotArea,x=l.dataPointEOs,g=2,f=1.3,y=20/180*Math.PI,b=6,v={x:(u.x2+u.x1)/2,y:(u.y2+u.y1)/2},_=0;t=!1;for(var k=0;k<d.length;k++)_+=Math.abs(d[k].y),!t&&"undefined"!==typeof d[k].indexLabel&&null!==d[k].indexLabel&&0<d[k].indexLabel.toString().length&&(t=!0),!t&&"undefined"!==typeof d[k].label&&null!==d[k].label&&0<d[k].label.toString().length&&(t=!0);if(0!==_){t=t||"undefined"!==typeof l.indexLabel&&null!==l.indexLabel&&0<l.indexLabel.toString().length;var M="inside"!==l.indexLabelPlacement&&t?.75*Math.min(u.width,u.height)/2:.92*Math.min(u.width,u.height)/2;l.radius&&(M=P(l.radius,M));var w="undefined"!==typeof l.innerRadius&&null!==l.innerRadius?P(l.innerRadius,M):.7*M;l.radius=M,"doughnut"===l.type&&(l.innerRadius=w);var T=Math.min(w/M,(M-1)/M);this.pieDoughnutClickHandler=function(t){r.isAnimating||!c(t.dataSeries.explodeOnClick)&&!t.dataSeries.explodeOnClick||((t=t.dataPoint).exploded=!t.exploded,1<this.dataPoints.length&&r._animator.animate(0,500,(function(t){e(t),o(),r.dispatchEvent("dataAnimationIterationEnd",{chart:r}),r.dispatchEvent("dataAnimationEnd",{chart:r})})))},function(){if(l&&d){for(var t=0,e=0,i=0,a=0,s=0;s<d.length;s++){var n=d[s],o=l.dataPointIds[s];x[s].id=o,x[s].objectType="dataPoint",x[s].dataPointIndex=s,x[s].dataSeriesIndex=0;var h=x[s],p={percent:null,total:null},m=null;p=r.getPercentAndTotal(l,n),(l.indexLabelFormatter||n.indexLabelFormatter)&&(m={chart:r.options,dataSeries:l,dataPoint:n,total:p.total,percent:p.percent}),p=n.indexLabelFormatter?n.indexLabelFormatter(m):n.indexLabel?r.replaceKeywordsWithValue(n.indexLabel,n,l,s):l.indexLabelFormatter?l.indexLabelFormatter(m):l.indexLabel?r.replaceKeywordsWithValue(l.indexLabel,n,l,s):n.label?n.label:"",r._eventManager.objectMap[o]=h,h.center={x:v.x,y:v.y},h.y=n.y,h.radius=M,h.percentInnerRadius=T,h.indexLabelText=p,h.indexLabelPlacement=l.indexLabelPlacement,h.indexLabelLineColor=n.indexLabelLineColor?n.indexLabelLineColor:l.options.indexLabelLineColor?l.options.indexLabelLineColor:n.color?n.color:l._colorSet[s%l._colorSet.length],h.indexLabelLineThickness=c(n.indexLabelLineThickness)?l.indexLabelLineThickness:n.indexLabelLineThickness,h.indexLabelLineDashType=n.indexLabelLineDashType?n.indexLabelLineDashType:l.indexLabelLineDashType,h.indexLabelFontColor=n.indexLabelFontColor?n.indexLabelFontColor:l.indexLabelFontColor,h.indexLabelFontStyle=n.indexLabelFontStyle?n.indexLabelFontStyle:l.indexLabelFontStyle,h.indexLabelFontWeight=n.indexLabelFontWeight?n.indexLabelFontWeight:l.indexLabelFontWeight,h.indexLabelFontSize=c(n.indexLabelFontSize)?l.indexLabelFontSize:n.indexLabelFontSize,h.indexLabelFontFamily=n.indexLabelFontFamily?n.indexLabelFontFamily:l.indexLabelFontFamily,h.indexLabelBackgroundColor=n.indexLabelBackgroundColor?n.indexLabelBackgroundColor:l.options.indexLabelBackgroundColor?l.options.indexLabelBackgroundColor:l.indexLabelBackgroundColor,h.indexLabelMaxWidth=n.indexLabelMaxWidth?n.indexLabelMaxWidth:l.indexLabelMaxWidth?l.indexLabelMaxWidth:.33*u.width,h.indexLabelWrap="undefined"!==typeof n.indexLabelWrap?n.indexLabelWrap:l.indexLabelWrap,h.indexLabelTextAlign=n.indexLabelTextAlign?n.indexLabelTextAlign:l.indexLabelTextAlign?l.indexLabelTextAlign:"left",h.startAngle=0===s?l.startAngle?l.startAngle/180*Math.PI:0:x[s-1].endAngle,h.startAngle=(h.startAngle+2*Math.PI)%(2*Math.PI),h.endAngle=h.startAngle+2*Math.PI/_*Math.abs(n.y),n=((n=(h.endAngle+h.startAngle)/2)+2*Math.PI)%(2*Math.PI),h.midAngle=n,h.midAngle>Math.PI/2-y&&h.midAngle<Math.PI/2+y?((0===t||x[i].midAngle>h.midAngle)&&(i=s),t++):h.midAngle>3*Math.PI/2-y&&h.midAngle<3*Math.PI/2+y&&((0===e||x[a].midAngle>h.midAngle)&&(a=s),e++),h.hemisphere=n>Math.PI/2&&n<=3*Math.PI/2?"left":"right",h.indexLabelTextBlock=new A(r.plotArea.ctx,{fontSize:h.indexLabelFontSize,fontFamily:h.indexLabelFontFamily,fontColor:h.indexLabelFontColor,fontStyle:h.indexLabelFontStyle,fontWeight:h.indexLabelFontWeight,textAlign:h.indexLabelTextAlign,backgroundColor:h.indexLabelBackgroundColor,maxWidth:h.indexLabelMaxWidth,maxHeight:h.indexLabelWrap?5*h.indexLabelFontSize:1.5*h.indexLabelFontSize,text:h.indexLabelText,padding:0,textBaseline:"top"}),h.indexLabelTextBlock.measureText()}for(o=n=0,p=!1,s=0;s<d.length;s++)h=x[(i+s)%d.length],1<t&&h.midAngle>Math.PI/2-y&&h.midAngle<Math.PI/2+y&&(n<=t/2&&!p?(h.hemisphere="right",n++):(h.hemisphere="left",p=!0));for(p=!1,s=0;s<d.length;s++)h=x[(a+s)%d.length],1<e&&h.midAngle>3*Math.PI/2-y&&h.midAngle<3*Math.PI/2+y&&(o<=e/2&&!p?(h.hemisphere="left",o++):(h.hemisphere="right",p=!0))}}(),n(),n(),n(),n(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,(function(t){(e=r.plotArea.ctx).clearRect(u.x1,u.y1,u.width,u.height),e.fillStyle=r.backgroundColor,e.fillRect(u.x1,u.y1,u.width,u.height);for(var e=x[0].startAngle+2*Math.PI*t,i=0;i<d.length;i++){var a=0===i?x[i].startAngle:s,s=a+(x[i].endAngle-x[i].startAngle),n=!1;s>e&&(s=e,n=!0);var h=d[i].color?d[i].color:l._colorSet[i%l._colorSet.length];if(s>a&&q(r.plotArea.ctx,x[i].center,x[i].radius,h,l.type,a,s,l.fillOpacity,x[i].percentInnerRadius),n)break}o(),r.dispatchEvent("dataAnimationIterationEnd",{chart:r}),1<=t&&r.dispatchEvent("dataAnimationEnd",{chart:r})}),(function(){r.disableToolTip=!1,r._animator.animate(0,r.animatedRender?500:0,(function(t){e(t),o(),r.dispatchEvent("dataAnimationIterationEnd",{chart:r})})),r.dispatchEvent("dataAnimationEnd",{chart:r})}))}}};var G=function(t,e,i,a){"undefined"===typeof i&&(i=1),0>=Math.round(e.y4-e.y1)||(t.save(),t.globalAlpha=i,t.beginPath(),t.moveTo(Math.round(e.x1),Math.round(e.y1)),t.lineTo(Math.round(e.x2),Math.round(e.y2)),t.lineTo(Math.round(e.x3),Math.round(e.y3)),t.lineTo(Math.round(e.x4),Math.round(e.y4)),"undefined"!==e.x5&&(t.lineTo(Math.round(e.x5),Math.round(e.y5)),t.lineTo(Math.round(e.x6),Math.round(e.y6))),t.closePath(),t.fillStyle=a||e.color,t.fill(),t.globalAplha=1,t.restore())};e.prototype.renderFunnel=function(t){function e(){var t,e,i,a;if("inside"!==x.indexLabelPlacement)for(var s=0;s<N.length;s++)0==q[s].textBlock.text.length?q[s].isDirty=!0:(i="undefined"!==typeof(t=N[s]).x5?(t.y2+t.y4)/2:(t.y2+t.y3)/2,e=x.reversed?"undefined"!==typeof t.x5&&i>E?h(i).x2+1:(t.x2+t.x3)/2+1:"undefined"!==typeof t.x5?i<E?h(i).x2+1:(t.x4+t.x3)/2+1:(t.x2+t.x3)/2+1,q[s].textBlock.x=e+F,q[s].textBlock.y=i-q[s].height/2,x.reversed?(q[s].textBlock.y+q[s].height>V+y&&(q[s].textBlock.y=V+y-q[s].height),q[s].textBlock.y<X-y&&(q[s].textBlock.y=X-y)):(q[s].textBlock.y<V-y&&(q[s].textBlock.y=V-y),q[s].textBlock.y+q[s].height>X+y&&(q[s].textBlock.y=X+y-q[s].height)));else for(s=0;s<N.length;s++)0==q[s].textBlock.text.length?q[s].isDirty=!0:(e=(t=N[s]).height,i=q[s].height,a=q[s].width,e>=i?(e=s!=O?(t.x4+t.x3)/2-a/2:(t.x5+t.x4)/2-a/2,i=s!=O?(t.y1+t.y3)/2-i/2:(t.y1+t.y4)/2-i/2,q[s].textBlock.x=e,q[s].textBlock.y=i):q[s].isDirty=!0)}function i(t,e){return(e<N.length?q[e].textBlock.y:x.reversed?V+y:X+y)-(0>t?x.reversed?X-y:V-y:q[t].textBlock.y+q[t].height+U)}function a(t,i,a){var n,o,r,h=[],c=y,p=[];if(-1!==i&&(0<=Q.indexOf(i)?(o=Q.indexOf(i),Q.splice(o,1)):(Q.push(i),Q=Q.sort((function(t,e){return t-e})))),0===Q.length)h=$;else{o=y*(1!=Q.length||0!=Q[0]&&Q[0]!=N.length-1?2:1)/function(){for(var t=0,e=0;e<N.length-1;e++)(0<=Q.indexOf(e)||0<=Q.indexOf(e+1))&&t++;return t}();for(var u=0;u<N.length;u++){if(1==Q.length&&0==Q[0]){if(0===u){h.push($[u]),n=c;continue}}else 0===u&&(n=-1*c);h.push($[u]+n),(0<=Q.indexOf(u)||u<N.length&&0<=Q.indexOf(u+1))&&(n+=o)}}r=function(){for(var t=[],e=0;e<N.length;e++)t.push(h[e]-N[e].y1);return t}();(new Date).getTime();var m=function(t){for(var e,i,a=0;a<N.length;a++)e=r[a],i=N[a],e*=t,"undefined"===typeof p[a]&&(p[a]=0),0>p&&(p*=-1),i.y1+=e-p[a],i.y2+=e-p[a],i.y3+=e-p[a],i.y4+=e-p[a],i.y5&&(i.y5+=e-p[a],i.y6+=e-p[a]),p[a]=e};t._animator.animate(0,a,(function(a){var n=t.plotArea.ctx||t.ctx;J=!0,n.clearRect(f.x1,f.y1,f.x2-f.x1,f.y2-f.y1),n.fillStyle=t.backgroundColor,n.fillRect(f.x1,f.y1,f.width,f.height),m(a,i);var o={};for(o.dataSeries=x,o.dataPoint=x.reversed?x.dataPoints[g.length-1-i]:x.dataPoints[i],o.index=x.reversed?g.length-1-i:i,t.toolTip.highlightObjects([o]),o=0;o<N.length;o++)G(n,N[o],x.fillOpacity);d(n),M&&("inside"!==x.indexLabelPlacement?s(n):e(),l(n)),1<=a&&(J=!1)}),null,K.easing.easeOutQuart)}function s(t){for(var e,i,a,s,n=0;n<N.length;n++)s=1===q[n].lineThickness%2?.5:0,e=h(i=((N[n].y2+N[n].y4)/2<<0)+s).x2-1,a=q[n].textBlock.x,s=(q[n].textBlock.y+q[n].height/2<<0)+s,q[n].isDirty||0==q[n].lineThickness||(t.strokeStyle=q[n].lineColor,t.lineWidth=q[n].lineThickness,t.setLineDash&&t.setLineDash(m(q[n].lineDashType,q[n].lineThickness)),t.beginPath(),t.moveTo(e,i),t.lineTo(a,s),t.stroke())}function n(t){for(t-=1;-1<=t&&-1!=t&&q[t].isDirty;t--);return t}function o(t){for(t+=1;t<=N.length&&t!=N.length&&q[t].isDirty;t++);return t}function h(t){for(var e,i=0;i<g.length;i++)if(N[i].y1<t&&N[i].y4>t){e=N[i];break}return e?{x1:t=e.y6&&t>e.y6?e.x3+(e.x4-e.x3)/(e.y4-e.y3)*(t-e.y3):e.x2+(e.x3-e.x2)/(e.y3-e.y2)*(t-e.y2),x2:t}:-1}function l(t){for(var e=0;e<N.length;e++)q[e].isDirty||(t&&(q[e].textBlock.ctx=t),q[e].textBlock.render(!0))}function d(t){if(u.plotArea.layoutManager.reset(),t.roundRect||r(t),u.title&&(u.title.dockInsidePlotArea||"center"===u.title.horizontalAlign&&"center"===u.title.verticalAlign)&&(u.title.ctx=t,u.title.render()),u.subtitles)for(var e=0;e<u.subtitles.length;e++){var i=u.subtitles[e];(i.dockInsidePlotArea||"center"===i.horizontalAlign&&"center"===i.verticalAlign)&&(u.subtitles.ctx=t,i.render())}u.legend&&(u.legend.dockInsidePlotArea||"center"===u.legend.horizontalAlign&&"center"===u.legend.verticalAlign)&&(u.legend.ctx=t,u.legend.setLayout(),u.legend.render()),Y.fNg&&Y.fNg(u)}var u=this;if(!(0>=t.dataSeriesIndexes.length)){for(var x=this.data[t.dataSeriesIndexes[0]],g=x.dataPoints,f=this.plotArea,y=.025*f.width,b=.01*f.width,v=0,_=f.height-2*y,k=Math.min(f.width-2*b,2.8*f.height),M=!1,w=0;w<g.length;w++)!M&&"undefined"!==typeof g[w].indexLabel&&null!==g[w].indexLabel&&0<g[w].indexLabel.toString().length&&(M=!0),!M&&"undefined"!==typeof g[w].label&&null!==g[w].label&&0<g[w].label.toString().length&&(M=!0),(!M&&"function"===typeof x.indexLabelFormatter||"function"===typeof g[w].indexLabelFormatter)&&(M=!0);M=M||"undefined"!==typeof x.indexLabel&&null!==x.indexLabel&&0<x.indexLabel.toString().length,"inside"!==x.indexLabelPlacement&&M||(b=(f.width-.75*k)/2);w=f.x1+b;var T=f.x2-b,P=f.y1+y,C=f.y2-y,S=t.targetCanvasCtx||this.plotArea.ctx||this.ctx;if(0!=x.length&&x.dataPoints&&x.visible&&0!==g.length){var L,B,F=30*(T-(t=75*k/100))/100;"funnel"===x.type?(L=c(x.options.neckHeight)?.35*_:x.neckHeight,B=c(x.options.neckWidth)?.25*t:x.neckWidth,"string"===typeof L&&L.match(/%$/)?L=(L=parseInt(L))*_/100:L=parseInt(L),"string"===typeof B&&B.match(/%$/)?B=(B=parseInt(B))*t/100:B=parseInt(B),L>_?L=_:0>=L&&(L=0),B>t?B=t-.5:0>=B&&(B=0)):"pyramid"===x.type&&(B=L=0,x.reversed=!x.reversed);b=w+t/2;var I=w,z=w+t,V=x.reversed?C:P,D=b-B/2,W=b+B/2,E=x.reversed?P+L:C-L,X=x.reversed?P:C;t=[];b=[];var O,N=[],H=(k=[],P),Z=(E-V)/(D-I),j=-Z;w="area"===(x.valueRepresents?x.valueRepresents:"height")?function(){var t,e,i=I,a=z,s=D,n=W;t=P,e=C-L,n=Math.abs((e-t)*(a-i+(n-s))/2),t=e-t,e=(s=W-D)*(e-C),e=n+(e=Math.abs(e)),n=[];for(var o=0,r=0;r<g.length;r++){if("undefined"===typeof g[r].y)return-1;g[r].y="number"===typeof g[r].y?g[r].y:0,o+=Math.abs(g[r].y)}if(0===o)return-1;var h,l,d=n[0]=0,c=0;for(a-=i,d=!1,r=0;r<g.length;r++)i=Math.abs(g[r].y)*e/o,d?h=0==Number(s.toFixed(3))?0:i/s:0>(l=Z*Z*a*a-4*Math.abs(Z)*i)?(i-=d=(a+(l=s))*(t-c)/2,h=t-c,c+=t-c,h+=0==l?0:i/l,c+=i/l,d=!0):(l=a-2*(h=(Math.abs(Z)*a-Math.sqrt(l))/2)/Math.abs(Z),(c+=h)>t&&(d=(a+(l=s))*(t-(c-=h))/2,h=t-c,c+=t-c,h+=(i-=d)/l,c+=i/l,d=!0),a=l),n.push(h);return n}():function(){for(var t=0,e=[],i=0;i<g.length;i++){if("undefined"===typeof g[i].y)return-1;g[i].y="number"===typeof g[i].y?g[i].y:0,t+=Math.abs(g[i].y)}if(0===t)return-1;for(i=e[0]=0;i<g.length;i++)e.push(Math.abs(g[i].y)*_/t);return e}();if(-1!==w){if(x.reversed)for(k.push(H),B=w.length-1;0<B;B--)H+=w[B],k.push(H);else for(B=0;B<w.length;B++)H+=w[B],k.push(H);if(x.reversed)for(B=0;B<w.length;B++)k[B]<E?(t.push(D),b.push(W),O=B):(t.push((k[B]-V+Z*I)/Z),b.push((k[B]-V+j*z)/j));else for(B=0;B<w.length;B++)k[B]<E?(t.push((k[B]-V+Z*I)/Z),b.push((k[B]-V+j*z)/j),O=B):(t.push(D),b.push(W));for(B=0;B<w.length-1;B++)H=x.reversed?g[g.length-1-B].color?g[g.length-1-B].color:x._colorSet[(g.length-1-B)%x._colorSet.length]:g[B].color?g[B].color:x._colorSet[B%x._colorSet.length],B===O?N.push({x1:t[B],y1:k[B],x2:b[B],y2:k[B],x3:W,y3:E,x4:b[B+1],y4:k[B+1],x5:t[B+1],y5:k[B+1],x6:D,y6:E,id:B,height:k[B+1]-k[B],color:H}):N.push({x1:t[B],y1:k[B],x2:b[B],y2:k[B],x3:b[B+1],y3:k[B+1],x4:t[B+1],y4:k[B+1],id:B,height:k[B+1]-k[B],color:H});var U=2,q=[],J=!1,Q=[],$=[];w=!1;for(t=t=0,p(Q),B=0;B<g.length;B++)g[B].exploded&&(w=!0,x.reversed?Q.push(g.length-1-B):Q.push(B));if(S.clearRect(f.x1,f.y1,f.width,f.height),S.fillStyle=u.backgroundColor,S.fillRect(f.x1,f.y1,f.width,f.height),M&&x.visible&&(function(){if(x&&g){for(var t,e,i,a,s,n,o,l,d,p,m,f,y,b,v,_=[],k=[],M={percent:null,total:null},w=null,P=0;P<g.length;P++)v=h(v="undefined"!==typeof(v=N[P]).x5?(v.y2+v.y4)/2:(v.y2+v.y3)/2).x2+1,_[P]=T-v-F;v=.5*F,P=0;for(var C=g.length-1;P<g.length||0<=C;P++,C--)t=(e=x.reversed?g[C]:g[P]).color?e.color:x.reversed?x._colorSet[(g.length-1-P)%x._colorSet.length]:x._colorSet[P%x._colorSet.length],i=e.indexLabelPlacement||x.indexLabelPlacement||"outside",b=e.indexLabelTextAlign||x.indexLabelTextAlign||"left",a=e.indexLabelBackgroundColor||x.indexLabelBackgroundColor||(R?"transparent":null),s=e.indexLabelFontColor||x.indexLabelFontColor||"#979797",n=c(e.indexLabelFontSize)?x.indexLabelFontSize:e.indexLabelFontSize,o=e.indexLabelFontStyle||x.indexLabelFontStyle||"normal",l=e.indexLabelFontFamily||x.indexLabelFontFamily||"arial",d=e.indexLabelFontWeight||x.indexLabelFontWeight||"normal",t=e.indexLabelLineColor||x.options.indexLabelLineColor||t,p="number"===typeof e.indexLabelLineThickness?e.indexLabelLineThickness:"number"===typeof x.indexLabelLineThickness?x.indexLabelLineThickness:2,m=e.indexLabelLineDashType||x.indexLabelLineDashType||"solid",f="undefined"!==typeof e.indexLabelWrap?e.indexLabelWrap:"undefined"===typeof x.indexLabelWrap||x.indexLabelWrap,y=x.dataPointIds[P],u._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataPointIndex:P,dataSeriesIndex:0,funnelSection:N[x.reversed?g.length-1-P:P]},"inside"===x.indexLabelPlacement&&(_[P]=P!==O?x.reversed?N[P].x2-N[P].x1:N[P].x3-N[P].x4:N[P].x3-N[P].x6,20>_[P]&&(_[P]=P!==O&&x.reversed?N[P].x3-N[P].x4:N[P].x2-N[P].x1,_[P]/=2)),((y=e.indexLabelMaxWidth?e.indexLabelMaxWidth:x.options.indexLabelMaxWidth?x.indexLabelMaxWidth:_[P])>_[P]||0>y)&&(y=_[P]),k[P]="inside"===x.indexLabelPlacement&&(f?Math.max(N[P].height,n):1.5*n),M=u.getPercentAndTotal(x,e),(x.indexLabelFormatter||e.indexLabelFormatter)&&(w={chart:u.options,dataSeries:x,dataPoint:e,total:M.total,percent:M.percent}),e=e.indexLabelFormatter?e.indexLabelFormatter(w):e.indexLabel?u.replaceKeywordsWithValue(e.indexLabel,e,x,P):x.indexLabelFormatter?x.indexLabelFormatter(w):x.indexLabel?u.replaceKeywordsWithValue(x.indexLabel,e,x,P):e.label?e.label:"",0>=p&&(p=0),1e3>y&&1e3-y<v&&(y+=1e3-y),S.roundRect||r(S),(i=new A(S,{fontSize:n,fontFamily:l,fontColor:s,fontStyle:o,fontWeight:d,horizontalAlign:i,textAlign:b,backgroundColor:a,maxWidth:y,maxHeight:!1===k[P]?f?4.28571429*n:1.5*n:k[P],text:e,padding:U})).measureText(),q.push({textBlock:i,id:x.reversed?C:P,isDirty:!1,lineColor:t,lineThickness:p,lineDashType:m,height:i.height<i.maxHeight?i.height:i.maxHeight,width:i.width<i.maxWidth?i.width:i.maxWidth})}}(),e(),function(){var t,e,i,a,s,n=[];s=!1,i=0;for(var r,h=T-z-F/2,l=(h=x.options.indexLabelMaxWidth?x.indexLabelMaxWidth>h?h:x.indexLabelMaxWidth:h,q.length-1);0<=l;l--)r=g[q[l].id],a=(i=q[l]).textBlock,e=(t=o(l)<N.length?q[o(l)]:null)?t.textBlock:null,i=i.height,t&&a.y+i+U>e.y&&(s=!0),((i=r.indexLabelMaxWidth||h)>h||0>i)&&(i=h),n.push(i);if(s)for(l=q.length-1;0<=l;l--)t=N[l],q[l].textBlock.maxWidth=n[n.length-(l+1)],q[l].textBlock.measureText(),q[l].textBlock.x=T-h,i=q[l].textBlock.height<q[l].textBlock.maxHeight?q[l].textBlock.height:q[l].textBlock.maxHeight,s=q[l].textBlock.width<q[l].textBlock.maxWidth?q[l].textBlock.width:q[l].textBlock.maxWidth,q[l].height=i,q[l].width=s,i="undefined"!==typeof t.x5?(t.y2+t.y4)/2:(t.y2+t.y3)/2,q[l].textBlock.y=i-q[l].height/2,x.reversed?(q[l].textBlock.y+q[l].height>V+y&&(q[l].textBlock.y=V+y-q[l].height),q[l].textBlock.y<X-y&&(q[l].textBlock.y=X-y)):(q[l].textBlock.y<V-y&&(q[l].textBlock.y=V-y),q[l].textBlock.y+q[l].height>X+y&&(q[l].textBlock.y=X+y-q[l].height))}(),"inside"!==x.indexLabelPlacement)){for(function(){function t(e,a){var s;if(0>e||e>=q.length)return 0;var r,h=q[e].textBlock;return 0>a?(a*=-1,(s=i(r=n(e),e))>=a?(h.y-=a,a):0==e?(0<s&&(h.y-=s),s):(0<(s+=t(r,-(a-s)))&&(h.y-=s),s)):(s=i(e,r=o(e)))>=a?(h.y+=a,a):e==N.length-1?(0<s&&(h.y+=s),s):(0<(s+=t(r,a-s))&&(h.y+=s),s)}function e(){var t,e,i,s,r,h=0;s=(C-P+2*y)/p,r=p;for(var l,d=1;d<r;d++){i=d*s;for(var c=q.length-1;0<=c;c--)!q[c].isDirty&&q[c].textBlock.y<i&&q[c].textBlock.y+q[c].height>i&&!((l=o(c))>=q.length-1)&&q[c].textBlock.y+q[c].height+U>q[l].textBlock.y&&(q[c].textBlock.y=q[c].textBlock.y+q[c].height-i>i-q[c].textBlock.y?i+1:i-q[c].height-1)}for(l=N.length-1;0<l;l--)if(!q[l].isDirty){if(0>(i=n(l))&&q[i=0].isDirty)break;if(q[l].textBlock.y<q[i].textBlock.y+q[i].height){for(e=e||l,s=l,r=0;q[s].textBlock.y<q[i].textBlock.y+q[i].height+U;){if(t=t||q[s].textBlock.y+q[s].height,r+=q[s].height,r+=U,0>=(s=i)){r+=q[s=0].height;break}if(0>(i=n(s))){r+=q[s=0].height;break}}if(s!=l){h=a(t=r-(t-=h=q[s].textBlock.y),e,s);break}}}return h}function a(t,e,i){var a=[],s=0,n=0;for(t=Math.abs(t);i<=e;i++)a.push(N[i]);for(a.sort((function(t,e){return t.height-e.height})),i=0;i<a.length&&(e=a[i],s<t);i++)n++,s+=q[e.id].height+U,q[e.id].textBlock.text="",q[e.id].indexLabelText="",q[e.id].isDirty=!0,q[e.id].textBlock.measureText();return n}for(var s,r,h,l,d,c,p=1,u=0;u<2*p;u++){for(var x=q.length-1;0<=x&&(0<=n(x)&&n(x),l=(h=q[x]).textBlock,c=(d=o(x)<N.length?q[o(x)]:null)?d.textBlock:null,s=+h.height.toFixed(6),r=+l.y.toFixed(6),!(!h.isDirty&&d&&r+s+U>+c.y.toFixed(6)&&(s=l.y+s+U-c.y,r=t(x,-s),r<s&&(0<r&&(s-=r),r=t(o(x),s),r!=s))));x--);e()}}(),B=0;B<g.length;B++)q[B].isDirty||(t=q[B].textBlock.x+q[B].width,t=(T-t)/2,0==B&&(v=t),v>t&&(v=t));for(B=0;B<N.length;B++)N[B].x1+=v,N[B].x2+=v,N[B].x3+=v,N[B].x4+=v,N[B].x5&&(N[B].x5+=v,N[B].x6+=v),q[B].textBlock.x+=v}for(B=0;B<N.length;B++)v=N[B],G(S,v,x.fillOpacity),$.push(v.y1);if(d(S),M&&x.visible&&("inside"===x.indexLabelPlacement||u.animationEnabled||s(S),u.animationEnabled||l()),!M)for(B=0;B<g.length;B++)t={id:v=x.dataPointIds[B],objectType:"dataPoint",dataPointIndex:B,dataSeriesIndex:0,funnelSection:N[x.reversed?g.length-1-B:B]},u._eventManager.objectMap[v]=t;return(!u.animationEnabled&&w||u.animationEnabled&&!u.animatedRender)&&a(u,-1,0),this.funnelPyramidClickHandler=function(t){var e=-1;!J&&!u.isAnimating&&(c(t.dataSeries.explodeOnClick)||t.dataSeries.explodeOnClick)&&0<=(e=x.reversed?g.length-1-t.dataPointIndex:t.dataPointIndex)&&(t=e,"funnel"!==x.type&&"pyramid"!==x.type||(x.reversed?g[g.length-1-t].exploded=!g[g.length-1-t].exploded:g[t].exploded=!g[t].exploded),a(u,e,500))},{source:S,dest:this.plotArea.ctx,animationCallback:function(t,e){K.fadeInAnimation(t,e),1<=t&&(a(u,-1,500),d(u.plotArea.ctx||u.ctx))},easingFunction:K.easing.easeInQuad,animationBase:0}}}}},e.prototype.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},e.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,e.prototype.set=function(t,i,a){a="undefined"===typeof a||a,"options"===t?(this.options=i,a&&this.render()):e.base.set.call(this,t,i,a)},e.prototype.exportChart=function(t){var e=(t="undefined"===typeof t?{}:t).format?t.format:"png",i=t.fileName?t.fileName:this.exportFileName;if(t.toDataURL)return this.canvas.toDataURL("image/"+e);if((a=this.canvas)&&e&&i){i=i+"."+e,t="image/"+e;var a=a.toDataURL(t),s=!1,n=document.createElement("a");if(n.download=i,n.href=a,"undefined"!==typeof Blob&&new Blob){for(var o=a.replace(/^data:[a-z\/]*;base64,/,""),r=(o=atob(o),new ArrayBuffer(o.length)),h=(r=new Uint8Array(r),0);h<o.length;h++)r[h]=o.charCodeAt(h);e=new Blob([r.buffer],{type:"image/"+e});try{window.navigator.msSaveBlob(e,i),s=!0}catch(l){n.dataset.downloadurl=[t,n.download,n.href].join(":"),n.href=window.URL.createObjectURL(e)}}if(!s)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent?n.dispatchEvent(event):n.fireEvent&&n.fireEvent("onclick")}catch(d){(e=window.open()).document.write("<img src='"+a+"'></img><div>Please right click on the image and save it to your device</div>"),e.document.close()}}},e.prototype.print=function(){var t=this.exportChart({toDataURL:!0}),e=document.createElement("iframe");e.setAttribute("class","canvasjs-chart-print-frame"),k(e,{position:"absolute",width:"100%",border:"0px",margin:"0px 0px 0px 0px",padding:"0px 0px 0px 0px"}),e.style.height=this.height+"px",this._canvasJSContainer.appendChild(e);var i=this,a=e.contentWindow||e.contentDocument.document||e.contentDocument;a.document.open(),a.document.write('<!DOCTYPE HTML>\n<html><body><img src="'+t+'"/><body/></html>'),a.document.body&&a.document.body.style&&(a.document.body.style.margin="0px 0px 0px 0px",a.document.body.style.padding="0px 0px 0px 0px"),a.document.close(),setTimeout((function(){a.focus(),a.print(),setTimeout((function(){i._canvasJSContainer.removeChild(e)}),1e3)}),500)},e.prototype.getPercentAndTotal=function(t,e){var i=null,a=null,s=i=null;if(0<=t.type.indexOf("stacked"))a=0,(i=e.x.getTime?e.x.getTime():e.x)in t.plotUnit.yTotals&&(a=t.plotUnit.yTotals[i],i=t.plotUnit.yAbsTotals[i],s=isNaN(e.y)||0===i?0:e.y/i*100);else if("pie"===t.type||"doughnut"===t.type||"funnel"===t.type||"pyramid"===t.type){for(i=a=0;i<t.dataPoints.length;i++)isNaN(t.dataPoints[i].y)||(a+=t.dataPoints[i].y);s=isNaN(e.y)?0:e.y/a*100}return{percent:s,total:a}},e.prototype.replaceKeywordsWithValue=function(t,e,i,a,s){var n=this;if(s="undefined"===typeof s?0:s,(0<=i.type.indexOf("stacked")||"pie"===i.type||"doughnut"===i.type||"funnel"===i.type||"pyramid"===i.type)&&(0<=t.indexOf("#percent")||0<=t.indexOf("#total"))){var r="#percent",h="#total",l=this.getPercentAndTotal(i,e);h=isNaN(l.total)?h:l.total,r=isNaN(l.percent)?r:l.percent;do{if(l="",i.percentFormatString)l=i.percentFormatString;else{l="#,##0.";var d=Math.max(Math.ceil(Math.log(1/Math.abs(r))/Math.LN10),2);!isNaN(d)&&isFinite(d)||(d=2);for(var c=0;c<d;c++)l+="#";i.percentFormatString=l}t=(t=t.replace("#percent",rt(r,l,n._cultureInfo))).replace("#total",rt(h,i.yValueFormatString?i.yValueFormatString:"#,##0.########",n._cultureInfo))}while(0<=t.indexOf("#percent")||0<=t.indexOf("#total"))}return t.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,(function(t){if('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])return t.slice(1,t.length-1);t=(t=o(t.slice(1,t.length-1))).replace("#index",s);var r=null;try{var h=t.match(/(.*?)\s*\[\s*(.*?)\s*\]/);h&&0<h.length&&(r=o(h[2]),t=o(h[1]))}catch(d){}if(h=null,"color"===t)return"waterfall"===i.type?e.color?e.color:0<e.y?i.risingColor:i.fallingColor:"error"===i.type?i.color?i.color:i._colorSet[r%i._colorSet.length]:e.color?e.color:i.color?i.color:i._colorSet[a%i._colorSet.length];if(e.hasOwnProperty(t))h=e;else{if(!i.hasOwnProperty(t))return"";h=i}return h=h[t],null!==r&&(h=h[r]),"x"===t?(i.axisX&&"dateTime"===i.axisX.valueType||"dateTime"===i.xValueType||e.x&&e.x.getTime)&&!i.axisX.logarithmic?ot(h,e.xValueFormatString?e.xValueFormatString:i.xValueFormatString?i.xValueFormatString:i.xValueFormatString=n.axisX&&n.axisX.autoValueFormatString?n.axisX.autoValueFormatString:"DD MMM YY",n._cultureInfo):rt(h,e.xValueFormatString?e.xValueFormatString:i.xValueFormatString?i.xValueFormatString:i.xValueFormatString="#,##0.########",n._cultureInfo):"y"===t?rt(h,e.yValueFormatString?e.yValueFormatString:i.yValueFormatString?i.yValueFormatString:i.yValueFormatString="#,##0.########",n._cultureInfo):"z"===t?rt(h,e.zValueFormatString?e.zValueFormatString:i.zValueFormatString?i.zValueFormatString:i.zValueFormatString="#,##0.########",n._cultureInfo):h}))},a(d,C),d.prototype.setLayout=function(){var t=this.dockInsidePlotArea?this.chart.plotArea:this.chart,e=t.layoutManager.getFreeSpace(),i=null,a=0,s=0,n=0,o=0,r=this.markerMargin=this.chart.options.legend&&!c(this.chart.options.legend.markerMargin)?this.chart.options.legend.markerMargin:.3*this.fontSize;this.height=0;var h=[],l=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",i=this.verticalAlign,n=this.maxWidth=null!==this.maxWidth?this.maxWidth:e.width,o=this.maxHeight=null!==this.maxHeight?this.maxHeight:.5*e.height):"center"===this.verticalAlign&&(this.orientation="vertical","left"!==this.horizontalAlign&&"center"!==this.horizontalAlign&&"right"!==this.horizontalAlign||(i=this.horizontalAlign),n=this.maxWidth=null!==this.maxWidth?this.maxWidth:.5*e.width,o=this.maxHeight=null!==this.maxHeight?this.maxHeight:e.height),this.errorMarkerColor=[];for(var d=0;d<this.dataSeries.length;d++){var p=this.dataSeries[d];if(p.dataPoints&&p.dataPoints.length)if("pie"!==p.type&&"doughnut"!==p.type&&"funnel"!==p.type&&"pyramid"!==p.type){var u=p.legendMarkerType=p.legendMarkerType?p.legendMarkerType:"line"!==p.type&&"stepLine"!==p.type&&"spline"!==p.type&&"scatter"!==p.type&&"bubble"!==p.type||!p.markerType?"error"===p.type&&p._linkedSeries?p._linkedSeries.legendMarkerType?p._linkedSeries.legendMarkerType:V.getDefaultLegendMarker(p._linkedSeries.type):V.getDefaultLegendMarker(p.type):p.markerType,x=p.legendText?p.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:p,dataPoint:null}):p.name,m=p.legendMarkerColor=p.legendMarkerColor?p.legendMarkerColor:p.markerColor?p.markerColor:"error"===p.type?c(p.whiskerColor)?p._colorSet[0]:p.whiskerColor:p._colorSet[0],g=p.markerSize||"line"!==p.type&&"stepLine"!==p.type&&"spline"!==p.type?.75*this.lineHeight:0,f=p.legendMarkerBorderColor?p.legendMarkerBorderColor:p.markerBorderColor,y=p.legendMarkerBorderThickness?p.legendMarkerBorderThickness:p.markerBorderThickness?Math.max(1,Math.round(.2*g)):0;"error"===p.type&&this.errorMarkerColor.push(m),u={markerType:u,markerColor:m,text:x=this.chart.replaceKeywordsWithValue(x,p.dataPoints[0],p,d),textBlock:null,chartType:p.type,markerSize:g,lineColor:p._colorSet[0],dataSeriesIndex:p.index,dataPointIndex:null,markerBorderColor:f,markerBorderThickness:y},h.push(u)}else for(var b=0;b<p.dataPoints.length;b++){var v=p.dataPoints[b];u=v.legendMarkerType?v.legendMarkerType:p.legendMarkerType?p.legendMarkerType:V.getDefaultLegendMarker(p.type),x=v.legendText?v.legendText:p.legendText?p.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart,legend:this.options,dataSeries:p,dataPoint:v}):v.name?v.name:"DataPoint: "+(b+1),m=v.legendMarkerColor?v.legendMarkerColor:p.legendMarkerColor?p.legendMarkerColor:v.color?v.color:p.color?p.color:p._colorSet[b%p._colorSet.length],g=.75*this.lineHeight,f=v.legendMarkerBorderColor?v.legendMarkerBorderColor:p.legendMarkerBorderColor?p.legendMarkerBorderColor:v.markerBorderColor?v.markerBorderColor:p.markerBorderColor,y=v.legendMarkerBorderThickness?v.legendMarkerBorderThickness:p.legendMarkerBorderThickness?p.legendMarkerBorderThickness:v.markerBorderThickness||p.markerBorderThickness?Math.max(1,Math.round(.2*g)):0,u={markerType:u,markerColor:m,text:x=this.chart.replaceKeywordsWithValue(x,v,p,b),textBlock:null,chartType:p.type,markerSize:g,dataSeriesIndex:d,dataPointIndex:b,markerBorderColor:f,markerBorderThickness:y};(v.showInLegend||p.showInLegend&&!1!==v.showInLegend)&&h.push(u)}}if(!0===this.reversed&&h.reverse(),0<h.length){for(p=null,x=v=b=0,v=null!==this.itemWidth?null!==this.itemMaxWidth?Math.min(this.itemWidth,this.itemMaxWidth,n):this.itemMaxWidth=Math.min(this.itemWidth,n):null!==this.itemMaxWidth?Math.min(this.itemMaxWidth,n):this.itemMaxWidth=n,g=0===g?.75*this.lineHeight:g,v=(this.itemMaxWidth?this.itemMaxWidth:v)-(g+r),d=0;d<h.length;d++)m=v,"line"!==(u=h[d]).chartType&&"spline"!==u.chartType&&"stepLine"!==u.chartType||(m-=.2*this.lineHeight),0>=o||"undefined"===typeof o||0>=m||"undefined"===typeof m||("horizontal"===this.orientation?(u.textBlock=new A(this.ctx,{x:0,y:0,maxWidth:m,maxHeight:this.itemWrap?o:this.lineHeight,angle:0,text:u.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),u.textBlock.measureText(),null!==this.itemWidth&&(u.textBlock.width=this.itemWidth-(g+r+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0))),(!p||p.width+Math.round(u.textBlock.width+g+r+(0===p.width?0:this.horizontalSpacing)+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0))>n)&&(p={items:[],width:0},l.push(p),this.height+=x,x=0),x=Math.max(x,u.textBlock.height?u.textBlock.height:this.lineHeight),u.textBlock.x=p.width,u.textBlock.y=0,p.width+=Math.round(u.textBlock.width+g+r+(0===p.width?0:this.horizontalSpacing)+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0)),p.items.push(u),this.width=Math.max(p.width,this.width)):(u.textBlock=new A(this.ctx,{x:0,y:0,maxWidth:v,maxHeight:!0===this.itemWrap?o:1.5*this.fontSize,angle:0,text:u.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"middle"}),u.textBlock.measureText(),null!==this.itemWidth&&(u.textBlock.width=this.itemWidth-(g+r+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0))),this.height<o-this.lineHeight?(p={items:[],width:0},l.push(p)):(p=l[b],b=(b+1)%l.length),p&&(this.height+=u.textBlock.height?u.textBlock.height:this.lineHeight,u.textBlock.x=p.width,u.textBlock.y=0,p.width+=Math.round(u.textBlock.width+g+r+(0===p.width?0:this.horizontalSpacing)+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0)),p.items.push(u),this.width=Math.max(p.width,this.width))));this.height=!1===this.itemWrap?l.length*this.lineHeight:this.height+x,this.height=Math.min(o,this.height),this.width=Math.min(n,this.width)}for("top"===this.verticalAlign?(s="left"===this.horizontalAlign?e.x1:"right"===this.horizontalAlign?e.x2-this.width:e.x1+e.width/2-this.width/2,a=e.y1):"center"===this.verticalAlign?(s="left"===this.horizontalAlign?e.x1:"right"===this.horizontalAlign?e.x2-this.width:e.x1+e.width/2-this.width/2,a=e.y1+e.height/2-this.height/2):"bottom"===this.verticalAlign&&(s="left"===this.horizontalAlign?e.x1:"right"===this.horizontalAlign?e.x2-this.width:e.x1+e.width/2-this.width/2,a=e.y2-this.height),this.items=h,d=0;d<this.items.length;d++)(u=h[d]).id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[u.id]={id:u.id,objectType:"legendItem",legendItemIndex:d,dataSeriesIndex:u.dataSeriesIndex,dataPointIndex:u.dataPointIndex};this.markerSize=g,this.rows=l,0<h.length&&t.layoutManager.registerSpace(i,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:s,y1:a,x2:s+this.width,y2:a+this.height}},d.prototype.render=function(){var t=this.bounds.x1,e=this.bounds.y1,i=this.markerMargin,a=this.maxWidth,s=this.maxHeight,n=this.markerSize,o=this.rows;(0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(t,e,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor);for(var r=0,h=0;h<o.length;h++){for(var d=o[h],c=0,p=0;p<d.items.length;p++){var u=d.items[p],x=u.textBlock.x+t+(0===p?.2*n:this.horizontalSpacing),m=e+r,g=x;if(this.chart.data[u.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t,e,a,Math.max(s-s%this.lineHeight,0)),this.ctx.clip(),"line"!==u.chartType&&"stepLine"!==u.chartType&&"spline"!==u.chartType||(this.ctx.strokeStyle=u.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(x-.1*this.lineHeight,m+this.lineHeight/2),this.ctx.lineTo(x+.85*this.lineHeight,m+this.lineHeight/2),this.ctx.stroke(),g-=.1*this.lineHeight),"error"===u.chartType){this.ctx.strokeStyle=this.errorMarkerColor[0],this.ctx.lineWidth=n/8,this.ctx.beginPath();var f=x-.08*this.lineHeight+.1*this.lineHeight,y=m+.15*this.lineHeight,b=.7*this.lineHeight,v=b+.02*this.lineHeight;this.ctx.moveTo(f,y),this.ctx.lineTo(f+b,y),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(f+b/2,y),this.ctx.lineTo(f+b/2,y+v),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(f,y+v),this.ctx.lineTo(f+b,y+v),this.ctx.stroke(),this.errorMarkerColor.shift()}J.drawMarker(x+n/2,m+this.lineHeight/2,this.ctx,u.markerType,"error"===u.chartType||"line"===u.chartType||"spline"===u.chartType?u.markerSize/2:u.markerSize,u.markerColor,u.markerBorderColor,u.markerBorderThickness),u.textBlock.x=x+i+n,"line"!==u.chartType&&"stepLine"!==u.chartType&&"spline"!==u.chartType||(u.textBlock.x+=.1*this.lineHeight),u.textBlock.y=Math.round(m+this.lineHeight/2),u.textBlock.render(!0),this.ctx.restore(),c=0<p?Math.max(c,u.textBlock.height?u.textBlock.height:this.lineHeight):u.textBlock.height?u.textBlock.height:this.lineHeight,this.chart.data[u.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),x=l(u.id),this.ghostCtx.fillStyle=x,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(g,u.textBlock.y-this.lineHeight/2,u.textBlock.x+u.textBlock.width-g,u.textBlock.height?u.textBlock.height:this.lineHeight),u.x1=this.chart._eventManager.objectMap[u.id].x1=g,u.y1=this.chart._eventManager.objectMap[u.id].y1=u.textBlock.y-this.lineHeight/2,u.x2=this.chart._eventManager.objectMap[u.id].x2=u.textBlock.x+u.textBlock.width,u.y2=this.chart._eventManager.objectMap[u.id].y2=u.textBlock.y+(u.textBlock.height?u.textBlock.height:this.lineHeight)-this.lineHeight/2}r+=c}},a(V,C),V.prototype.getDefaultAxisPlacement=function(){var t=this.type;return"column"===t||"line"===t||"stepLine"===t||"spline"===t||"area"===t||"stepArea"===t||"splineArea"===t||"stackedColumn"===t||"stackedLine"===t||"bubble"===t||"scatter"===t||"stackedArea"===t||"stackedColumn100"===t||"stackedLine100"===t||"stackedArea100"===t||"candlestick"===t||"ohlc"===t||"rangeColumn"===t||"rangeArea"===t||"rangeSplineArea"===t||"boxAndWhisker"===t||"waterfall"===t?"normal":"bar"===t||"stackedBar"===t||"stackedBar100"===t||"rangeBar"===t?"xySwapped":"pie"===t||"doughnut"===t||"funnel"===t||"pyramid"===t?"none":("error"!==t&&window.console.log("Unknown Chart Type: "+t),null)},V.getDefaultLegendMarker=function(t){return"column"===t||"stackedColumn"===t||"stackedLine"===t||"bar"===t||"stackedBar"===t||"stackedBar100"===t||"bubble"===t||"scatter"===t||"stackedColumn100"===t||"stackedLine100"===t||"stepArea"===t||"candlestick"===t||"ohlc"===t||"rangeColumn"===t||"rangeBar"===t||"rangeArea"===t||"rangeSplineArea"===t||"boxAndWhisker"===t||"waterfall"===t?"square":"line"===t||"stepLine"===t||"spline"===t||"pie"===t||"doughnut"===t?"circle":"area"===t||"splineArea"===t||"stackedArea"===t||"stackedArea100"===t||"funnel"===t||"pyramid"===t?"triangle":"error"===t?"none":(window.console.log("Unknown Chart Type: "+t),null)},V.prototype.getDataPointAtX=function(t,e){if(!this.dataPoints||0===this.dataPoints.length)return null;var i={dataPoint:null,distance:1/0,index:NaN},a=null,s=0,n=0,o=1,r=1/0,h=0,l=0,d=0;for("none"!==this.chart.plotInfo.axisPlacement&&(this.axisX.logarithmic?d=1<(d=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x))?Math.min(Math.max((this.dataPoints.length-1)/d*Math.log(t/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0:d=0<(d=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x)?Math.min(Math.max((this.dataPoints.length-1)/d*(t-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0);;){if(0<=(n=0<o?d+s:d-s)&&n<this.dataPoints.length){a=this.dataPoints[n];var c=this.axisX.logarithmic?a.x>t?a.x/t:t/a.x:Math.abs(a.x-t);if(c<i.distance&&(i.dataPoint=a,i.distance=c,i.index=n),(a=c)<=r?r=a:0<o?h++:l++,1e3<h&&1e3<l)break}else if(0>d-s&&d+s>=this.dataPoints.length)break;-1===o?(s++,o=1):o=-1}return e||(i.dataPoint.x.getTime?i.dataPoint.x.getTime():i.dataPoint.x)!==(t.getTime?t.getTime():t)?e&&null!==i.dataPoint?i:null:i},V.prototype.getDataPointAtXY=function(t,e,i){if(!this.dataPoints||0===this.dataPoints.length||t<this.chart.plotArea.x1||t>this.chart.plotArea.x2||e<this.chart.plotArea.y1||e>this.chart.plotArea.y2)return null;i=i||!1;var a=[],s=0,n=0,o=1,r=!1,h=1/0,l=0,d=0,p=0;if("none"!==this.chart.plotInfo.axisPlacement)if(p=(this.chart.axisX[0]?this.chart.axisX[0]:this.chart.axisX2[0]).getXValueAt({x:t,y:e}),this.axisX.logarithmic)p=1<(u=Math.log(this.dataPoints[this.dataPoints.length-1].x/this.dataPoints[0].x))?Math.min(Math.max((this.dataPoints.length-1)/u*Math.log(p/this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;else p=0<(u=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x)?Math.min(Math.max((this.dataPoints.length-1)/u*(p-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0;for(;;){if(0<=(n=0<o?p+s:p-s)&&n<this.dataPoints.length){var u=this.chart._eventManager.objectMap[this.dataPointIds[n]],x=this.dataPoints[n],m=null;if(u){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":case"waterfall":case"error":t>=u.x1&&t<=u.x2&&e>=u.y1&&e<=u.y2&&(a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:Math.min(Math.abs(u.x1-t),Math.abs(u.x2-t),Math.abs(u.y1-e),Math.abs(u.y2-e))}),r=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var g=y("markerSize",x,this)||4,f=i?20:g;(m=Math.sqrt(Math.pow(u.x1-t,2)+Math.pow(u.y1-e,2)))<=f&&a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:m}),(u=Math.abs(u.x1-t))<=h?h=u:0<o?l++:d++,m<=g/2&&(r=!0);break;case"rangeArea":case"rangeSplineArea":g=y("markerSize",x,this)||4,f=i?20:g,(m=Math.min(Math.sqrt(Math.pow(u.x1-t,2)+Math.pow(u.y1-e,2)),Math.sqrt(Math.pow(u.x1-t,2)+Math.pow(u.y2-e,2))))<=f&&a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:m}),(u=Math.abs(u.x1-t))<=h?h=u:0<o?l++:d++,m<=g/2&&(r=!0);break;case"bubble":g=u.size,(m=Math.sqrt(Math.pow(u.x1-t,2)+Math.pow(u.y1-e,2)))<=g/2&&(a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:m}),r=!0);break;case"pie":case"doughnut":g=u.center,f="doughnut"===this.type?u.percentInnerRadius*u.radius:0,(m=Math.sqrt(Math.pow(g.x-t,2)+Math.pow(g.y-e,2)))<u.radius&&m>f&&(0>(m=Math.atan2(e-g.y,t-g.x))&&(m+=2*Math.PI),m=Number(((m/Math.PI*180%360+360)%360).toFixed(12)),g=Number(((u.startAngle/Math.PI*180%360+360)%360).toFixed(12)),0===(f=Number(((u.endAngle/Math.PI*180%360+360)%360).toFixed(12)))&&1<u.endAngle&&(f=360),g>=f&&0!==x.y&&!c(x.y)&&(f+=360,m<g&&(m+=360)),m>g&&m<f&&(a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:0}),r=!0));break;case"funnel":case"pyramid":e>(m=u.funnelSection).y1&&e<m.y4&&(m.y6?e>m.y6?(n=m.x6+(m.x5-m.x6)/(m.y5-m.y6)*(e-m.y6),m=m.x3+(m.x4-m.x3)/(m.y4-m.y3)*(e-m.y3)):(n=m.x1+(m.x6-m.x1)/(m.y6-m.y1)*(e-m.y1),m=m.x2+(m.x3-m.x2)/(m.y3-m.y2)*(e-m.y2)):(n=m.x1+(m.x4-m.x1)/(m.y4-m.y1)*(e-m.y1),m=m.x2+(m.x3-m.x2)/(m.y3-m.y2)*(e-m.y2)),t>n&&t<m&&(a.push({dataPoint:x,dataPointIndex:u.dataPointIndex,dataSeries:this,distance:0}),r=!0));break;case"boxAndWhisker":(t>=u.x1-u.borderThickness/2&&t<=u.x2+u.borderThickness/2&&e>=u.y4-u.borderThickness/2&&e<=u.y1+u.borderThickness/2||Math.abs(u.x2-t+u.x1-t)<u.borderThickness&&e>=u.y1&&e<=u.y4)&&(a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:Math.min(Math.abs(u.x1-t),Math.abs(u.x2-t),Math.abs(u.y2-e),Math.abs(u.y3-e))}),r=!0);break;case"candlestick":(t>=u.x1-u.borderThickness/2&&t<=u.x2+u.borderThickness/2&&e>=u.y2-u.borderThickness/2&&e<=u.y3+u.borderThickness/2||Math.abs(u.x2-t+u.x1-t)<u.borderThickness&&e>=u.y1&&e<=u.y4)&&(a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:Math.min(Math.abs(u.x1-t),Math.abs(u.x2-t),Math.abs(u.y2-e),Math.abs(u.y3-e))}),r=!0);break;case"ohlc":(Math.abs(u.x2-t+u.x1-t)<u.borderThickness&&e>=u.y2&&e<=u.y3||t>=u.x1&&t<=(u.x2+u.x1)/2&&e>=u.y1-u.borderThickness/2&&e<=u.y1+u.borderThickness/2||t>=(u.x1+u.x2)/2&&t<=u.x2&&e>=u.y4-u.borderThickness/2&&e<=u.y4+u.borderThickness/2)&&(a.push({dataPoint:x,dataPointIndex:n,dataSeries:this,distance:Math.min(Math.abs(u.x1-t),Math.abs(u.x2-t),Math.abs(u.y2-e),Math.abs(u.y3-e))}),r=!0)}if(r||1e3<l&&1e3<d)break}}else if(0>p-s&&p+s>=this.dataPoints.length)break;-1===o?(s++,o=1):o=-1}for(t=null,e=0;e<a.length;e++)t?a[e].distance<=t.distance&&(t=a[e]):t=a[e];return t},V.prototype.getMarkerProperties=function(t,e,i,a){var s=this.dataPoints,n=s[t].markerColor?s[t].markerColor:this.markerColor?this.markerColor:s[t].color?s[t].color:this.color?this.color:this._colorSet[t%this._colorSet.length],o=s[t].markerBorderColor?s[t].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,r=c(s[t].markerBorderThickness)?this.markerBorderThickness?this.markerBorderThickness:null:s[t].markerBorderThickness;return{x:e,y:i,ctx:a,type:s[t].markerType?s[t].markerType:this.markerType,size:t=c(s[t].markerSize)?this.markerSize:s[t].markerSize,color:n,borderColor:o,borderThickness:r}},a(D,C),D.prototype.createExtraLabelsForLog=function(t){if(!(5<(t=(t||0)+1))){var e=this.logLabelValues[0]||this.intervalStartPosition;if(Math.log(this.range)/Math.log(e/this.viewportMinimum)<this.noTicks-1){for(var i=D.getNiceNumber((e-this.viewportMinimum)/Math.min(Math.max(2,this.noTicks-this.logLabelValues.length),3),!0),a=Math.ceil(this.viewportMinimum/i)*i;a<e;a+=i)a<this.viewportMinimum||this.logLabelValues.push(a);this.logLabelValues.sort(h),this.createExtraLabelsForLog(t)}}},D.prototype.createLabels=function(){var t,e,i,a,n,o=0,r=0,h=0,l=0,d=(r=0,r=this.interval,0),p=.6*this.chart.height;t=!1;var u=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],x=u.length?c(this.scaleBreaks.firstBreakIndex)?0:this.scaleBreaks.firstBreakIndex:0;if("axisX"!==this.type||"dateTime"!==this.valueType||this.logarithmic){if(i=this.viewportMaximum,this.labels){t=Math.ceil(r);var m=!1;for(o=r=Math.ceil(this.intervalStartPosition);o<this.viewportMaximum;o+=t){if(!this.labels[o]){m=!1;break}m=!0}m&&(this.interval=t,this.intervalStartPosition=r)}if(this.logarithmic&&!this.equidistantInterval)for(this.logLabelValues||(this.logLabelValues=[],this.createExtraLabelsForLog()),r=0,m=x;r<this.logLabelValues.length;r++)if((o=this.logLabelValues[r])<this.viewportMinimum)r++;else{for(;m<u.length&&o>u[m].endValue;m++);n=o,(t=m<u.length&&o>=u[m].startValue&&o<=u[m].endValue)||(t=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:n,label:this.labels[n]?this.labels[n]:null}):"axisX"===this.type&&this.labels[n]?this.labels[n]:rt(n,this.valueFormatString,this.chart._cultureInfo),t=new A(this.ctx,{x:0,y:0,maxWidth:h,maxHeight:l,angle:this.labelAngle,text:this.prefix+t+this.suffix,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,cornerRadius:this.labelCornerRadius,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:n,textBlock:t,effectiveHeight:null}))}for(m=x,o=this.intervalStartPosition;o<=i;o=parseFloat(1e-12>this.interval?this.logarithmic&&this.equidistantInterval?o*Math.pow(this.logarithmBase,this.interval):o+this.interval:(this.logarithmic&&this.equidistantInterval?o*Math.pow(this.logarithmBase,this.interval):o+this.interval).toFixed(12))){for(;m<u.length&&o>u[m].endValue;m++);n=o,(t=m<u.length&&o>=u[m].startValue&&o<=u[m].endValue)||(t=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:n,label:this.labels[n]?this.labels[n]:null}):"axisX"===this.type&&this.labels[n]?this.labels[n]:rt(n,this.valueFormatString,this.chart._cultureInfo),t=new A(this.ctx,{x:0,y:0,maxWidth:h,maxHeight:l,angle:this.labelAngle,text:this.prefix+t+this.suffix,textAlign:this.labelTextAlign,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:n,textBlock:t,effectiveHeight:null}))}}else for(this.intervalStartPosition=this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval),i=s(new Date(this.viewportMaximum),this.interval,this.intervalType),m=x,o=this.intervalStartPosition;o<i;s(o,r,this.intervalType)){for(t=o.getTime();m<u.length&&t>u[m].endValue;m++);n=t,(t=m<u.length&&t>=u[m].startValue&&t<=u[m].endValue)||(t=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.options,value:new Date(n),label:this.labels[n]?this.labels[n]:null}):"axisX"===this.type&&this.labels[n]?this.labels[n]:ot(n,this.valueFormatString,this.chart._cultureInfo),t=new A(this.ctx,{x:0,y:0,maxWidth:h,backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxHeight:l,angle:this.labelAngle,text:this.prefix+t+this.suffix,textAlign:this.labelTextAlign,fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:n,textBlock:t,effectiveHeight:null,breaksLabelType:void 0}))}for("bottom"===this._position||"top"===this._position?(d=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.width*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.width/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*$[this.intervalType+"Duration"]*this.interval,h="undefined"===typeof this.options.labelMaxWidth?.5*this.chart.width>>0:this.options.labelMaxWidth,this.chart.panEnabled||(l="undefined"===typeof this.options.labelWrap||this.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize)):"left"!==this._position&&"right"!==this._position||(d=this.logarithmic&&!this.equidistantInterval&&2<=this._labels.length?this.lineCoordinates.height*Math.log(Math.min(this._labels[this._labels.length-1].position/this._labels[this._labels.length-2].position,this._labels[1].position/this._labels[0].position))/Math.log(this.range):this.lineCoordinates.height/(this.logarithmic&&this.equidistantInterval?Math.log(this.range)/Math.log(this.logarithmBase):Math.abs(this.range))*$[this.intervalType+"Duration"]*this.interval,this.chart.panEnabled||(h="undefined"===typeof this.options.labelMaxWidth?.3*this.chart.width>>0:this.options.labelMaxWidth),l="undefined"===typeof this.options.labelWrap||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize),r=0;r<this._labels.length;r++){(t=this._labels[r].textBlock).maxWidth=h,t.maxHeight=l;var g=t.measureText();a=g.height}if(i=[],x=u=0,this.labelAutoFit||this.options.labelAutoFit)if(c(this.labelAngle)||(this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>this.labelAngle?this.labelAngle-=180:270<=this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360)),"bottom"===this._position||"top"===this._position)if(h=.9*d>>0,x=0,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,o=0;o<this._labels.length;o++)if(!this._labels[o].breaksLabelType){var f;for(m=(t=this._labels[o].textBlock).text.split(" "),r=0;r<m.length;r++)n=m[r],this.ctx.font=t.fontStyle+" "+t.fontWeight+" "+t.fontSize+"px "+t.fontFamily,(n=this.ctx.measureText(n)).width>x&&(f=o,x=n.width)}for(o=0,o=this.intervalStartPosition<this.viewportMinimum?1:0;o<this._labels.length;o++)if(!this._labels[o].breaksLabelType){for(g=(t=this._labels[o].textBlock).measureText(),m=o+1;m<this._labels.length;m++)if(!this._labels[m].breaksLabelType){e=(e=this._labels[m].textBlock).measureText();break}if(i.push(t.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,i),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),r=h*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(l-t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),c(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle)if(this.sessionVariables.labelMaxHeight=0===this.labelAngle?l:Math.min((r-h*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),r),n=(p-(a+t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(-25)))/Math.sin(Math.PI/180*Math.abs(-25)),c(this.options.labelWrap)){if(c(this.options.labelWrap))if(c(this.options.labelMaxWidth)){if(!c(e))if(r=g.width+e.width>>0,m=this.labelFontSize,x<h)r-2*h>u&&(u=r-2*h,r>=2*h&&r<2.2*h?(this.sessionVariables.labelMaxWidth=h,c(this.options.labelFontSize)&&12<m&&(m=Math.floor(12/13*m),t.measureText()),this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?m:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):r>=2.2*h&&r<2.8*h?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=n,this.sessionVariables.labelFontSize=m):r>=2.8*h&&r<3.2*h?(this.sessionVariables.labelMaxWidth=Math.max(h,x),this.sessionVariables.labelWrap=!0,c(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?m:this.options.labelFontSize,this.sessionVariables.labelAngle=this.labelAngle):r>=3.2*h&&r<3.6*h?(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=n,this.sessionVariables.labelFontSize=this.labelFontSize):r>3.6*h&&r<5*h?(c(this.options.labelFontSize)&&12<m&&(m=Math.floor(12/13*m),t.measureText()),this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?m:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=n):r>5*h&&(this.sessionVariables.labelWrap=!0,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelFontSize=m,this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelAngle=this.labelAngle));else if(f===o&&(0===f&&x+this._labels[f+1].textBlock.measureText().width-2*h>u||f===this._labels.length-1&&x+this._labels[f-1].textBlock.measureText().width-2*h>u||0<f&&f<this._labels.length-1&&x+this._labels[f+1].textBlock.measureText().width-2*h>u&&x+this._labels[f-1].textBlock.measureText().width-2*h>u))u=0===f?x+this._labels[f+1].textBlock.measureText().width-2*h:x+this._labels[f-1].textBlock.measureText().width-2*h,this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?m:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=n;else if(0===u)for(this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?m:this.options.labelFontSize,this.sessionVariables.labelWrap=!0,r=0;r<this._labels.length;r++)(t=this._labels[r].textBlock).maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(h,x),n),g=t.measureText(),r<this._labels.length-1&&(m=r+1,(e=this._labels[m].textBlock).maxWidth=this.sessionVariables.labelMaxWidth=Math.min(Math.max(h,x),n),e=e.measureText(),g.width+e.width>>0>2*h&&(this.sessionVariables.labelAngle=-25))}else this.options.labelMaxWidth<h?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=r):(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=l)}else this.labelWrap?c(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=Math.min(Math.max(h,x),n),this.sessionVariables.labelWrap=this.labelWrap,e&&g.width+e.width>>0>2*h&&(this.sessionVariables.labelAngle=-25)):(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>h?-25:this.sessionVariables.labelAngle):c(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelMaxWidth=h,e&&g.width+e.width>>0>2*h&&(this.sessionVariables.labelAngle=-25,this.sessionVariables.labelMaxWidth=n)):(this.sessionVariables.labelAngle=this.sessionVariables.labelMaxWidth>h?-25:this.sessionVariables.labelAngle,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth,this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelWrap=this.labelWrap);else this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxHeight=0===this.labelAngle?l:Math.min((r-h*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)),r),n=0!=this.labelAngle?(p-(a+t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))/Math.sin(Math.PI/180*Math.abs(this.labelAngle)):h,this.sessionVariables.labelMaxHeight=this.labelWrap?(p-n*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)):1.5*this.labelFontSize,c(this.options.labelWrap)?c(this.options.labelWrap)&&(this.labelWrap&&!c(this.options.labelMaxWidth)?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:n,this.sessionVariables.labelMaxHeight=l):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=n,this.sessionVariables.labelMaxHeight=r<.9*d?.9*d:r,this.sessionVariables.labelWrap=this.labelWrap)):(this.options.labelWrap?(this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:n):(c(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:n,this.sessionVariables.labelWrap=this.labelWrap),this.sessionVariables.labelMaxHeight=l)}for(r=0;r<this._labels.length;r++)(t=this._labels[r].textBlock).maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,t.fontSize=this.sessionVariables.labelFontSize,t.angle=this.labelAngle=this.sessionVariables.labelAngle,t.wrap=this.labelWrap=this.sessionVariables.labelWrap,t.maxHeight=this.sessionVariables.labelMaxHeight,t.measureText()}else for(o=0;o<this._labels.length;o++)(t=this._labels[o].textBlock).maxWidth=this.labelMaxWidth=c(this.options.labelMaxWidth)?c(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=h:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,t.fontSize=this.labelFontSize=c(this.options.labelFontSize)?c(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,t.angle=this.labelAngle=c(this.options.labelAngle)?c(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,t.wrap=this.labelWrap=c(this.options.labelWrap)?c(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,t.maxHeight=c(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=l:this.sessionVariables.labelMaxHeight,t.measureText();else if("left"===this._position||"right"===this._position)if(h=c(this.options.labelMaxWidth)?.3*this.chart.width>>0:this.options.labelMaxWidth,l="undefined"===typeof this.options.labelWrap||this.labelWrap?.3*this.chart.height>>0:1.5*this.labelFontSize,!this.chart.panEnabled&&1<=this._labels.length){for(this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelAngle=c(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle,this.sessionVariables.labelWrap=this.labelWrap,o=0;o<this._labels.length;o++)if(!this._labels[o].breaksLabelType){for(g=(t=this._labels[o].textBlock).measureText(),m=o+1;m<this._labels.length;m++)if(!this._labels[m].breaksLabelType){e=(e=this._labels[m].textBlock).measureText();break}i.push(t.height),this.sessionVariables.labelMaxHeight=Math.max.apply(Math,i),r=h*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(l-t.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.cos(Math.PI/180*Math.abs(this.labelAngle)),Math.sin(Math.PI/180*Math.abs(this.labelAngle)),c(this.options.labelAngle)&&isNaN(this.options.labelAngle)&&0!==this.options.labelAngle?c(this.options.labelWrap)?c(this.options.labelWrap)&&(c(this.options.labelMaxWidth)?c(e)||(d=g.height+e.height>>0)-2*l>x&&(x=d-2*l,d>=2*l&&d<2.4*l?(c(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize):d>=2.4*l&&d<2.8*l?(this.sessionVariables.labelMaxHeight=r,this.sessionVariables.labelFontSize=this.labelFontSize,this.sessionVariables.labelWrap=!0):d>=2.8*l&&d<3.2*l?(this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelWrap=!0,c(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelAngle=c(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):d>=3.2*l&&d<3.6*l?(this.sessionVariables.labelMaxHeight=r,this.sessionVariables.labelWrap=!0,this.sessionVariables.labelFontSize=this.labelFontSize):d>3.6*l&&d<10*l?(c(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelAngle=c(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle):d>10*l&&d<50*l&&(c(this.options.labelFontSize)&&12<this.labelFontSize&&(this.labelFontSize=Math.floor(12/13*this.labelFontSize),t.measureText()),this.sessionVariables.labelFontSize=c(this.options.labelFontSize)?this.labelFontSize:this.options.labelFontSize,this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelMaxWidth=h,this.sessionVariables.labelAngle=c(this.sessionVariables.labelAngle)?0:this.sessionVariables.labelAngle)):(this.sessionVariables.labelMaxHeight=l,this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth)):(this.sessionVariables.labelMaxWidth=this.labelWrap||this.labelMaxWidth?this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth:h,this.sessionVariables.labelMaxHeight=l):(this.sessionVariables.labelAngle=this.labelAngle,this.sessionVariables.labelMaxWidth=0===this.labelAngle?h:Math.min((r-l*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))/Math.cos(Math.PI/180*Math.abs(this.labelAngle)),l),c(this.options.labelWrap)?c(this.options.labelWrap)&&(this.labelWrap&&!c(this.options.labelMaxWidth)?(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxHeight=r):(this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:h,this.sessionVariables.labelMaxHeight=0===this.labelAngle?l:r,c(this.options.labelMaxWidth)&&(this.sessionVariables.labelAngle=this.labelAngle))):this.options.labelWrap?(this.sessionVariables.labelMaxHeight=0===this.labelAngle?l:r,this.sessionVariables.labelWrap=this.labelWrap,this.sessionVariables.labelMaxWidth=h):(this.sessionVariables.labelMaxHeight=l,c(this.options.labelMaxWidth),this.sessionVariables.labelMaxWidth=this.options.labelMaxWidth?this.options.labelMaxWidth:this.sessionVariables.labelMaxWidth,this.sessionVariables.labelWrap=this.labelWrap))}for(r=0;r<this._labels.length;r++)(t=this._labels[r].textBlock).maxWidth=this.labelMaxWidth=this.sessionVariables.labelMaxWidth,t.fontSize=this.labelFontSize=this.sessionVariables.labelFontSize,t.angle=this.labelAngle=this.sessionVariables.labelAngle,t.wrap=this.labelWrap=this.sessionVariables.labelWrap,t.maxHeight=this.sessionVariables.labelMaxHeight,t.measureText()}else for(o=0;o<this._labels.length;o++)(t=this._labels[o].textBlock).maxWidth=this.labelMaxWidth=c(this.options.labelMaxWidth)?c(this.sessionVariables.labelMaxWidth)?this.sessionVariables.labelMaxWidth=h:this.sessionVariables.labelMaxWidth:this.options.labelMaxWidth,t.fontSize=this.labelFontSize=c(this.options.labelFontSize)?c(this.sessionVariables.labelFontSize)?this.sessionVariables.labelFontSize=this.labelFontSize:this.sessionVariables.labelFontSize:this.options.labelFontSize,t.angle=this.labelAngle=c(this.options.labelAngle)?c(this.sessionVariables.labelAngle)?this.sessionVariables.labelAngle=this.labelAngle:this.sessionVariables.labelAngle:this.labelAngle,t.wrap=this.labelWrap=c(this.options.labelWrap)?c(this.sessionVariables.labelWrap)?this.sessionVariables.labelWrap=this.labelWrap:this.sessionVariables.labelWrap:this.options.labelWrap,t.maxHeight=c(this.sessionVariables.labelMaxHeight)?this.sessionVariables.labelMaxHeight=l:this.sessionVariables.labelMaxHeight,t.measureText();for(o=0;o<this.stripLines.length;o++){var y;"outside"===(h=this.stripLines[o]).labelPlacement?(l=this.sessionVariables.labelMaxWidth,"bottom"!==this._position&&"top"!==this._position||(c(h.options.labelWrap)&&!c(this.sessionVariables.stripLineLabelMaxHeight)?y=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=y=h.labelWrap?.8*this.chart.height>>0:1.5*this.labelFontSize),"left"!==this._position&&"right"!==this._position||(c(h.options.labelWrap)&&!c(this.sessionVariables.stripLineLabelMaxHeight)?y=this.sessionVariables.stripLineLabelMaxHeight:this.sessionVariables.stripLineLabelMaxHeight=y=h.labelWrap?.8*this.chart.width>>0:1.5*this.labelFontSize),c(h.labelBackgroundColor)&&(h.labelBackgroundColor="#EEEEEE")):(l="bottom"===this._position||"top"===this._position?.9*this.chart.width>>0:.9*this.chart.height>>0,y=c(h.options.labelWrap)||h.labelWrap?"bottom"===this._position||"top"===this._position?.8*this.chart.width>>0:.8*this.chart.height>>0:1.5*this.labelFontSize,c(h.labelBackgroundColor)&&(c(h.startValue)&&0!==h.startValue?h.labelBackgroundColor=R?"transparent":null:h.labelBackgroundColor="#EEEEEE")),t=new A(this.ctx,{x:0,y:0,backgroundColor:h.labelBackgroundColor,borderColor:h.labelBorderColor,borderThickness:h.labelBorderThickness,cornerRadius:h.labelCornerRadius,maxWidth:h.options.labelMaxWidth?h.options.labelMaxWidth:l,maxHeight:y,angle:this.labelAngle,text:h.labelFormatter?h.labelFormatter({chart:this.chart,axis:this,stripLine:h}):h.label,textAlign:this.labelTextAlign,fontSize:"outside"===h.labelPlacement?h.options.labelFontSize?h.labelFontSize:this.labelFontSize:h.labelFontSize,fontFamily:"outside"===h.labelPlacement?h.options.labelFontFamily?h.labelFontFamily:this.labelFontFamily:h.labelFontFamily,fontWeight:"outside"===h.labelPlacement?h.options.labelFontWeight?h.labelFontWeight:this.labelFontWeight:h.labelFontWeight,fontColor:h.labelFontColor||h.color,fontStyle:"outside"===h.labelPlacement?h.options.labelFontStyle?h.labelFontStyle:this.fontWeight:h.labelFontStyle,textBaseline:"middle"}),this._stripLineLabels.push({position:h.value,textBlock:t,effectiveHeight:null,stripLine:h})}},D.prototype.createLabelsAndCalculateWidth=function(){var t=0,e=0;this._labels=[],this._stripLineLabels=[];var i=this.chart.isNavigator?0:5;if("left"===this._position||"right"===this._position){if(this.createLabels(),"inside"!=this.labelPlacement||"inside"===this.labelPlacement&&0<this._index)for(e=0;e<this._labels.length;e++){var a=this._labels[e].textBlock,s=a.measureText(),n=0;t<(n=0===this.labelAngle?s.width:s.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(s.height-a.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)))&&(this.labelEffectiveWidth=t=n),this._labels[e].effectiveWidth=n}for(e=0;e<this._stripLineLabels.length;e++)"outside"===this._stripLineLabels[e].stripLine.labelPlacement&&this._stripLineLabels[e].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[e].stripLine.value<=this.viewportMaximum&&(s=(a=this._stripLineLabels[e].textBlock).measureText(),n=0===this.labelAngle?s.width:s.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+(s.height-a.fontSize/2)*Math.sin(Math.PI/180*Math.abs(this.labelAngle)),"inside"===this.tickPlacement&&(n+=this.tickLength),"inside"===this.labelPlacement&&(t+=0<this._index?n:0),t<n&&(t=n),this.stripLineLabelEffectiveWidth=this._stripLineLabels[e].effectiveWidth=n)}return(this.title?this._titleTextBlock.measureText().height+2:0)+t+("inside"===this.tickPlacement?0<this._index?this.tickLength:0:this.tickLength)+i},D.prototype.createLabelsAndCalculateHeight=function(){var t=0;this._labels=[],this._stripLineLabels=[];var e,i=0,a=this.chart.isNavigator?0:5;if("bottom"===this._position||"top"===this._position){if(this.createLabels(),"inside"!=this.labelPlacement||"inside"===this.labelPlacement&&0<this._index)for(i=0;i<this._labels.length;i++){var s=(e=this._labels[i].textBlock).measureText(),n=0;t<(n=0===this.labelAngle?s.height:s.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(s.height-e.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)))&&(this.labelEffectiveHeight=t=n),this._labels[i].effectiveHeight=n}for(i=0;i<this._stripLineLabels.length;i++)"outside"===this._stripLineLabels[i].stripLine.labelPlacement&&this._stripLineLabels[i].stripLine.value>=this.viewportMinimum&&this._stripLineLabels[i].stripLine.value<=this.viewportMaximum&&(s=(e=this._stripLineLabels[i].textBlock).measureText(),n=0===this.labelAngle?s.height:s.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+(s.height-e.fontSize/2)*Math.cos(Math.PI/180*Math.abs(this.labelAngle)),"inside"===this.tickPlacement&&(n+=this.tickLength),"inside"===this.labelPlacement&&(t+=0<this._index?n:0),t<n&&(t=n),this.stripLineLabelEffectiveHeight=this._stripLineLabels[i].effectiveHeight=n)}return(this.title?this._titleTextBlock.measureText().height+2:0)+t+("inside"===this.tickPlacement?0<this._index?this.tickLength:0:this.tickLength)+a},D.setLayout=function(t,e,i,a,s,n){var o,r,h,l,d=t[0]?t[0].chart:e[0].chart,p=d.isNavigator?0:10,u=d._axes;if(t&&0<t.length)for(var x=0;x<t.length;x++)t[x]&&t[x].calculateAxisParameters();if(e&&0<e.length)for(x=0;x<e.length;x++)e[x].calculateAxisParameters();if(i&&0<i.length)for(x=0;x<i.length;x++)i[x].calculateAxisParameters();if(a&&0<a.length)for(x=0;x<a.length;x++)a[x].calculateAxisParameters();for(x=0;x<u.length;x++)if(u[x]&&u[x].scaleBreaks&&u[x].scaleBreaks._appliedBreaks.length)for(var m=u[x].scaleBreaks._appliedBreaks,g=0;g<m.length&&!(m[g].startValue>u[x].viewportMaximum);g++)m[g].endValue<u[x].viewportMinimum||(c(u[x].scaleBreaks.firstBreakIndex)&&(u[x].scaleBreaks.firstBreakIndex=g),m[g].startValue>=u[x].viewPortMinimum&&(u[x].scaleBreaks.lastBreakIndex=g));var f,y,b,v,_,k=g=0,M=0,w=0,T=0,P=0,C=0,S=r=0;for(m=b=v=_=!1,x=0;x<u.length;x++)u[x]&&u[x].title&&(u[x]._titleTextBlock=new A(u[x].ctx,{text:u[x].title,horizontalAlign:"center",fontSize:u[x].titleFontSize,fontFamily:u[x].titleFontFamily,fontWeight:u[x].titleFontWeight,fontColor:u[x].titleFontColor,fontStyle:u[x].titleFontStyle,borderColor:u[x].titleBorderColor,borderThickness:u[x].titleBorderThickness,backgroundColor:u[x].titleBackgroundColor,cornerRadius:u[x].titleCornerRadius,textBaseline:"top"}));for(x=0;x<u.length;x++)if(u[x].title)switch(u[x]._position){case"left":u[x]._titleTextBlock.maxWidth=u[x].titleMaxWidth||n.height,u[x]._titleTextBlock.maxHeight=u[x].titleWrap?.8*n.width:1.5*u[x].titleFontSize,u[x]._titleTextBlock.angle=-90;break;case"right":u[x]._titleTextBlock.maxWidth=u[x].titleMaxWidth||n.height,u[x]._titleTextBlock.maxHeight=u[x].titleWrap?.8*n.width:1.5*u[x].titleFontSize,u[x]._titleTextBlock.angle=90;break;default:u[x]._titleTextBlock.maxWidth=u[x].titleMaxWidth||n.width,u[x]._titleTextBlock.maxHeight=u[x].titleWrap?.8*n.height:1.5*u[x].titleFontSize,u[x]._titleTextBlock.angle=0}if("normal"===s){w=[],T=[],P=[],C=[];for(var L=[],B=[],F=[],I=[];4>g;){var z=0,V=0,D=0,W=0,E=s=0,X=0,O=0,Y=0,R=0,N=0,H=0;if(i&&0<i.length)for(P=[],x=N=0;x<i.length;x++)P.push(Math.ceil(i[x]?i[x].createLabelsAndCalculateWidth():0)),N+=P[x],X+=i[x]&&!d.isNavigator?i[x].margin:0;else P.push(Math.ceil(i[0]?i[0].createLabelsAndCalculateWidth():0));if(F.push(P),a&&0<a.length)for(C=[],x=H=0;x<a.length;x++)C.push(Math.ceil(a[x]?a[x].createLabelsAndCalculateWidth():0)),H+=C[x],O+=a[x]?a[x].margin:0;else C.push(Math.ceil(a[0]?a[0].createLabelsAndCalculateWidth():0));if(I.push(C),o=Math.round(n.x1+N+X),h=Math.round(n.x2-H-O>d.width-p?d.width-p:n.x2-H-O),t&&0<t.length)for(w=[],x=Y=0;x<t.length;x++)t[x]&&(t[x].lineCoordinates={}),t[x].lineCoordinates.width=Math.abs(h-o),t[x].title&&(t[x]._titleTextBlock.maxWidth=0<t[x].titleMaxWidth&&t[x].titleMaxWidth<t[x].lineCoordinates.width?t[x].titleMaxWidth:t[x].lineCoordinates.width),w.push(Math.ceil(t[x]?t[x].createLabelsAndCalculateHeight():0)),Y+=w[x],s+=t[x]&&!d.isNavigator?t[x].margin:0;else w.push(Math.ceil(t[0]?t[0].createLabelsAndCalculateHeight():0));if(L.push(w),e&&0<e.length)for(T=[],x=R=0;x<e.length;x++)e[x]&&(e[x].lineCoordinates={}),e[x].lineCoordinates.width=Math.abs(h-o),e[x].title&&(e[x]._titleTextBlock.maxWidth=0<e[x].titleMaxWidth&&e[x].titleMaxWidth<e[x].lineCoordinates.width?e[x].titleMaxWidth:e[x].lineCoordinates.width),T.push(Math.ceil(e[x]?e[x].createLabelsAndCalculateHeight():0)),R+=T[x],E+=e[x]&&!d.isNavigator?e[x].margin:0;else T.push(Math.ceil(e[0]?e[0].createLabelsAndCalculateHeight():0));if(B.push(T),t&&0<t.length)for(x=0;x<t.length;x++)t[x]&&(t[x].lineCoordinates.x1=o,h=Math.round(n.x2-H-O>d.width-p?d.width-p:n.x2-H-O),t[x]._labels&&1<t[x]._labels.length&&(r=l=0,l=t[x]._labels[1],r="dateTime"===t[x].valueType?t[x]._labels[t[x]._labels.length-2]:t[x]._labels[t[x]._labels.length-1],k=l.textBlock.width*Math.cos(Math.PI/180*Math.abs(l.textBlock.angle))+(l.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(l.textBlock.angle)),M=r.textBlock.width*Math.cos(Math.PI/180*Math.abs(r.textBlock.angle))+(r.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(r.textBlock.angle))),!t[x]||!t[x].labelAutoFit||c(f)||c(y)||d.isNavigator||d.stockChart||(r=0,0<t[x].labelAngle?y+M>h&&(r+=0<t[x].labelAngle?y+M-h-H:0):0>t[x].labelAngle?f-k<o&&f-k<t[x].viewportMinimum&&(S=o-(X+t[x].tickLength+P+f-k+t[x].labelFontSize/2)):0===t[x].labelAngle&&(y+M>h&&(r=y+M/2-h-H),f-k<o&&f-k<t[x].viewportMinimum&&(S=o-X-t[x].tickLength-P-f+k/2)),t[x].viewportMaximum===t[x].maximum&&t[x].viewportMinimum===t[x].minimum&&0<t[x].labelAngle&&0<r?h-=r:t[x].viewportMaximum===t[x].maximum&&t[x].viewportMinimum===t[x].minimum&&0>t[x].labelAngle&&0<S?o+=S:t[x].viewportMaximum===t[x].maximum&&t[x].viewportMinimum===t[x].minimum&&0===t[x].labelAngle&&(0<S&&(o+=S),0<r&&(h-=r))),d.panEnabled?Y=c(d.sessionVariables.axisX.height)?d.sessionVariables.axisX.height=Y:d.sessionVariables.axisX.height:d.sessionVariables.axisX.height=Y,r=Math.round(n.y2-Y-s+z),l=Math.round(n.y2),t[x].lineCoordinates.x2=h,t[x].lineCoordinates.width=h-o,t[x].lineCoordinates.y1=r,t[x].lineCoordinates.y2=r+t[x].lineThickness/2,"inside"===t[x].labelPlacement&&0<x&&(t[x].lineCoordinates.y1=t[x-1].lineCoordinates.y2+z+(t[x].labelEffectiveHeight||0),t[x].lineCoordinates.y2=t[x].lineCoordinates.y1+t[x].lineThickness/2),"inside"===t[x].tickPlacement&&0<x&&(t[x].lineCoordinates.y1+=t[x].tickLength,t[x].lineCoordinates.y2=t[x].lineCoordinates.y1+t[x].lineThickness/2),t[x].bounds={x1:o,y1:r,x2:h,y2:l-(Y+s-w[x]-z),width:h-o},t[x].bounds.height=t[x].bounds.y2-t[x].bounds.y1),z+=w[x]+t[x].margin;if(e&&0<e.length)for(x=0;x<e.length;x++)e[x].lineCoordinates.x1=Math.round(n.x1+N+X),e[x].lineCoordinates.x2=Math.round(n.x2-H-O>d.width-p?d.width-p:n.x2-H-O),e[x].lineCoordinates.width=Math.abs(h-o),e[x]._labels&&1<e[x]._labels.length&&(l=e[x]._labels[1],r="dateTime"===e[x].valueType?e[x]._labels[e[x]._labels.length-2]:e[x]._labels[e[x]._labels.length-1],k=l.textBlock.width*Math.cos(Math.PI/180*Math.abs(l.textBlock.angle))+(l.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(l.textBlock.angle)),M=r.textBlock.width*Math.cos(Math.PI/180*Math.abs(r.textBlock.angle))+(r.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(r.textBlock.angle))),d.panEnabled?R=c(d.sessionVariables.axisX2.height)?d.sessionVariables.axisX2.height=R:d.sessionVariables.axisX2.height:d.sessionVariables.axisX2.height=R,r=Math.round(n.y1),l=e[x].lineCoordinates.y1=r+R+E-V,e[x].lineCoordinates.y2=r,"inside"===e[x].labelPlacement&&0<x&&(e[x].lineCoordinates.y1=e[x-1].lineCoordinates.y1-V-(e[x].labelEffectiveHeight||0)),"inside"===e[x].tickPlacement&&0<x&&(e[x].lineCoordinates.y1-=e[x].tickLength),e[x].bounds={x1:o,y1:r+(R+E-T[x]-V),x2:h,y2:l,width:h-o},e[x].bounds.height=e[x].bounds.y2-e[x].bounds.y1,V+=T[x]+e[x].margin;if(i&&0<i.length)for(x=0;x<i.length;x++)X=d.isNavigator?0:10,i[x]&&(o=Math.round(t[0]?t[0].lineCoordinates.x1:e[0].lineCoordinates.x1),X=i[x]._labels&&0<i[x]._labels.length?i[x]._labels[i[x]._labels.length-1].textBlock.height/2:p,r=Math.round(n.y1+R+E<Math.max(X,p)?Math.max(X,p):n.y1+R+E),h=Math.round(t[0]?t[0].lineCoordinates.x1:e[0].lineCoordinates.x1),X=0<t.length?0:i[x]._labels&&0<i[x]._labels.length?i[x]._labels[0].textBlock.height/2:p,l=Math.round(n.y2-Y-s-X),i[x].lineCoordinates={x1:o-D,y1:r,x2:h-D,y2:l,height:Math.abs(l-r)},"inside"===i[x].labelPlacement&&0<x&&(i[x].lineCoordinates.x1=i[x-1].lineCoordinates.x1-D-(i[x].labelEffectiveWidth||0),i[x].lineCoordinates.x2=i[x].lineCoordinates.x1+i[x].lineThickness/2),"inside"===i[x].tickPlacement&&0<x&&(i[x].lineCoordinates.x1-=i[x].tickLength,i[x].lineCoordinates.x2=i[x].lineCoordinates.x1+i[x].lineThickness/2),i[x].bounds={x1:o-(P[x]+D),y1:r,x2:h-D,y2:l,height:l-r},i[x].bounds.width=i[x].bounds.x2-i[x].bounds.x1,i[x].title&&(i[x]._titleTextBlock.maxWidth=0<i[x].titleMaxWidth&&i[x].titleMaxWidth<i[x].lineCoordinates.height?i[x].titleMaxWidth:i[x].lineCoordinates.height),D+=P[x]+i[x].margin);if(a&&0<a.length)for(x=0;x<a.length;x++)a[x]&&(o=Math.round(t[0]?t[0].lineCoordinates.x2:e[0].lineCoordinates.x2),h=Math.round(o),X=a[x]._labels&&0<a[x]._labels.length?a[x]._labels[a[x]._labels.length-1].textBlock.height/2:0,r=Math.round(n.y1+R+E<Math.max(X,p)?Math.max(X,p):n.y1+R+E),X=0<t.length?0:a[x]._labels&&0<a[x]._labels.length?a[x]._labels[0].textBlock.height/2:0,l=Math.round(n.y2-(Y+s+X)),a[x].lineCoordinates={x1:o+W,y1:r,x2:o+W,y2:l,height:Math.abs(l-r)},"inside"===a[x].labelPlacement&&0<x&&(a[x].lineCoordinates.x1=a[x-1].lineCoordinates.x2+W+(a[x].labelEffectiveWidth||0),a[x].lineCoordinates.x2=a[x].lineCoordinates.x1+a[x].lineThickness/2),"inside"===a[x].tickPlacement&&0<x&&(a[x].lineCoordinates.x1+=a[x].tickLength,a[x].lineCoordinates.x2=a[x].lineCoordinates.x1+a[x].lineThickness/2),a[x].bounds={x1:o+W,y1:r,x2:h+(C[x]+W),y2:l,height:l-r},a[x].bounds.width=a[x].bounds.x2-a[x].bounds.x1,a[x].title&&(a[x]._titleTextBlock.maxWidth=0<a[x].titleMaxWidth&&a[x].titleMaxWidth<a[x].lineCoordinates.height?a[x].titleMaxWidth:a[x].lineCoordinates.height),W+=C[x]+a[x].margin);if(t&&0<t.length)for(x=0;x<t.length;x++)t[x]&&(t[x].calculateValueToPixelConversionParameters(),t[x].calculateBreaksSizeInValues(),t[x]._labels&&1<t[x]._labels.length&&(f=(t[x].logarithmic?Math.log(t[x]._labels[1].position/t[x].viewportMinimum)/t[x].conversionParameters.lnLogarithmBase:t[x]._labels[1].position-t[x].viewportMinimum)*Math.abs(t[x].conversionParameters.pixelPerUnit)+t[x].lineCoordinates.x1,o=t[x]._labels[t[x]._labels.length-("dateTime"===t[x].valueType?2:1)].position,o=t[x].getApparentDifference(t[x].viewportMinimum,o),y=t[x].logarithmic?(1<o?Math.log(o)/t[x].conversionParameters.lnLogarithmBase*Math.abs(t[x].conversionParameters.pixelPerUnit):0)+t[x].lineCoordinates.x1:(0<o?o*Math.abs(t[x].conversionParameters.pixelPerUnit):0)+t[x].lineCoordinates.x1));if(e&&0<e.length)for(x=0;x<e.length;x++)e[x].calculateValueToPixelConversionParameters(),e[x].calculateBreaksSizeInValues(),e[x]._labels&&1<e[x]._labels.length&&(f=(e[x].logarithmic?Math.log(e[x]._labels[1].position/e[x].viewportMinimum)/e[x].conversionParameters.lnLogarithmBase:e[x]._labels[1].position-e[x].viewportMinimum)*Math.abs(e[x].conversionParameters.pixelPerUnit)+e[x].lineCoordinates.x1,o=e[x]._labels[e[x]._labels.length-("dateTime"===e[x].valueType?2:1)].position,o=e[x].getApparentDifference(e[x].viewportMinimum,o),y=e[x].logarithmic?(1<o?Math.log(o)/e[x].conversionParameters.lnLogarithmBase*Math.abs(e[x].conversionParameters.pixelPerUnit):0)+e[x].lineCoordinates.x1:(0<o?o*Math.abs(e[x].conversionParameters.pixelPerUnit):0)+e[x].lineCoordinates.x1);for(x=0;x<u.length;x++)"axisY"===u[x].type&&(u[x].calculateValueToPixelConversionParameters(),u[x].calculateBreaksSizeInValues());if(0<g){if(t&&0<t.length)for(x=0;x<t.length;x++)m=L[g-1][x]===L[g][x];else m=!0;if(e&&0<e.length)for(x=0;x<e.length;x++)b=B[g-1][x]===B[g][x];else b=!0;if(i&&0<i.length)for(x=0;x<i.length;x++)v=F[g-1][x]===F[g][x];else v=!0;if(a&&0<a.length)for(x=0;x<a.length;x++)_=I[g-1][x]===I[g][x];else _=!0}if(m&&b&&v&&_)break;g++}if(t&&0<t.length)for(x=0;x<t.length;x++)t[x].calculateStripLinesThicknessInValues(),t[x].calculateBreaksInPixels();if(e&&0<e.length)for(x=0;x<e.length;x++)e[x].calculateStripLinesThicknessInValues(),e[x].calculateBreaksInPixels();if(i&&0<i.length)for(x=0;x<i.length;x++)i[x].calculateStripLinesThicknessInValues(),i[x].calculateBreaksInPixels();if(a&&0<a.length)for(x=0;x<a.length;x++)a[x].calculateStripLinesThicknessInValues(),a[x].calculateBreaksInPixels()}else{for(p=[],f=[],S=[],k=[],y=[],M=[],L=[],B=[];4>g;){if(Y=W=D=O=X=E=s=I=F=z=R=0,t&&0<t.length)for(S=[],x=W=0;x<t.length;x++)S.push(Math.ceil(t[x]?t[x].createLabelsAndCalculateWidth():0)),W+=S[x],s+=t[x]&&!d.isNavigator?t[x].margin:0;else S.push(Math.ceil(t[0]?t[0].createLabelsAndCalculateWidth():0));if(L.push(S),e&&0<e.length)for(k=[],x=Y=0;x<e.length;x++)k.push(Math.ceil(e[x]?e[x].createLabelsAndCalculateWidth():0)),Y+=k[x],E+=e[x]?e[x].margin:0;else k.push(Math.ceil(e[0]?e[0].createLabelsAndCalculateWidth():0));if(B.push(k),i&&0<i.length)for(x=0;x<i.length;x++)i[x].lineCoordinates={},o=Math.round(n.x1+W+s),h=Math.round(n.x2-Y-E>d.width-10?d.width-10:n.x2-Y-E),i[x].labelAutoFit&&!c(w)&&(0<!t.length&&(o=0>i[x].labelAngle?Math.max(o,w):0===i[x].labelAngle?Math.max(o,w/2):o),0<!e.length&&(h=0<i[x].labelAngle||0===i[x].labelAngle?h-T/2:h)),i[x].lineCoordinates.x1=o,i[x].lineCoordinates.x2=h,i[x].lineCoordinates.width=Math.abs(h-o),i[x].title&&(i[x]._titleTextBlock.maxWidth=0<i[x].titleMaxWidth&&i[x].titleMaxWidth<i[x].lineCoordinates.width?i[x].titleMaxWidth:i[x].lineCoordinates.width);if(a&&0<a.length)for(x=0;x<a.length;x++)a[x].lineCoordinates={},o=Math.round(n.x1+W+s),h=Math.round(n.x2-Y-E>a[x].chart.width-10?a[x].chart.width-10:n.x2-Y-E),a[x]&&a[x].labelAutoFit&&!c(P)&&(0<!t.length&&(o=0<a[x].labelAngle?Math.max(o,P):0===a[x].labelAngle?Math.max(o,P/2):o),0<!e.length&&(h-=C/2)),a[x].lineCoordinates.x1=o,a[x].lineCoordinates.x2=h,a[x].lineCoordinates.width=Math.abs(h-o),a[x].title&&(a[x]._titleTextBlock.maxWidth=0<a[x].titleMaxWidth&&a[x].titleMaxWidth<a[x].lineCoordinates.width?a[x].titleMaxWidth:a[x].lineCoordinates.width);if(i&&0<i.length)for(p=[],x=D=0;x<i.length;x++)p.push(Math.ceil(i[x]?i[x].createLabelsAndCalculateHeight():0)),D+=p[x]+i[x].margin,X+=i[x].margin;else p.push(Math.ceil(i[0]?i[0].createLabelsAndCalculateHeight():0));if(y.push(p),a&&0<a.length)for(f=[],x=0;x<a.length;x++)f.push(Math.ceil(a[x]?a[x].createLabelsAndCalculateHeight():0)),O+=a[x].margin;else f.push(Math.ceil(a[0]?a[0].createLabelsAndCalculateHeight():0));if(M.push(f),i&&0<i.length)for(x=0;x<i.length;x++)0<i[x]._labels.length&&(l=i[x]._labels[0],r=i[x]._labels[i[x]._labels.length-1],w=l.textBlock.width*Math.cos(Math.PI/180*Math.abs(l.textBlock.angle))+(l.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(l.textBlock.angle)),T=r.textBlock.width*Math.cos(Math.PI/180*Math.abs(r.textBlock.angle))+(r.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(r.textBlock.angle)));if(a&&0<a.length)for(x=0;x<a.length;x++)a[x]&&0<a[x]._labels.length&&(l=a[x]._labels[0],r=a[x]._labels[a[x]._labels.length-1],P=l.textBlock.width*Math.cos(Math.PI/180*Math.abs(l.textBlock.angle))+(l.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(l.textBlock.angle)),C=r.textBlock.width*Math.cos(Math.PI/180*Math.abs(r.textBlock.angle))+(r.textBlock.height-r.textBlock.fontSize/2)*Math.sin(Math.PI/180*Math.abs(r.textBlock.angle)));if(d.panEnabled)for(x=0;x<i.length;x++)p[x]=c(d.sessionVariables.axisY[x].height)?d.sessionVariables.axisY[x].height=p[x]:d.sessionVariables.axisY[x].height;else for(x=0;x<i.length;x++)d.sessionVariables.axisY[x].height=p[x];if(i&&0<i.length)for(x=i.length-1;0<=x;x--)r=Math.round(n.y2),l=Math.round(n.y2>i[x].chart.height?i[x].chart.height:n.y2),i[x].lineCoordinates.y1=r-(p[x]+i[x].margin+R),i[x].lineCoordinates.y2=r-(p[x]+i[x].margin+R),"inside"===i[x].labelPlacement&&0<x&&(i[x].lineCoordinates.y1=i[x].lineCoordinates.y1+p[x]-(i[x]._titleTextBlock?i[x]._titleTextBlock.height:0)-i[x].tickLength-(i[x].stripLineLabelEffectiveHeight||0)-5,i[x].lineCoordinates.y2=i[x].lineCoordinates.y1+i[x].lineThickness/2),"inside"===i[x].tickPlacement&&0<x&&(i[x].lineCoordinates.y1+=i[x].tickLength,i[x].lineCoordinates.y2=i[x].lineCoordinates.y1+i[x].lineThickness/2),i[x].bounds={x1:o,y1:r-(p[x]+R+i[x].margin),x2:h,y2:l-(R+i[x].margin),width:h-o,height:p[x]},i[x].title&&(i[x]._titleTextBlock.maxWidth=0<i[x].titleMaxWidth&&i[x].titleMaxWidth<i[x].lineCoordinates.width?i[x].titleMaxWidth:i[x].lineCoordinates.width),R+=p[x]+i[x].margin;if(a&&0<a.length)for(x=a.length-1;0<=x;x--)a[x]&&(r=Math.round(n.y1),l=Math.round(n.y1+(f[x]+a[x].margin+z)),a[x].lineCoordinates.y1=l,a[x].lineCoordinates.y2=l,"inside"===a[x].labelPlacement&&0<x&&(a[x].lineCoordinates.y1=l-f[x]+(a[x]._titleTextBlock?a[x]._titleTextBlock.height:0)+a[x].tickLength+(a[x].stripLineLabelEffectiveHeight||0),a[x].lineCoordinates.y2=a[x].lineCoordinates.y1-a[x].lineThickness/2),"inside"===a[x].tickPlacement&&0<x&&(a[x].lineCoordinates.y1-=a[x].tickLength,a[x].lineCoordinates.y2=a[x].lineCoordinates.y1-a[x].lineThickness/2),a[x].bounds={x1:o,y1:r+(a[x].margin+z),x2:h,y2:l,width:h-o},a[x].bounds.height=a[x].bounds.y2-a[x].bounds.y1,a[x].title&&(a[x]._titleTextBlock.maxWidth=0<a[x].titleMaxWidth&&a[x].titleMaxWidth<a[x].lineCoordinates.width?a[x].titleMaxWidth:a[x].lineCoordinates.width),z+=f[x]+a[x].margin);if(t&&0<t.length)for(x=0;x<t.length;x++){if(X=t[x]._labels&&0<t[x]._labels.length?t[x]._labels[0].textBlock.fontSize/2:0,o=Math.round(n.x1+s),r=a&&0<a.length?Math.round(a[0]?a[0].lineCoordinates.y2:n.y1<Math.max(X,10)?Math.max(X,10):n.y1):n.y1<Math.max(X,10)?Math.max(X,10):n.y1,h=Math.round(n.x1+W+s),l=i&&0<i.length?Math.round(i[0]?i[0].lineCoordinates.y1:n.y2-D>d.height-Math.max(X,10)?d.height-Math.max(X,10):n.y2-D):n.y2>d.height-Math.max(X,10)?d.height-Math.max(X,10):n.y2,i&&0<i.length)for(X=0;X<i.length;X++)i[X]&&i[X].labelAutoFit&&(h=i[X].lineCoordinates.x1,o=0>i[X].labelAngle||0===i[X].labelAngle?h-W:o);if(a&&0<a.length)for(X=0;X<a.length;X++)a[X]&&a[X].labelAutoFit&&(o=(h=a[X].lineCoordinates.x1)-W);t[x].lineCoordinates={x1:h-F,y1:r,x2:h-F,y2:l,height:Math.abs(l-r)},"inside"===t[x].labelPlacement&&0<x&&(t[x].lineCoordinates.x1=t[x].lineCoordinates.x1-(S[x]-(t[x]._titleTextBlock?t[x]._titleTextBlock.height:0))+t[x].tickLength+(t[x].stripLineLabelEffectiveWidth||0),t[x].lineCoordinates.x2=t[x].lineCoordinates.x1+t[x].lineThickness/2),"inside"===t[x].tickPlacement&&0<x&&(t[x].lineCoordinates.x1-=t[x].tickLength,t[x].lineCoordinates.x2=t[x].lineCoordinates.x1+t[x].lineThickness/2),t[x].bounds={x1:h-(S[x]+F),y1:r,x2:h-F,y2:l,height:l-r},t[x].bounds.width=t[x].bounds.x2-t[x].bounds.x1,t[x].title&&(t[x]._titleTextBlock.maxWidth=0<t[x].titleMaxWidth&&t[x].titleMaxWidth<t[x].lineCoordinates.height?t[x].titleMaxWidth:t[x].lineCoordinates.height),t[x].calculateValueToPixelConversionParameters(),t[x].calculateBreaksSizeInValues(),F+=S[x]+t[x].margin}if(e&&0<e.length)for(x=0;x<e.length;x++){if(X=e[x]._labels&&0<e[x]._labels.length?e[x]._labels[0].textBlock.fontSize/2:0,o=Math.round(n.x1-s),r=a&&0<a.length?Math.round(a[0]?a[0].lineCoordinates.y2:n.y1<Math.max(X,10)?Math.max(X,10):n.y1):n.y1<Math.max(X,10)?Math.max(X,10):n.y1,h=Math.round(n.x2-Y-E),l=i&&0<i.length?Math.round(i[0]?i[0].lineCoordinates.y1:n.y2-D>d.height-Math.max(X,10)?d.height-Math.max(X,10):n.y2-D):n.y2>d.height-Math.max(X,10)?d.height-Math.max(X,10):n.y2,i&&0<i.length)for(X=0;X<i.length;X++)i[X]&&i[X].labelAutoFit&&(h=0>i[X].labelAngle?Math.max(h,w):0===i[X].labelAngle?Math.max(h,w/2):h,o=0>i[X].labelAngle||0===i[X].labelAngle?h-Y:o);if(a&&0<a.length)for(X=0;X<a.length;X++)a[X]&&a[X].labelAutoFit&&(o=(h=a[X].lineCoordinates.x2)-Y);e[x].lineCoordinates={x1:h+I,y1:r,x2:h+I,y2:l,height:Math.abs(l-r)},"inside"===e[x].labelPlacement&&0<x&&(e[x].lineCoordinates.x1=e[x].lineCoordinates.x1+(k[x]-(e[x]._titleTextBlock?e[x]._titleTextBlock.height:0)-2)-e[x].tickLength-(e[x].stripLineLabelEffectiveWidth||0),e[x].lineCoordinates.x2=e[x].lineCoordinates.x1+e[x].lineThickness/2),"inside"===e[x].tickPlacement&&0<x&&(e[x].lineCoordinates.x1+=e[x].tickLength,e[x].lineCoordinates.x2=e[x].lineCoordinates.x1+e[x].lineThickness/2),e[x].bounds={x1:e[x].lineCoordinates.x1,y1:r,x2:h+k[x]+I,y2:l,width:h-o,height:l-r},e[x].bounds.width=e[x].bounds.x2-e[x].bounds.x1,e[x].title&&(e[x]._titleTextBlock.maxWidth=0<e[x].titleMaxWidth&&e[x].titleMaxWidth<e[x].lineCoordinates.height?e[x].titleMaxWidth:e[x].lineCoordinates.height),e[x].calculateValueToPixelConversionParameters(),e[x].calculateBreaksSizeInValues(),I+=k[x]+e[x].margin}for(x=0;x<u.length;x++)"axisY"===u[x].type&&(u[x].calculateValueToPixelConversionParameters(),u[x].calculateBreaksSizeInValues());if(0<g){if(t&&0<t.length)for(x=0;x<t.length;x++)m=L[g-1][x]===L[g][x];else m=!0;if(e&&0<e.length)for(x=0;x<e.length;x++)b=B[g-1][x]===B[g][x];else b=!0;if(i&&0<i.length)for(x=0;x<i.length;x++)v=y[g-1][x]===y[g][x];else v=!0;if(a&&0<a.length)for(x=0;x<a.length;x++)_=M[g-1][x]===M[g][x];else _=!0}if(m&&b&&v&&_)break;g++}if(i&&0<i.length)for(x=0;x<i.length;x++)i[x].calculateStripLinesThicknessInValues(),i[x].calculateBreaksInPixels();if(a&&0<a.length)for(x=0;x<a.length;x++)a[x].calculateStripLinesThicknessInValues(),a[x].calculateBreaksInPixels();if(t&&0<t.length)for(x=0;x<t.length;x++)t[x].calculateStripLinesThicknessInValues(),t[x].calculateBreaksInPixels();if(e&&0<e.length)for(x=0;x<e.length;x++)e[x].calculateStripLinesThicknessInValues(),e[x].calculateBreaksInPixels()}},D.render=function(t,e,i,a,s){var n=t[0]?t[0].chart:e[0].chart;if(s=n.ctx,n.alignVerticalAxes&&n.alignVerticalAxes(),s.save(),s.beginPath(),t&&t.length&&s.rect(5,t[0].bounds.y1,t[0].chart.width-10,t[t.length-1].bounds.y2),e&&e.length&&s.rect(5,e[e.length-1].bounds.y1,e[0].chart.width-10,e[0].bounds.y2),s.clip(),t&&0<t.length)for(var o=0;o<t.length;o++)t[o].renderLabelsTicksAndTitle();if(e&&0<e.length)for(o=0;o<e.length;o++)e[o].renderLabelsTicksAndTitle();if(s.restore(),i&&0<i.length)for(o=0;o<i.length;o++)i[o].renderLabelsTicksAndTitle();if(a&&0<a.length)for(o=0;o<a.length;o++)a[o].renderLabelsTicksAndTitle();if(n.preparePlotArea(),n=n.plotArea,s.save(),s.beginPath(),s.rect(n.x1,n.y1,Math.abs(n.x2-n.x1),Math.abs(n.y2-n.y1)),s.clip(),t&&0<t.length)for(o=0;o<t.length;o++)t[o].renderStripLinesOfThicknessType("value");if(e&&0<e.length)for(o=0;o<e.length;o++)e[o].renderStripLinesOfThicknessType("value");if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].renderStripLinesOfThicknessType("value");if(a&&0<a.length)for(o=0;o<a.length;o++)a[o].renderStripLinesOfThicknessType("value");if(t&&0<t.length)for(o=0;o<t.length;o++)t[o].renderInterlacedColors();if(e&&0<e.length)for(o=0;o<e.length;o++)e[o].renderInterlacedColors();if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].renderInterlacedColors();if(a&&0<a.length)for(o=0;o<a.length;o++)a[o].renderInterlacedColors();if(s.restore(),t&&0<t.length)for(o=0;o<t.length;o++)t[o].renderGrid(),R&&(t[o].createMask(),t[o].renderBreaksBackground());if(e&&0<e.length)for(o=0;o<e.length;o++)e[o].renderGrid(),R&&(e[o].createMask(),e[o].renderBreaksBackground());if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].renderGrid(),R&&(i[o].createMask(),i[o].renderBreaksBackground());if(a&&0<a.length)for(o=0;o<a.length;o++)a[o].renderGrid(),R&&(a[o].createMask(),a[o].renderBreaksBackground());if(t&&0<t.length)for(o=0;o<t.length;o++)t[o].renderAxisLine();if(e&&0<e.length)for(o=0;o<e.length;o++)e[o].renderAxisLine();if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].renderAxisLine();if(a&&0<a.length)for(o=0;o<a.length;o++)a[o].renderAxisLine();if(t&&0<t.length)for(o=0;o<t.length;o++)t[o].renderStripLinesOfThicknessType("pixel");if(e&&0<e.length)for(o=0;o<e.length;o++)e[o].renderStripLinesOfThicknessType("pixel");if(i&&0<i.length)for(o=0;o<i.length;o++)i[o].renderStripLinesOfThicknessType("pixel");if(a&&0<a.length)for(o=0;o<a.length;o++)a[o].renderStripLinesOfThicknessType("pixel")},D.prototype.calculateStripLinesThicknessInValues=function(){for(var t=0;t<this.stripLines.length;t++)if(null!==this.stripLines[t].startValue&&null!==this.stripLines[t].endValue){var e=Math.min(this.stripLines[t].startValue,this.stripLines[t].endValue),i=Math.max(this.stripLines[t].startValue,this.stripLines[t].endValue);e=this.getApparentDifference(e,i);this.stripLines[t].value=this.logarithmic?this.stripLines[t].value*Math.sqrt(Math.log(Math.max(this.stripLines[t].startValue,this.stripLines[t].endValue)/Math.min(this.stripLines[t].startValue,this.stripLines[t].endValue))/Math.log(e)):this.stripLines[t].value+(Math.abs(this.stripLines[t].endValue-this.stripLines[t].startValue)-e)/2,this.stripLines[t].thickness=e,this.stripLines[t]._thicknessType="value"}},D.prototype.calculateBreaksSizeInValues=function(){for(var t,e="left"===this._position||"right"===this._position?this.lineCoordinates.height||this.chart.height:this.lineCoordinates.width||this.chart.width,i=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[],a=this.conversionParameters.pixelPerUnit||e/(this.logarithmic?this.conversionParameters.maximum/this.conversionParameters.minimum:this.conversionParameters.maximum-this.conversionParameters.minimum),s=this.scaleBreaks&&!c(this.scaleBreaks.options.spacing),n=0;n<i.length;n++)t=s||!c(i[n].options.spacing),i[n].spacing=P(i[n].spacing,e,8,t?.1*e:8,t?0:3)<<0,i[n].size=0>i[n].spacing?0:Math.abs(i[n].spacing/a),this.logarithmic&&(i[n].size=Math.pow(this.logarithmBase,i[n].size))},D.prototype.calculateBreaksInPixels=function(){if(!(this.scaleBreaks&&0>=this.scaleBreaks._appliedBreaks.length)){var t=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];t.length&&(this.scaleBreaks.firstBreakIndex=this.scaleBreaks.lastBreakIndex=null);for(var e=0;e<t.length&&!(t[e].startValue>this.conversionParameters.maximum);e++)t[e].endValue<this.conversionParameters.minimum||(c(this.scaleBreaks.firstBreakIndex)&&(this.scaleBreaks.firstBreakIndex=e),t[e].startValue>=this.conversionParameters.minimum&&(t[e].startPixel=this.convertValueToPixel(t[e].startValue),this.scaleBreaks.lastBreakIndex=e),t[e].endValue<=this.conversionParameters.maximum&&(t[e].endPixel=this.convertValueToPixel(t[e].endValue)))}},D.prototype.renderLabelsTicksAndTitle=function(){var t=this,e=!1,i=0,a=0,s=1,n=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(s=1.2),"undefined"===typeof this.options.interval){if("bottom"===this._position||"top"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){i=[],s=0!==this.labelAngle&&360!==this.labelAngle?1:1.2;for(var o,r=this.viewportMaximum,h=this.lineCoordinates.width/Math.log(this.range),l=this._labels.length-1;0<=l&&!((c=this._labels[l]).position<this.viewportMinimum);l--)c.position>this.viewportMaximum||!(l===this._labels.length-1||o<Math.log(r/c.position)*h/s)||(i.push(c),r=c.position,o=c.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+c.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=i}else{for(l=0;l<this._labels.length;l++)(c=this._labels[l]).position<this.viewportMinimum||(i+=o=c.textBlock.width*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+c.textBlock.height*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));i>this.lineCoordinates.width*s&&this.labelAutoFit&&(e=!0)}if("left"===this._position||"right"===this._position)if(this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit){var d;for(i=[],r=this.viewportMaximum,h=this.lineCoordinates.height/Math.log(this.range),l=this._labels.length-1;0<=l&&!((c=this._labels[l]).position<this.viewportMinimum);l--)c.position>this.viewportMaximum||!(l===this._labels.length-1||d<Math.log(r/c.position)*h)||(i.push(c),r=c.position,d=c.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+c.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));this._labels=i}else{for(l=0;l<this._labels.length;l++)(c=this._labels[l]).position<this.viewportMinimum||(a+=d=c.textBlock.height*Math.abs(Math.cos(Math.PI/180*this.labelAngle))+c.textBlock.width*Math.abs(Math.sin(Math.PI/180*this.labelAngle)));a>this.lineCoordinates.height*s&&this.labelAutoFit&&(e=!0)}}this.logarithmic&&!this.equidistantInterval&&this.labelAutoFit&&this._labels.sort((function(t,e){return t.position-e.position}));var c,p;l=0;if("bottom"===this._position){for(l=0;l<this._labels.length;l++)(c=this._labels[l]).position<this.viewportMinimum||c.position>this.viewportMaximum||(p=this.getPixelCoordinatesOnAxis(c.position),this.tickThickness&&"inside"!=this.tickPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,a=1===this.ctx.lineWidth%2?.5+(p.x<<0):p.x<<0,this.ctx.beginPath(),this.ctx.moveTo(a,p.y<<0),this.ctx.lineTo(a,p.y+this.tickLength<<0),this.ctx.stroke()),e&&0!==n++%2&&this.labelAutoFit||(0===c.textBlock.angle?(p.x-=c.textBlock.width/2,p.y="inside"===this.labelPlacement?p.y-(("inside"===this.tickPlacement?this.tickLength:0)+c.textBlock.height-c.textBlock.fontSize/2):p.y+("inside"===this.tickPlacement?0:this.tickLength)+c.textBlock.fontSize/2+5):(p.x="inside"===this.labelPlacement?0>this.labelAngle?p.x:p.x-c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):p.x-(0>this.labelAngle?c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),p.y="inside"===this.labelPlacement?0>this.labelAngle?p.y-("inside"===this.tickPlacement?this.tickLength:0)-5:p.y-("inside"===this.tickPlacement?this.tickLength:0)-Math.abs(c.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5):p.y+("inside"===this.tickPlacement?0:this.tickLength)+Math.abs(0>this.labelAngle?c.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),c.textBlock.x=p.x,c.textBlock.y=p.y));"inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(l=0;l<t._labels.length;l++)if(!((c=t._labels[l]).position<t.viewportMinimum||c.position>t.viewportMaximum)&&(p=t.getPixelCoordinatesOnAxis(c.position),t.tickThickness)){t.ctx.lineWidth=t.tickThickness,t.ctx.strokeStyle=t.tickColor;var e=1===t.ctx.lineWidth%2?.5+(p.x<<0):p.x<<0;t.ctx.save(),t.ctx.beginPath(),t.ctx.moveTo(e,p.y<<0),t.ctx.lineTo(e,p.y-t.tickLength<<0),t.ctx.stroke(),t.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y2-this._titleTextBlock.height-3,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("top"===this._position){for(l=0;l<this._labels.length;l++)(c=this._labels[l]).position<this.viewportMinimum||c.position>this.viewportMaximum||(p=this.getPixelCoordinatesOnAxis(c.position),this.tickThickness&&"inside"!=this.tickPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,a=1===this.ctx.lineWidth%2?.5+(p.x<<0):p.x<<0,this.ctx.beginPath(),this.ctx.moveTo(a,p.y<<0),this.ctx.lineTo(a,p.y-this.tickLength<<0),this.ctx.stroke()),e&&0!==n++%2&&this.labelAutoFit||(0===c.textBlock.angle?(p.x-=c.textBlock.width/2,p.y="inside"===this.labelPlacement?p.y+this.labelFontSize/2+("inside"===this.tickPlacement?this.tickLength:0)+5:p.y-(("inside"===this.tickPlacement?0:this.tickLength)+c.textBlock.height-c.textBlock.fontSize/2)):(p.x="inside"===this.labelPlacement?0<this.labelAngle?p.x:p.x-c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):p.x+(c.textBlock.height-this.labelFontSize)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),p.y="inside"===this.labelPlacement?0<this.labelAngle?p.y+("inside"===this.tickPlacement?this.tickLength:0)+5:p.y-c.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+("inside"===this.tickPlacement?this.tickLength:0)+5:p.y-(("inside"===this.tickPlacement?0:this.tickLength)+((c.textBlock.height-c.textBlock.fontSize/2)*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?c.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))),c.textBlock.x=p.x,c.textBlock.y=p.y));"inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(l=0;l<t._labels.length;l++)if(!((c=t._labels[l]).position<t.viewportMinimum||c.position>t.viewportMaximum)&&(p=t.getPixelCoordinatesOnAxis(c.position),t.tickThickness)){t.ctx.lineWidth=t.tickThickness,t.ctx.strokeStyle=t.tickColor;var e=1===t.ctx.lineWidth%2?.5+(p.x<<0):p.x<<0;t.ctx.save(),t.ctx.beginPath(),t.ctx.moveTo(e,p.y<<0),t.ctx.lineTo(e,p.y+t.tickLength<<0),t.ctx.stroke(),t.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.bounds.y1+1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("left"===this._position){for(l=0;l<this._labels.length;l++)(c=this._labels[l]).position<this.viewportMinimum||c.position>this.viewportMaximum||(p=this.getPixelCoordinatesOnAxis(c.position),this.tickThickness&&"inside"!=this.tickPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,a=1===this.ctx.lineWidth%2?.5+(p.y<<0):p.y<<0,this.ctx.beginPath(),this.ctx.moveTo(p.x<<0,a),this.ctx.lineTo(p.x-this.tickLength<<0,a),this.ctx.stroke()),e&&0!==n++%2&&this.labelAutoFit||(0===this.labelAngle?(c.textBlock.y=p.y,c.textBlock.x="inside"===this.labelPlacement?p.x+("inside"===this.tickPlacement?this.tickLength:0)+5:p.x-c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?0:this.tickLength)-5):(c.textBlock.y="inside"===this.labelPlacement?p.y:p.y-c.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),c.textBlock.x="inside"===this.labelPlacement?p.x+("inside"===this.tickPlacement?this.tickLength:0)+5:0<this.labelAngle?p.x-c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?0:this.tickLength)-5:p.x-c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(c.textBlock.height-c.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?0:this.tickLength))));"inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(l=0;l<t._labels.length;l++)if(!((c=t._labels[l]).position<t.viewportMinimum||c.position>t.viewportMaximum)&&(p=t.getPixelCoordinatesOnAxis(c.position),t.tickThickness)){t.ctx.lineWidth=t.tickThickness,t.ctx.strokeStyle=t.tickColor;var e=1===t.ctx.lineWidth%2?.5+(p.y<<0):p.y<<0;t.ctx.save(),t.ctx.beginPath(),t.ctx.moveTo(p.x<<0,e),t.ctx.lineTo(p.x+t.tickLength<<0,e),t.ctx.stroke(),t.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x1+1,this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}else if("right"===this._position){for(l=0;l<this._labels.length;l++)(c=this._labels[l]).position<this.viewportMinimum||c.position>this.viewportMaximum||(p=this.getPixelCoordinatesOnAxis(c.position),this.tickThickness&&"inside"!=this.tickPlacement&&(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor,a=1===this.ctx.lineWidth%2?.5+(p.y<<0):p.y<<0,this.ctx.beginPath(),this.ctx.moveTo(p.x<<0,a),this.ctx.lineTo(p.x+this.tickLength<<0,a),this.ctx.stroke()),e&&0!==n++%2&&this.labelAutoFit||(0===this.labelAngle?(c.textBlock.y=p.y,c.textBlock.x="inside"===this.labelPlacement?p.x-c.textBlock.width-("inside"===this.tickPlacement?this.tickLength:0)-5:p.x+("inside"===this.tickPlacement?0:this.tickLength)+5):(c.textBlock.y="inside"===this.labelPlacement?p.y-c.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0>this.labelAngle?p.y:p.y-(c.textBlock.height-c.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),c.textBlock.x="inside"===this.labelPlacement?p.x-c.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-("inside"===this.tickPlacement?this.tickLength:0)-5:0<this.labelAngle?p.x+(c.textBlock.height-c.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+("inside"===this.tickPlacement?0:this.tickLength):p.x+("inside"===this.tickPlacement?0:this.tickLength)+5)));"inside"===this.tickPlacement&&this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(l=0;l<t._labels.length;l++)if(!((c=t._labels[l]).position<t.viewportMinimum||c.position>t.viewportMaximum)&&(p=t.getPixelCoordinatesOnAxis(c.position),t.tickThickness)){t.ctx.lineWidth=t.tickThickness,t.ctx.strokeStyle=t.tickColor;var e=1===t.ctx.lineWidth%2?.5+(p.y<<0):p.y<<0;t.ctx.save(),t.ctx.beginPath(),t.ctx.moveTo(p.x<<0,e),t.ctx.lineTo(p.x-t.tickLength<<0,e),t.ctx.stroke(),t.ctx.restore()}}),this),this.title&&(this._titleTextBlock.measureText(),this._titleTextBlock.x=this.bounds.x2-1,this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this.titleMaxWidth=this._titleTextBlock.maxWidth,this._titleTextBlock.render(!0))}if(n=0,"inside"===this.labelPlacement)this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(l=0;l<t._labels.length;l++)(c=t._labels[l]).position<t.viewportMinimum||c.position>t.viewportMaximum||e&&0!==n++%2&&t.labelAutoFit||(t.ctx.save(),t.ctx.beginPath(),c.textBlock.render(!0),t.ctx.restore())}),this);else for(l=0;l<this._labels.length;l++)(c=this._labels[l]).position<this.viewportMinimum||c.position>this.viewportMaximum||e&&0!==n++%2&&this.labelAutoFit||c.textBlock.render(!0)},D.prototype.renderInterlacedColors=function(){var t,e,i=this.chart.plotArea.ctx,a=this.chart.plotArea,s=0;if(t=!0,"bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(i.fillStyle=this.interlacedColor,s=0;s<this._labels.length;s++)t?(e=this.getPixelCoordinatesOnAxis(this._labels[s].position),t=s+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[s+1].position),i.fillRect(a.x1,Math.min(e.y,t.y),Math.abs(a.x1-a.x2),Math.abs(t.y-e.y)),t=!1):t=!0}else for(i.fillStyle=this.interlacedColor,s=0;s<this._labels.length;s++)t?(t=this.getPixelCoordinatesOnAxis(this._labels[s].position),e=s+1>this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[s+1].position),i.fillRect(Math.min(e.x,t.x),a.y1,Math.abs(e.x-t.x),Math.abs(a.y1-a.y2)),t=!1):t=!0;i.beginPath()},D.prototype.renderStripLinesOfThicknessType=function(t){if(this.stripLines&&0<this.stripLines.length&&t){var e,i=this,a=0,s=0,n=!1,o=!1,r=[],h=[];for(o=!1,a=0;a<this.stripLines.length;a++){var l=this.stripLines[a];l._thicknessType===t&&("pixel"===t&&(l.value<this.viewportMinimum||l.value>this.viewportMaximum||c(l.value)||isNaN(this.range))||"value"===t&&(l.startValue<=this.viewportMinimum&&l.endValue<=this.viewportMinimum||l.startValue>=this.viewportMaximum&&l.endValue>=this.viewportMaximum||c(l.startValue)||c(l.endValue)||isNaN(this.range))||r.push(l))}for(a=0;a<this._stripLineLabels.length;a++)if(l=this.stripLines[a],!((e=this._stripLineLabels[a]).position<this.viewportMinimum||e.position>this.viewportMaximum||isNaN(this.range))){if(t=this.getPixelCoordinatesOnAxis(e.position),"outside"===e.stripLine.labelPlacement)if(l&&(this.ctx.strokeStyle=l.color,this.ctx.lineWidth="pixel"===l._thicknessType?l.thickness:this.tickThickness),"bottom"===this._position){var d=1===this.ctx.lineWidth%2?.5+(t.x<<0):t.x<<0;this.ctx.beginPath(),this.ctx.moveTo(d,t.y<<0),this.ctx.lineTo(d,t.y+this.tickLength<<0),this.ctx.stroke(),0===this.labelAngle?(t.x-=e.textBlock.width/2,t.y+=this.tickLength+e.textBlock.fontSize/2+5):(t.x-=0>this.labelAngle?e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,t.y+=this.tickLength+Math.abs(0>this.labelAngle?e.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5))}else"top"===this._position?(d=1===this.ctx.lineWidth%2?.5+(t.x<<0):t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(d,t.y<<0),this.ctx.lineTo(d,t.y-this.tickLength<<0),this.ctx.stroke(),0===this.labelAngle?(t.x-=e.textBlock.width/2,t.y-=this.tickLength+e.textBlock.height-e.textBlock.fontSize/2):(t.x+=(e.textBlock.height-this.tickLength-this.labelFontSize/2)*Math.sin(Math.PI/180*this.labelAngle)-(0<this.labelAngle?e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0),t.y-=this.tickLength+(e.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+(0<this.labelAngle?e.textBlock.width*Math.sin(Math.PI/180*this.labelAngle):0)))):"left"===this._position?(d=1===this.ctx.lineWidth%2?.5+(t.y<<0):t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,d),this.ctx.lineTo(t.x-this.tickLength<<0,d),this.ctx.stroke(),0===this.labelAngle?t.x=t.x-e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:(t.y-=e.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),t.x=0<this.labelAngle?t.x-e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5:t.x-e.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+(e.textBlock.height-e.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)-this.tickLength)):"right"===this._position&&(d=1===this.ctx.lineWidth%2?.5+(t.y<<0):t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,d),this.ctx.lineTo(t.x+this.tickLength<<0,d),this.ctx.stroke(),0===this.labelAngle?t.x=t.x+this.tickLength+5:(t.y=0>this.labelAngle?t.y:t.y-(e.textBlock.height-e.textBlock.fontSize/2-5)*Math.cos(Math.PI/180*this.labelAngle),t.x=0<this.labelAngle?t.x+(e.textBlock.height-e.textBlock.fontSize/2-5)*Math.sin(Math.PI/180*this.labelAngle)+this.tickLength:t.x+this.tickLength+5));else e.textBlock.angle=-90,"bottom"===this._position?(e.textBlock.maxWidth=this.options.stripLines[a].labelMaxWidth?this.options.stripLines[a].labelMaxWidth:this.chart.plotArea.height-3,e.textBlock.measureText(),t.x-e.textBlock.height-l.thickness/2>this.chart.plotArea.x1?c(l.startValue)?t.x-=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.x-=e.textBlock.height/2-e.textBlock.fontSize/2:(e.textBlock.angle=90,c(l.startValue)?t.x+=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.x+=e.textBlock.height/2-e.textBlock.fontSize/2),t.y=-90===e.textBlock.angle?"near"===e.stripLine.labelAlign?this.chart.plotArea.y2-3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+e.textBlock.width)/2:this.chart.plotArea.y1+e.textBlock.width+3:"near"===e.stripLine.labelAlign?this.chart.plotArea.y2-e.textBlock.width-3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-e.textBlock.width)/2:this.chart.plotArea.y1+3):"top"===this._position?(e.textBlock.maxWidth=this.options.stripLines[a].labelMaxWidth?this.options.stripLines[a].labelMaxWidth:this.chart.plotArea.height-3,e.textBlock.measureText(),t.x-e.textBlock.height-l.thickness/2>this.chart.plotArea.x1?c(l.startValue)?t.x-=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.x-=e.textBlock.height/2-e.textBlock.fontSize/2:(e.textBlock.angle=90,c(l.startValue)?t.x+=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.x+=e.textBlock.height/2-e.textBlock.fontSize/2),t.y=-90===e.textBlock.angle?"near"===e.stripLine.labelAlign?this.chart.plotArea.y1+e.textBlock.width+3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1+e.textBlock.width)/2:this.chart.plotArea.y2-3:"near"===e.stripLine.labelAlign?this.chart.plotArea.y1+3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.y2+this.chart.plotArea.y1-e.textBlock.width)/2:this.chart.plotArea.y2-e.textBlock.width-3):"left"===this._position?(e.textBlock.maxWidth=this.options.stripLines[a].labelMaxWidth?this.options.stripLines[a].labelMaxWidth:this.chart.plotArea.width-3,e.textBlock.angle=0,e.textBlock.measureText(),t.y-e.textBlock.height-l.thickness/2>this.chart.plotArea.y1?c(l.startValue)?t.y-=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.y-=e.textBlock.height/2-e.textBlock.fontSize/2:c(l.startValue)?t.y+=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.y+=e.textBlock.height/2-e.textBlock.fontSize+3,t.x="near"===e.stripLine.labelAlign?this.chart.plotArea.x1+3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-e.textBlock.width/2:this.chart.plotArea.x2-e.textBlock.width-3):"right"===this._position&&(e.textBlock.maxWidth=this.options.stripLines[a].labelMaxWidth?this.options.stripLines[a].labelMaxWidth:this.chart.plotArea.width-3,e.textBlock.angle=0,e.textBlock.measureText(),t.y-e.textBlock.height-l.thickness/2>this.chart.plotArea.y1?c(l.startValue)?t.y-=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.y-=e.textBlock.height/2-e.textBlock.fontSize/2:c(l.startValue)?t.y+=e.textBlock.height-e.textBlock.fontSize/2+l.thickness/2:t.y-=e.textBlock.height/2-e.textBlock.fontSize/2+3,t.x="near"===e.stripLine.labelAlign?this.chart.plotArea.x2-e.textBlock.width-3:"center"===e.stripLine.labelAlign?(this.chart.plotArea.x2+this.chart.plotArea.x1)/2-e.textBlock.width/2:this.chart.plotArea.x1+3);e.textBlock.x=t.x,e.textBlock.y=t.y,h.push(e)}if(!o){for(o=!1,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),a=0;a<r.length;a++)(l=r[a]).showOnTop?n||(n=!0,this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip(),s=0;s<r.length;s++)(l=r[s]).showOnTop&&l.render();this.ctx.restore()}),l)):l.render();for(a=0;a<h.length;a++)(e=h[a]).stripLine.showOnTop?o||(o=!0,this.chart.addEventListener("dataAnimationIterationEnd",(function(){for(s=0;s<h.length;s++)"inside"===(e=h[s]).stripLine.labelPlacement&&e.stripLine.showOnTop&&(i.ctx.save(),i.ctx.beginPath(),i.ctx.rect(i.chart.plotArea.x1,i.chart.plotArea.y1,i.chart.plotArea.width,i.chart.plotArea.height),i.ctx.clip(),e.textBlock.render(!0),i.ctx.restore())}),e.textBlock)):"inside"===e.stripLine.labelPlacement&&e.textBlock.render(!0);this.ctx.restore(),o=!0}if(o)for(o=!1,a=0;a<h.length;a++)"outside"===(e=h[a]).stripLine.labelPlacement&&e.textBlock.render(!0)}},D.prototype.renderBreaksBackground=function(){this.chart._breaksCanvas&&this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length&&this.maskCanvas&&(this.chart._breaksCanvasCtx.save(),this.chart._breaksCanvasCtx.beginPath(),this.chart._breaksCanvasCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.chart._breaksCanvasCtx.clip(),this.chart._breaksCanvasCtx.drawImage(this.maskCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx.restore())},D.prototype.createMask=function(){if(this.scaleBreaks&&0<this.scaleBreaks._appliedBreaks.length){var t=this.scaleBreaks._appliedBreaks;R?(this.maskCanvas=_(this.chart.width,this.chart.height),this.maskCtx=this.maskCanvas.getContext("2d")):(this.maskCanvas=this.chart.plotArea.canvas,this.maskCtx=this.chart.plotArea.ctx),this.maskCtx.save(),this.maskCtx.beginPath(),this.maskCtx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.maskCtx.clip();for(var e=0;e<t.length;e++)t[e].endValue<this.viewportMinimum||t[e].startValue>this.viewportMaximum||isNaN(this.range)||t[e].render(this.maskCtx);this.maskCtx.restore()}},D.prototype.renderCrosshair=function(t,e){isFinite(this.minimum)&&isFinite(this.maximum)&&this.crosshair.render(t,e)},D.prototype.showCrosshair=function(t){c(t)||t<this.viewportMinimum||t>this.viewportMaximum||("top"===this._position||"bottom"===this._position?this.crosshair.render(this.convertValueToPixel(t),null,t):this.crosshair.render(null,this.convertValueToPixel(t),t))},D.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var t=this.chart.ctx;t.save();var e,i=this.chart.plotArea;if(t.lineWidth=this.gridThickness,t.strokeStyle=this.gridColor,t.setLineDash&&t.setLineDash(m(this.gridDashType,this.gridThickness)),"bottom"===this._position||"top"===this._position)for(a=0;a<this._labels.length;a++)this._labels[a].position<this.viewportMinimum||this._labels[a].position>this.viewportMaximum||this._labels[a].breaksLabelType||(t.beginPath(),e=this.getPixelCoordinatesOnAxis(this._labels[a].position),e=1===t.lineWidth%2?.5+(e.x<<0):e.x<<0,t.moveTo(e,i.y1<<0),t.lineTo(e,i.y2<<0),t.stroke());else if("left"===this._position||"right"===this._position)for(var a=0;a<this._labels.length;a++)this._labels[a].position<this.viewportMinimum||this._labels[a].position>this.viewportMaximum||this._labels[a].breaksLabelType||(t.beginPath(),e=this.getPixelCoordinatesOnAxis(this._labels[a].position),e=1===t.lineWidth%2?.5+(e.y<<0):e.y<<0,t.moveTo(i.x1<<0,e),t.lineTo(i.x2<<0,e),t.stroke());t.restore()}},D.prototype.renderAxisLine=function(){var t,e,i=this.chart.ctx,a=R?this.chart._preRenderCtx:i,s=Math.ceil(this.tickThickness/(this.reversed?-2:2)),n=Math.ceil(this.tickThickness/(this.reversed?2:-2));if(a.save(),"bottom"===this._position||"top"===this._position){if(this.lineThickness){this.reversed?(t=this.lineCoordinates.x2,e=this.lineCoordinates.x1):(t=this.lineCoordinates.x1,e=this.lineCoordinates.x2),a.lineWidth=this.lineThickness,a.strokeStyle=this.lineColor?this.lineColor:"black",a.setLineDash&&a.setLineDash(m(this.lineDashType,this.lineThickness));var o=1===this.lineThickness%2?.5+(this.lineCoordinates.y1<<0):this.lineCoordinates.y1<<0;if(a.beginPath(),this.scaleBreaks&&!c(this.scaleBreaks.firstBreakIndex))if(c(this.scaleBreaks.lastBreakIndex))t=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+n;else for(var r=this.scaleBreaks.firstBreakIndex;r<=this.scaleBreaks.lastBreakIndex;r++)a.moveTo(t,o),a.lineTo(this.scaleBreaks._appliedBreaks[r].startPixel+s,o),t=this.scaleBreaks._appliedBreaks[r].endPixel+n;t&&(a.moveTo(t,o),a.lineTo(e,o)),a.stroke()}}else if(("left"===this._position||"right"===this._position)&&this.lineThickness){if(this.reversed?(t=this.lineCoordinates.y1,e=this.lineCoordinates.y2):(t=this.lineCoordinates.y2,e=this.lineCoordinates.y1),a.lineWidth=this.lineThickness,a.strokeStyle=this.lineColor,a.setLineDash&&a.setLineDash(m(this.lineDashType,this.lineThickness)),o=1===this.lineThickness%2?.5+(this.lineCoordinates.x1<<0):this.lineCoordinates.x1<<0,a.beginPath(),this.scaleBreaks&&!c(this.scaleBreaks.firstBreakIndex))if(c(this.scaleBreaks.lastBreakIndex))t=this.scaleBreaks._appliedBreaks[this.scaleBreaks.firstBreakIndex].endPixel+s;else for(r=this.scaleBreaks.firstBreakIndex;r<=this.scaleBreaks.lastBreakIndex;r++)a.moveTo(o,t),a.lineTo(o,this.scaleBreaks._appliedBreaks[r].startPixel+n),t=this.scaleBreaks._appliedBreaks[r].endPixel+s;t&&(a.moveTo(o,t),a.lineTo(o,e)),a.stroke()}R&&(i.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),this.chart._breaksCanvasCtx&&this.chart._breaksCanvasCtx.drawImage(this.chart._preRenderCanvas,0,0,this.chart.width,this.chart.height),a.clearRect(0,0,this.chart.width,this.chart.height)),a.restore()},D.prototype.getPixelCoordinatesOnAxis=function(t){var e={};return"bottom"!==this._position&&"top"!==this._position||(e.x=this.convertValueToPixel(t),e.y=this.lineCoordinates.y1),"left"!==this._position&&"right"!==this._position||(e.y=this.convertValueToPixel(t),e.x=this.lineCoordinates.x2),e},D.prototype.convertPixelToValue=function(t){if("undefined"===typeof t)return null;var e,i=0,a=0,s=(i=!0,this.scaleBreaks?this.scaleBreaks._appliedBreaks:[]);a="number"===typeof t?t:"left"===this._position||"right"===this._position?t.y:t.x;if(this.logarithmic){if(t=e=Math.pow(this.logarithmBase,(a-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit),a<=this.conversionParameters.reference===("left"===this._position||"right"===this._position)!==this.reversed){for(a=0;a<s.length;a++)if(!(s[a].endValue<this.conversionParameters.minimum))if(i)if(s[a].startValue<this.conversionParameters.minimum){if(1<s[a].size&&this.conversionParameters.minimum*Math.pow(s[a].endValue/s[a].startValue,Math.log(e)/Math.log(s[a].size))<s[a].endValue){t=Math.pow(s[a].endValue/s[a].startValue,Math.log(e)/Math.log(s[a].size));break}t*=s[a].endValue/this.conversionParameters.minimum/Math.pow(s[a].size,Math.log(s[a].endValue/this.conversionParameters.minimum)/Math.log(s[a].endValue/s[a].startValue)),e/=Math.pow(s[a].size,Math.log(s[a].endValue/this.conversionParameters.minimum)/Math.log(s[a].endValue/s[a].startValue)),i=!1}else{if(!(e>s[a].startValue/this.conversionParameters.minimum))break;if((e/=s[a].startValue/this.conversionParameters.minimum)<s[a].size){t*=Math.pow(s[a].endValue/s[a].startValue,1===s[a].size?1:Math.log(e)/Math.log(s[a].size))/e;break}t*=s[a].endValue/s[a].startValue/s[a].size,e/=s[a].size,i=!1}else{if(!(e>s[a].startValue/s[a-1].endValue))break;if((e/=s[a].startValue/s[a-1].endValue)<s[a].size){t*=Math.pow(s[a].endValue/s[a].startValue,1===s[a].size?1:Math.log(e)/Math.log(s[a].size))/e;break}t*=s[a].endValue/s[a].startValue/s[a].size,e/=s[a].size}}else for(a=s.length-1;0<=a;a--)if(!(s[a].startValue>this.conversionParameters.minimum))if(i)if(s[a].endValue>this.conversionParameters.minimum){if(1<s[a].size&&this.conversionParameters.minimum*Math.pow(s[a].endValue/s[a].startValue,Math.log(e)/Math.log(s[a].size))>s[a].startValue){t=Math.pow(s[a].endValue/s[a].startValue,Math.log(e)/Math.log(s[a].size));break}t*=s[a].startValue/this.conversionParameters.minimum*Math.pow(s[a].size,Math.log(s[a].startValue/this.conversionParameters.minimum)/Math.log(s[a].endValue/s[a].startValue))*e,e*=Math.pow(s[a].size,Math.log(this.conversionParameters.minimum/s[a].startValue)/Math.log(s[a].endValue/s[a].startValue)),i=!1}else{if(!(e<s[a].endValue/this.conversionParameters.minimum))break;if((e/=s[a].endValue/this.conversionParameters.minimum)>1/s[a].size){t*=Math.pow(s[a].endValue/s[a].startValue,1>=s[a].size?1:Math.log(e)/Math.log(s[a].size))*e;break}t/=s[a].endValue/s[a].startValue/s[a].size,e*=s[a].size,i=!1}else{if(!(e<s[a].endValue/s[a+1].startValue))break;if((e/=s[a].endValue/s[a+1].startValue)>1/s[a].size){t*=Math.pow(s[a].endValue/s[a].startValue,1>=s[a].size?1:Math.log(e)/Math.log(s[a].size))*e;break}t/=s[a].endValue/s[a].startValue/s[a].size,e*=s[a].size}i=t*this.viewportMinimum}else{if(t=e=(a-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit,a<=this.conversionParameters.reference===("left"===this._position||"right"===this._position)!==this.reversed){for(a=0;a<s.length;a++)if(!(s[a].endValue<this.conversionParameters.minimum))if(i)if(s[a].startValue<this.conversionParameters.minimum){if(s[a].size&&this.conversionParameters.minimum+e*(s[a].endValue-s[a].startValue)/s[a].size<s[a].endValue){t=0>=s[a].size?0:e*(s[a].endValue-s[a].startValue)/s[a].size;break}t+=s[a].endValue-this.conversionParameters.minimum-s[a].size*(s[a].endValue-this.conversionParameters.minimum)/(s[a].endValue-s[a].startValue),e-=s[a].size*(s[a].endValue-this.conversionParameters.minimum)/(s[a].endValue-s[a].startValue),i=!1}else{if(!(e>s[a].startValue-this.conversionParameters.minimum))break;if((e-=s[a].startValue-this.conversionParameters.minimum)<s[a].size){t+=(s[a].endValue-s[a].startValue)*(0===s[a].size?1:e/s[a].size)-e;break}t+=s[a].endValue-s[a].startValue-s[a].size,e-=s[a].size,i=!1}else{if(!(e>s[a].startValue-s[a-1].endValue))break;if((e-=s[a].startValue-s[a-1].endValue)<s[a].size){t+=(s[a].endValue-s[a].startValue)*(0===s[a].size?1:e/s[a].size)-e;break}t+=s[a].endValue-s[a].startValue-s[a].size,e-=s[a].size}}else for(a=s.length-1;0<=a;a--)if(!(s[a].startValue>this.conversionParameters.minimum))if(i)if(s[a].endValue>this.conversionParameters.minimum){if(s[a].size&&this.conversionParameters.minimum+e*(s[a].endValue-s[a].startValue)/s[a].size>s[a].startValue){t=0>=s[a].size?0:e*(s[a].endValue-s[a].startValue)/s[a].size;break}t+=s[a].startValue-this.conversionParameters.minimum+s[a].size*(this.conversionParameters.minimum-s[a].startValue)/(s[a].endValue-s[a].startValue),e+=s[a].size*(this.conversionParameters.minimum-s[a].startValue)/(s[a].endValue-s[a].startValue),i=!1}else{if(!(e<s[a].endValue-this.conversionParameters.minimum))break;if((e-=s[a].endValue-this.conversionParameters.minimum)>-1*s[a].size){t+=(s[a].endValue-s[a].startValue)*(0===s[a].size?1:e/s[a].size)+e;break}t-=s[a].endValue-s[a].startValue-s[a].size,e+=s[a].size,i=!1}else{if(!(e<s[a].endValue-s[a+1].startValue))break;if((e-=s[a].endValue-s[a+1].startValue)>-1*s[a].size){t+=(s[a].endValue-s[a].startValue)*(0===s[a].size?1:e/s[a].size)+e;break}t-=s[a].endValue-s[a].startValue-s[a].size,e+=s[a].size}i=this.conversionParameters.minimum+t}return i},D.prototype.convertValueToPixel=function(t){return t=this.getApparentDifference(this.conversionParameters.minimum,t,t),this.logarithmic?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*Math.log(t/this.conversionParameters.minimum)/this.conversionParameters.lnLogarithmBase+.5<<0:"axisX"===this.type?this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(t-this.conversionParameters.minimum)+.5<<0:this.conversionParameters.reference+this.conversionParameters.pixelPerUnit*(t-this.conversionParameters.minimum)+.5},D.prototype.getApparentDifference=function(t,e,i,a){var s=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];if(this.logarithmic){i=c(i)?e/t:i;for(var n=0;n<s.length&&!(e<s[n].startValue);n++)t>s[n].endValue||(t<=s[n].startValue&&e>=s[n].endValue?i=i/s[n].endValue*s[n].startValue*s[n].size:t>=s[n].startValue&&e>=s[n].endValue?i=i/s[n].endValue*t*Math.pow(s[n].size,Math.log(s[n].endValue/t)/Math.log(s[n].endValue/s[n].startValue)):t<=s[n].startValue&&e<=s[n].endValue?i=i/e*s[n].startValue*Math.pow(s[n].size,Math.log(e/s[n].startValue)/Math.log(s[n].endValue/s[n].startValue)):!a&&t>s[n].startValue&&e<s[n].endValue&&(i=t*Math.pow(s[n].size,Math.log(e/t)/Math.log(s[n].endValue/s[n].startValue))))}else for(i=c(i)?Math.abs(e-t):i,n=0;n<s.length&&!(e<s[n].startValue);n++)t>s[n].endValue||(t<=s[n].startValue&&e>=s[n].endValue?i=i-s[n].endValue+s[n].startValue+s[n].size:t>s[n].startValue&&e>=s[n].endValue?i=i-s[n].endValue+t+s[n].size*(s[n].endValue-t)/(s[n].endValue-s[n].startValue):t<=s[n].startValue&&e<s[n].endValue?i=i-e+s[n].startValue+s[n].size*(e-s[n].startValue)/(s[n].endValue-s[n].startValue):!a&&t>s[n].startValue&&e<s[n].endValue&&(i=t+s[n].size*(e-t)/(s[n].endValue-s[n].startValue)));return i},D.prototype.setViewPortRange=function(t,e){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(t,e),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(t,e)},D.prototype.getXValueAt=function(t){if(!t)return null;var e=null;return"left"===this._position?e=this.convertPixelToValue(t.y):"bottom"===this._position&&(e=this.convertPixelToValue(t.x)),e},D.prototype.calculateValueToPixelConversionParameters=function(t){t=this.scaleBreaks?this.scaleBreaks._appliedBreaks:[];var e={pixelPerUnit:null,minimum:null,reference:null},i=this.lineCoordinates.width,a=this.lineCoordinates.height;i="bottom"===this._position||"top"===this._position?i:a,a=Math.abs(this.range);if(this.logarithmic)for(var s=0;s<t.length&&!(this.viewportMaximum<t[s].startValue);s++)this.viewportMinimum>t[s].endValue||(this.viewportMinimum>=t[s].startValue&&this.viewportMaximum<=t[s].endValue?i=0:this.viewportMinimum<=t[s].startValue&&this.viewportMaximum>=t[s].endValue?(a=a/t[s].endValue*t[s].startValue,i=0<t[s].spacing.toString().indexOf("%")?i*(1-parseFloat(t[s].spacing)/100):i-Math.min(t[s].spacing,.1*i)):this.viewportMinimum>t[s].startValue&&this.viewportMaximum>=t[s].endValue?(a=a/t[s].endValue*this.viewportMinimum,i=0<t[s].spacing.toString().indexOf("%")?i*(1-parseFloat(t[s].spacing)/100*Math.log(t[s].endValue/this.viewportMinimum)/Math.log(t[s].endValue/t[s].startValue)):i-Math.min(t[s].spacing,.1*i)*Math.log(t[s].endValue/this.viewportMinimum)/Math.log(t[s].endValue/t[s].startValue)):this.viewportMinimum<=t[s].startValue&&this.viewportMaximum<t[s].endValue&&(a=a/this.viewportMaximum*t[s].startValue,i=0<t[s].spacing.toString().indexOf("%")?i*(1-parseFloat(t[s].spacing)/100*Math.log(this.viewportMaximum/t[s].startValue)/Math.log(t[s].endValue/t[s].startValue)):i-Math.min(t[s].spacing,.1*i)*Math.log(this.viewportMaximum/t[s].startValue)/Math.log(t[s].endValue/t[s].startValue)));else for(s=0;s<t.length&&!(this.viewportMaximum<t[s].startValue);s++)this.viewportMinimum>t[s].endValue||(this.viewportMinimum>=t[s].startValue&&this.viewportMaximum<=t[s].endValue?i=0:this.viewportMinimum<=t[s].startValue&&this.viewportMaximum>=t[s].endValue?(a=a-t[s].endValue+t[s].startValue,i=0<t[s].spacing.toString().indexOf("%")?i*(1-parseFloat(t[s].spacing)/100):i-Math.min(t[s].spacing,.1*i)):this.viewportMinimum>t[s].startValue&&this.viewportMaximum>=t[s].endValue?(a=a-t[s].endValue+this.viewportMinimum,i=0<t[s].spacing.toString().indexOf("%")?i*(1-parseFloat(t[s].spacing)/100*(t[s].endValue-this.viewportMinimum)/(t[s].endValue-t[s].startValue)):i-Math.min(t[s].spacing,.1*i)*(t[s].endValue-this.viewportMinimum)/(t[s].endValue-t[s].startValue)):this.viewportMinimum<=t[s].startValue&&this.viewportMaximum<t[s].endValue&&(a=a-this.viewportMaximum+t[s].startValue,i=0<t[s].spacing.toString().indexOf("%")?i*(1-parseFloat(t[s].spacing)/100*(this.viewportMaximum-t[s].startValue)/(t[s].endValue-t[s].startValue)):i-Math.min(t[s].spacing,.1*i)*(this.viewportMaximum-t[s].startValue)/(t[s].endValue-t[s].startValue)));e.minimum=this.viewportMinimum,e.maximum=this.viewportMaximum,e.range=a,"bottom"!==this._position&&"top"!==this._position||(this.logarithmic?(e.lnLogarithmBase=Math.log(this.logarithmBase),e.pixelPerUnit=(this.reversed?-1:1)*i*e.lnLogarithmBase/Math.log(Math.abs(a))):e.pixelPerUnit=(this.reversed?-1:1)*i/Math.abs(a),e.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),"left"!==this._position&&"right"!==this._position||(this.logarithmic?(e.lnLogarithmBase=Math.log(this.logarithmBase),e.pixelPerUnit=(this.reversed?1:-1)*i*e.lnLogarithmBase/Math.log(Math.abs(a))):e.pixelPerUnit=(this.reversed?1:-1)*i/Math.abs(a),e.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=e},D.prototype.calculateAxisParameters=function(){if(this.logarithmic)this.calculateLogarithmicAxisParameters();else{var t=this.chart.layoutManager.getFreeSpace(),e=!1,i=!1;"bottom"===this._position||"top"===this._position?(this.maxWidth=t.width,this.maxHeight=t.height):(this.maxWidth=t.height,this.maxHeight=t.width);t="axisX"===this.type?"xySwapped"===this.chart.plotInfo.axisPlacement?62:70:"xySwapped"===this.chart.plotInfo.axisPlacement?50:40;var a=4;"axisX"===this.type&&(a=600>this.maxWidth?8:6);var s,n,o;t=Math.max(a,Math.floor(this.maxWidth/t)),a=0;if(!c(this.options.viewportMinimum)&&!c(this.options.viewportMaximum)&&this.options.viewportMinimum>=this.options.viewportMaximum&&(this.viewportMinimum=this.viewportMaximum=null),!c(this.options.viewportMinimum)||c(this.sessionVariables.newViewportMinimum)||isNaN(this.sessionVariables.newViewportMinimum)?(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum):this.viewportMinimum=this.sessionVariables.newViewportMinimum,!c(this.options.viewportMaximum)||c(this.sessionVariables.newViewportMaximum)||isNaN(this.sessionVariables.newViewportMaximum)?(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum):this.viewportMaximum=this.sessionVariables.newViewportMaximum,this.scaleBreaks)for(a=0;a<this.scaleBreaks._appliedBreaks.length;a++)if((!c(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[a].startValue||!c(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[a].startValue||!c(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[a].startValue)&&(!c(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[a].endValue||!c(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[a].endValue||!c(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[a].endValue)){this.scaleBreaks._appliedBreaks.splice(a,1);break}if("axisX"===this.type){if(this.dataSeries&&0<this.dataSeries.length)for(s=0;s<this.dataSeries.length;s++)"dateTime"===this.dataSeries[s].xValueType&&(i=!0);s=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,0===(n=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax)-s&&(n+=a="undefined"===typeof this.options.interval?.4:this.options.interval,s-=a),1/0!==this.dataInfo.minDiff?o=this.dataInfo.minDiff:1<n-s?o=.5*Math.abs(n-s):(o=1,i&&(e=!0))}else"axisY"===this.type&&(s=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,n=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(s)||isFinite(n)?isFinite(s)?isFinite(n)||(n=s):s=n:(n="undefined"===typeof this.options.interval?-1/0:this.options.interval,s="undefined"!==typeof this.options.interval||isFinite(this.dataInfo.minDiff)?0:1/0),0===s&&0===n?(n+=9,s=0):0===n-s?(n+=a=Math.min(Math.abs(.01*Math.abs(n)),5),s-=a):s>n?(a=Math.min(.01*Math.abs(this.getApparentDifference(n,s,null,!0)),5),0<=n?s=n-a:n=isFinite(s)?s+a:0):(a=Math.min(.01*Math.abs(this.getApparentDifference(s,n,null,!0)),.05),0!==n&&(n+=a),0!==s&&(s-=a)),o=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<n-s?.5*Math.abs(n-s):1,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&0<s&&(s=0),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&0>n&&(n=0));a=this.getApparentDifference(isNaN(this.viewportMinimum)||null===this.viewportMinimum?s:this.viewportMinimum,isNaN(this.viewportMaximum)||null===this.viewportMaximum?n:this.viewportMaximum,null,!0),"axisX"===this.type&&i?(this.valueType="dateTime",this.intervalType||(a/1<=t?(this.interval=1,this.intervalType="millisecond"):a/2<=t?(this.interval=2,this.intervalType="millisecond"):a/5<=t?(this.interval=5,this.intervalType="millisecond"):a/10<=t?(this.interval=10,this.intervalType="millisecond"):a/20<=t?(this.interval=20,this.intervalType="millisecond"):a/50<=t?(this.interval=50,this.intervalType="millisecond"):a/100<=t?(this.interval=100,this.intervalType="millisecond"):a/200<=t?(this.interval=200,this.intervalType="millisecond"):a/250<=t?(this.interval=250,this.intervalType="millisecond"):a/300<=t?(this.interval=300,this.intervalType="millisecond"):a/400<=t?(this.interval=400,this.intervalType="millisecond"):a/500<=t?(this.interval=500,this.intervalType="millisecond"):a/(1*$.secondDuration)<=t?(this.interval=1,this.intervalType="second"):a/(2*$.secondDuration)<=t?(this.interval=2,this.intervalType="second"):a/(5*$.secondDuration)<=t?(this.interval=5,this.intervalType="second"):a/(10*$.secondDuration)<=t?(this.interval=10,this.intervalType="second"):a/(15*$.secondDuration)<=t?(this.interval=15,this.intervalType="second"):a/(20*$.secondDuration)<=t?(this.interval=20,this.intervalType="second"):a/(30*$.secondDuration)<=t?(this.interval=30,this.intervalType="second"):a/(1*$.minuteDuration)<=t?(this.interval=1,this.intervalType="minute"):a/(2*$.minuteDuration)<=t?(this.interval=2,this.intervalType="minute"):a/(5*$.minuteDuration)<=t?(this.interval=5,this.intervalType="minute"):a/(10*$.minuteDuration)<=t?(this.interval=10,this.intervalType="minute"):a/(15*$.minuteDuration)<=t?(this.interval=15,this.intervalType="minute"):a/(20*$.minuteDuration)<=t?(this.interval=20,this.intervalType="minute"):a/(30*$.minuteDuration)<=t?(this.interval=30,this.intervalType="minute"):a/(1*$.hourDuration)<=t?(this.interval=1,this.intervalType="hour"):a/(2*$.hourDuration)<=t?(this.interval=2,this.intervalType="hour"):a/(3*$.hourDuration)<=t?(this.interval=3,this.intervalType="hour"):a/(6*$.hourDuration)<=t?(this.interval=6,this.intervalType="hour"):a/(1*$.dayDuration)<=t?(this.interval=1,this.intervalType="day"):a/(2*$.dayDuration)<=t?(this.interval=2,this.intervalType="day"):a/(4*$.dayDuration)<=t?(this.interval=4,this.intervalType="day"):a/(1*$.weekDuration)<=t?(this.interval=1,this.intervalType="week"):a/(2*$.weekDuration)<=t?(this.interval=2,this.intervalType="week"):a/(3*$.weekDuration)<=t?(this.interval=3,this.intervalType="week"):a/(1*$.monthDuration)<=t?(this.interval=1,this.intervalType="month"):a/(2*$.monthDuration)<=t?(this.interval=2,this.intervalType="month"):a/(3*$.monthDuration)<=t?(this.interval=3,this.intervalType="month"):a/(6*$.monthDuration)<=t?(this.interval=6,this.intervalType="month"):(this.interval=a/(1*$.yearDuration)<=t?1:a/(2*$.yearDuration)<=t?2:a/(4*$.yearDuration)<=t?4:Math.floor(D.getNiceNumber(a/(t-1),!0)/$.yearDuration),this.intervalType="year")),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=s-o/2),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=n+o/2),e?this.autoValueFormatString="MMM DD YYYY HH:mm":"year"===this.intervalType?this.autoValueFormatString="YYYY":"month"===this.intervalType?this.autoValueFormatString="MMM YYYY":"week"===this.intervalType||"day"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"hour"===this.intervalType||"minute"===this.intervalType?this.autoValueFormatString="hh:mm TT":"second"===this.intervalType?this.autoValueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",a=D.getNiceNumber(a,!1),this.interval=this.options&&0<this.options.interval?this.options.interval:D.getNiceNumber(a/(t-1),!0),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum="axisX"===this.type?s-o/2:Math.floor(s/this.interval)*this.interval),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum="axisX"===this.type?n+o/2:Math.ceil(n/this.interval)*this.interval),0===this.viewportMaximum&&0===this.viewportMinimum&&(0===this.options.viewportMinimum?this.viewportMaximum+=10:0===this.options.viewportMaximum&&(this.viewportMinimum-=10),this.options&&"undefined"===typeof this.options.interval&&(this.interval=D.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(t-1),!0)))),null!==this.minimum&&null!==this.maximum||("axisX"===this.type?(s=null!==this.minimum?this.minimum:this.dataInfo.min,0===(n=null!==this.maximum?this.maximum:this.dataInfo.max)-s&&(n+=a="undefined"===typeof this.options.interval?.4:this.options.interval,s-=a),o=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<n-s?.5*Math.abs(n-s):1):"axisY"===this.type&&(s=null!==this.minimum?this.minimum:this.dataInfo.min,n=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(s)||isFinite(n)?0===s&&0===n?(n+=9,s=0):0===n-s?(n+=a=Math.min(Math.abs(.01*Math.abs(n)),5),s-=a):s>n?(a=Math.min(.01*Math.abs(this.getApparentDifference(n,s,null,!0)),5),0<=n?s=n-a:n=isFinite(s)?s+a:0):(a=Math.min(.01*Math.abs(this.getApparentDifference(s,n,null,!0)),.05),0!==n&&(n+=a),0!==s&&(s-=a)):(n="undefined"===typeof this.options.interval?-1/0:this.options.interval,s="undefined"!==typeof this.options.interval||isFinite(this.dataInfo.minDiff)?0:1/0),o=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:1<n-s?.5*Math.abs(n-s):1,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&0<s&&(s=0),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&0>n&&(n=0)),Math.abs(this.getApparentDifference(s,n,null,!0)),"axisX"===this.type&&i?(this.valueType="dateTime",(null===this.minimum||isNaN(this.minimum))&&(this.minimum=s-o/2,this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),(null===this.maximum||isNaN(this.maximum))&&(this.maximum=n+o/2,this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum))):(this.intervalType=this.valueType="number",null===this.minimum&&(this.minimum="axisX"===this.type?s-o/2:Math.floor(s/this.interval)*this.interval,this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),null===this.maximum&&(this.maximum="axisX"===this.type?n+o/2:Math.ceil(n/this.interval)*this.interval,this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?-1/0:this.sessionVariables.viewportMaximum)),0===this.maximum&&0===this.minimum&&(0===this.options.minimum?this.maximum+=10:0===this.options.maximum&&(this.minimum-=10)))),c(this.sessionVariables.newViewportMinimum)&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),c(this.sessionVariables.newViewportMaximum)&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.range=this.viewportMaximum-this.viewportMinimum,this.intervalStartPosition="axisX"===this.type&&i?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,this.valueFormatString||(this.valueFormatString=D.generateValueFormatString(this.range,2))}},D.prototype.calculateLogarithmicAxisParameters=function(){var t,e=this.chart.layoutManager.getFreeSpace(),i=Math.log(this.logarithmBase);"bottom"===this._position||"top"===this._position?(this.maxWidth=e.width,this.maxHeight=e.height):(this.maxWidth=e.height,this.maxHeight=e.width);var a,s,n,o;e="axisX"===this.type?500>this.maxWidth?7:Math.max(7,Math.floor(this.maxWidth/100)):Math.max(Math.floor(this.maxWidth/50),3);if(o=1,(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),this.scaleBreaks)for(o=0;o<this.scaleBreaks._appliedBreaks.length;o++)if((!c(this.sessionVariables.newViewportMinimum)&&this.sessionVariables.newViewportMinimum>=this.scaleBreaks._appliedBreaks[o].startValue||!c(this.options.minimum)&&this.options.minimum>=this.scaleBreaks._appliedBreaks[o].startValue||!c(this.options.viewportMinimum)&&this.viewportMinimum>=this.scaleBreaks._appliedBreaks[o].startValue)&&(!c(this.sessionVariables.newViewportMaximum)&&this.sessionVariables.newViewportMaximum<=this.scaleBreaks._appliedBreaks[o].endValue||!c(this.options.maximum)&&this.options.maximum<=this.scaleBreaks._appliedBreaks[o].endValue||!c(this.options.viewportMaximum)&&this.viewportMaximum<=this.scaleBreaks._appliedBreaks[o].endValue)){this.scaleBreaks._appliedBreaks.splice(o,1);break}"axisX"===this.type?(a=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,1===(s=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax)/a&&(s*=o=Math.pow(this.logarithmBase,"undefined"===typeof this.options.interval?.4:this.options.interval),a/=o),n=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:s/a>this.logarithmBase?s/a*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(a=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,s=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,0>=a&&!isFinite(s)?(s="undefined"===typeof this.options.interval?0:this.options.interval,a=1):0>=a?a=s:isFinite(s)||(s=a),1===a&&1===s?(s*=this.logarithmBase-1/this.logarithmBase,a=1):1===s/a?(s*=o=Math.min(s*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),a/=o):a>s?(o=Math.min(a/s*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,5)),1<=s?a=s/o:s=a*o):(o=Math.min(s/a*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==s&&(s*=o),1!==a&&(a/=o)),n=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:s/a>this.logarithmBase?s/a*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&1<a&&(a=1),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&1>s&&(s=1)),o=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?s:this.viewportMaximum)/(isNaN(this.viewportMinimum)||null===this.viewportMinimum?a:this.viewportMinimum);var r=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?s:this.viewportMaximum)-(isNaN(this.viewportMinimum)||null===this.viewportMinimum?a:this.viewportMinimum);if(this.intervalType="number",o=Math.pow(this.logarithmBase,D.getNiceNumber(Math.abs(Math.log(o)/i),!1)),this.options&&0<this.options.interval?this.interval=this.options.interval:(this.interval=D.getNiceExponent(Math.log(o)/i/(e-1),!0),t=D.getNiceNumber(r/(e-1),!0)),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum="axisX"===this.type?a/Math.sqrt(n):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(a)/i/this.interval))),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum="axisX"===this.type?s*Math.sqrt(n):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(s)/i/this.interval))),1===this.viewportMaximum&&1===this.viewportMinimum&&(1===this.options.viewportMinimum?this.viewportMaximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.viewportMaximum&&(this.viewportMinimum/=this.logarithmBase-1/this.logarithmBase),this.options&&"undefined"===typeof this.options.interval&&(this.interval=D.getNiceExponent(Math.ceil(Math.log(o)/i)/(e-1)),t=D.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(e-1),!0))),null!==this.minimum&&null!==this.maximum||("axisX"===this.type?(a=null!==this.minimum?this.minimum:this.dataInfo.min,1===(s=null!==this.maximum?this.maximum:this.dataInfo.max)/a&&(s*=o=Math.pow(this.logarithmBase,"undefined"===typeof this.options.interval?.4:this.options.interval),a/=o),n=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:s/a>this.logarithmBase?s/a*Math.pow(this.logarithmBase,.5):this.logarithmBase):"axisY"===this.type&&(a=null!==this.minimum?this.minimum:this.dataInfo.min,s=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(a)||isFinite(s)?1===a&&1===s?(s*=this.logarithmBase,a/=this.logarithmBase):1===s/a?(s*=o=Math.pow(this.logarithmBase,this.interval),a/=o):a>s?(o=Math.min(a/s*.01,5),1<=s?a=s/o:s=a*o):(o=Math.min(s/a*Math.pow(this.logarithmBase,.01),Math.pow(this.logarithmBase,.04)),1!==s&&(s*=o),1!==a&&(a/=o)):(s="undefined"===typeof this.options.interval?0:this.options.interval,a=1),n=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:s/a>this.logarithmBase?s/a*Math.pow(this.logarithmBase,.5):this.logarithmBase,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&1<a&&(a=1),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&1>s&&(s=1)),this.intervalType="number",null===this.minimum&&(this.minimum="axisX"===this.type?a/Math.sqrt(n):Math.pow(this.logarithmBase,this.interval*Math.floor(Math.log(a)/i/this.interval)),c(null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?"undefined"===typeof this.sessionVariables.newViewportMinimum?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum)||(this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?"undefined"===typeof this.sessionVariables.newViewportMinimum?1/0:this.sessionVariables.newViewportMinimum:this.sessionVariables.viewportMinimum))),null===this.maximum&&(this.maximum="axisX"===this.type?s*Math.sqrt(n):Math.pow(this.logarithmBase,this.interval*Math.ceil(Math.log(s)/i/this.interval)),c(null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?"undefined"===typeof this.sessionVariables.newViewportMaximum?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum)||(this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?"undefined"===typeof this.sessionVariables.newViewportMaximum?0:this.sessionVariables.newViewportMaximum:this.sessionVariables.viewportMaximum))),1===this.maximum&&1===this.minimum&&(1===this.options.minimum?this.maximum*=this.logarithmBase-1/this.logarithmBase:1===this.options.maximum&&(this.minimum/=this.logarithmBase-1/this.logarithmBase))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.viewportMinimum>this.viewportMaximum&&(!this.options.viewportMinimum&&!this.options.minimum||this.options.viewportMaximum||this.options.maximum?this.options.viewportMinimum||this.options.minimum||!this.options.viewportMaximum&&!this.options.maximum||(this.viewportMinimum=this.minimum=(this.options.viewportMaximum||this.options.maximum)/Math.pow(this.logarithmBase,2*Math.ceil(this.interval))):this.viewportMaximum=this.maximum=this.options.viewportMinimum||this.options.minimum),a=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(i*this.interval)+.2)*this.interval),this.range=this.viewportMaximum/this.viewportMinimum,this.noTicks=e,!this.options.interval&&this.range<Math.pow(this.logarithmBase,8>this.viewportMaximum||3>e?2:3)){for(i=Math.floor(this.viewportMinimum/t+.5)*t;i<this.viewportMinimum;)i+=t;this.equidistantInterval=!1,this.intervalStartPosition=i,this.interval=t}else this.options.interval||(t=Math.ceil(this.interval),this.range>this.interval&&(this.interval=t,a=Math.pow(this.logarithmBase,Math.floor(Math.log(this.viewportMinimum)/(i*this.interval)+.2)*this.interval))),this.equidistantInterval=!0,this.intervalStartPosition=a;if(!this.valueFormatString&&(this.valueFormatString="#,##0.##",1>this.viewportMinimum)&&(i=Math.floor(Math.abs(Math.log(this.viewportMinimum)/Math.LN10))+2,!isNaN(i)&&isFinite(i)||(i=2),2<i))for(o=0;o<i-2;o++)this.valueFormatString+="#"},D.generateValueFormatString=function(t,e){var i="#,##0.",a=e;1>t&&(a+=Math.floor(Math.abs(Math.log(t)/Math.LN10)),isNaN(a)||!isFinite(a))&&(a=e);for(var s=0;s<a;s++)i+="#";return i},D.getNiceExponent=function(t,e){var i=Math.floor(Math.log(t)/Math.LN10),a=t/Math.pow(10,i);a=0>i?1>=a?1:5>=a?5:10:Math.max(Math.floor(a),1);return Number(-20>i?a*Math.pow(10,i):(a*Math.pow(10,i)).toFixed(20))},D.getNiceNumber=function(t,e){var i=Math.floor(Math.log(t)/Math.LN10),a=t/Math.pow(10,i);a=e?1.5>a?1:3>a?2:7>a?5:10:1>=a?1:2>=a?2:5>=a?5:10;return Number(-20>i?a*Math.pow(10,i):(a*Math.pow(10,i)).toFixed(20))},D.prototype.getLabelStartPoint=function(){var t=$[this.intervalType+"Duration"]*this.interval;t=new Date(Math.floor(this.viewportMinimum/t)*t);return"millisecond"!==this.intervalType&&("second"===this.intervalType?0<t.getMilliseconds()&&(t.setSeconds(t.getSeconds()+1),t.setMilliseconds(0)):"minute"===this.intervalType?(0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMinutes(t.getMinutes()+1),t.setSeconds(0),t.setMilliseconds(0)):"hour"===this.intervalType?(0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"day"===this.intervalType?(0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"week"===this.intervalType?(0<t.getDay()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setDate(t.getDate()+(7-t.getDay())),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"month"===this.intervalType?(1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setMonth(t.getMonth()+1),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)):"year"===this.intervalType&&(0<t.getMonth()||1<t.getDate()||0<t.getHours()||0<t.getMinutes()||0<t.getSeconds()||0<t.getMilliseconds())&&(t.setFullYear(t.getFullYear()+1),t.setMonth(0),t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0))),t},a(W,C),a(E,C),E.prototype.createUserOptions=function(t){if("undefined"!==typeof t||this.options._isPlaceholder){var e=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(p(this.parent[this.optionsName]),e=this.parent.options[this.optionsName].indexOf(this.options)),this.options="undefined"===typeof t?{}:t,this.parent.options[this.optionsName][e]=this.options}},E.prototype.render=function(t){if(0!==this.spacing||0!==this.options.lineThickness&&("undefined"!==typeof this.options.lineThickness||0!==this.parent.lineThickness)){var e=this.ctx,i=this.ctx.globalAlpha;this.ctx=t||this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(this.chart.plotArea.x1,this.chart.plotArea.y1,this.chart.plotArea.width,this.chart.plotArea.height),this.ctx.clip();var a,s,n,o,r,h,d=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.startValue),c=this.scaleBreaks.parent.getPixelCoordinatesOnAxis(this.endValue);this.ctx.strokeStyle=this.lineColor,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.globalAlpha=1,l(this.id),t=Math.max(this.spacing,3);var p=Math.max(0,this.lineThickness);if(this.ctx.lineWidth=p,this.ctx.setLineDash&&this.ctx.setLineDash(m(this.lineDashType,p)),"bottom"===this.scaleBreaks.parent._position||"top"===this.scaleBreaks.parent._position){if(d=1===p%2?.5+(d.x<<0):d.x<<0,s=1===p%2?.5+(c.x<<0):c.x<<0,"top"===this.scaleBreaks.parent._position?(c=this.chart.plotArea.y1,n=this.chart.plotArea.y2+p/2+.5<<0):(c=this.chart.plotArea.y2,n=this.chart.plotArea.y1-p/2+.5<<0,t*=-1),this.bounds={x1:d-p/2,y1:c,x2:s+p/2,y2:n},this.ctx.moveTo(d,c),"straight"===this.type||"top"===this.scaleBreaks.parent._position&&0>=t||"bottom"===this.scaleBreaks.parent._position&&0<=t)this.ctx.lineTo(d,n),this.ctx.lineTo(s,n),this.ctx.lineTo(s,c);else if("wavy"===this.type){o=d,a=.5,h=(n-(r=c))/t/3;for(var u=0;u<h;u++)this.ctx.bezierCurveTo(o+a*t,r+t,o+a*t,r+2*t,o,r+3*t),r+=3*t,a*=-1;for(this.ctx.bezierCurveTo(o+a*t,r+t,o+a*t,r+2*t,o,r+3*t),o=s,a*=-1,this.ctx.lineTo(o,r),u=0;u<h;u++)this.ctx.bezierCurveTo(o+a*t,r-t,o+a*t,r-2*t,o,r-3*t),r-=3*t,a*=-1}else if("zigzag"===this.type){for(a=-1,o=d+t,h=(n-(r=c+t))/t/2,u=0;u<h;u++)this.ctx.lineTo(o,r),o+=2*a*t,r+=2*t,a*=-1;for(this.ctx.lineTo(o,r),o+=s-d,u=0;u<h+1;u++)this.ctx.lineTo(o,r),o+=2*a*t,r-=2*t,a*=-1;this.ctx.lineTo(o+a*t,r+t)}}else if("left"===this.scaleBreaks.parent._position||"right"===this.scaleBreaks.parent._position)if(c=1===p%2?.5+(c.y<<0):c.y<<0,n=1===p%2?.5+(d.y<<0):d.y<<0,"left"===this.scaleBreaks.parent._position?(d=this.chart.plotArea.x1,s=this.chart.plotArea.x2+p/2+.5<<0):(d=this.chart.plotArea.x2,s=this.chart.plotArea.x1-p/2+.5<<0,t*=-1),this.bounds={x1:d,y1:c-p/2,x2:s,y2:n+p/2},this.ctx.moveTo(d,c),"straight"===this.type||"left"===this.scaleBreaks.parent._position&&0>=t||"right"===this.scaleBreaks.parent._position&&0<=t)this.ctx.lineTo(s,c),this.ctx.lineTo(s,n),this.ctx.lineTo(d,n);else if("wavy"===this.type){for(r=c,a=.5,h=(s-(o=d))/t/3,u=0;u<h;u++)this.ctx.bezierCurveTo(o+t,r+a*t,o+2*t,r+a*t,o+3*t,r),o+=3*t,a*=-1;for(this.ctx.bezierCurveTo(o+t,r+a*t,o+2*t,r+a*t,o+3*t,r),r=n,a*=-1,this.ctx.lineTo(o,r),u=0;u<h;u++)this.ctx.bezierCurveTo(o-t,r+a*t,o-2*t,r+a*t,o-3*t,r),o-=3*t,a*=-1}else if("zigzag"===this.type){for(a=1,r=c-t,h=(s-(o=d+t))/t/2,u=0;u<h;u++)this.ctx.lineTo(o,r),r+=2*a*t,o+=2*t,a*=-1;for(this.ctx.lineTo(o,r),r+=n-c,u=0;u<h+1;u++)this.ctx.lineTo(o,r),r+=2*a*t,o-=2*t,a*=-1;this.ctx.lineTo(o+t,r+a*t)}0<p&&this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=this.fillOpacity,this.ctx.globalCompositeOperation="destination-over",this.ctx.fill(),this.ctx.restore(),this.ctx.globalAlpha=i,this.ctx=e}},a(X,C),X.prototype.createUserOptions=function(t){if("undefined"!==typeof t||this.options._isPlaceholder){var e=0;this.parent.options._isPlaceholder&&this.parent.createUserOptions(),this.options._isPlaceholder||(p(this.parent.stripLines),e=this.parent.options.stripLines.indexOf(this.options)),this.options="undefined"===typeof t?{}:t,this.parent.options.stripLines[e]=this.options}},X.prototype.render=function(){this.ctx.save();var t=this.parent.getPixelCoordinatesOnAxis(this.value),e=Math.abs("pixel"===this._thicknessType?this.thickness:Math.abs(this.parent.convertValueToPixel(this.endValue)-this.parent.convertValueToPixel(this.startValue)));if(0<e){var i=null===this.opacity?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var a,s,n,o,r=this.ctx.globalAlpha;this.ctx.globalAlpha=i,l(this.id),this.ctx.lineWidth=e,this.ctx.setLineDash&&this.ctx.setLineDash(m(this.lineDashType,e)),"bottom"===this.parent._position||"top"===this.parent._position?(a=s=1===this.ctx.lineWidth%2?.5+(t.x<<0):t.x<<0,n=this.chart.plotArea.y1,o=this.chart.plotArea.y2,this.bounds={x1:a-e/2,y1:n,x2:s+e/2,y2:o}):"left"!==this.parent._position&&"right"!==this.parent._position||(n=o=1===this.ctx.lineWidth%2?.5+(t.y<<0):t.y<<0,a=this.chart.plotArea.x1,s=this.chart.plotArea.x2,this.bounds={x1:a,y1:n-e/2,x2:s,y2:o+e/2}),this.ctx.moveTo(a,n),this.ctx.lineTo(s,o),this.ctx.stroke(),this.ctx.globalAlpha=r}this.ctx.restore()},a(N,C),N.prototype.showAt=function(t){if(!this.enabled)return!1;var e=this.chart,i=!1;if(e.resetOverlayedCanvas(),e.clearedOverlayedCanvas=this.parent.type,this.chart.renderCrosshairs(this.parent),"xySwapped"===e.plotInfo.axisPlacement){if("bottom"===this.parent._position)for(var a=0;a<e.axisY.length;a++)this.parent===e.axisY[a]&&(e.axisY[a]._crosshairValue=t>=e.axisY[a].viewportMinimum&&t<=e.axisY[a].viewportMaximum?t:null);else if("top"===this.parent._position)for(a=0;a<e.axisY2.length;a++)this.parent===e.axisY2[a]&&(e.axisY2[a]._crosshairValue=t>=e.axisY2[a].viewportMinimum&&t<=e.axisY2[a].viewportMaximum?t:null);else if("left"===this.parent._position)for(a=0;a<e.axisX.length;a++)this.parent===e.axisX[a]&&(e.axisX[a]._crosshairValue=t>=e.axisX[a].viewportMinimum&&t<=e.axisX[a].viewportMaximum?t:null);else if("right"===this.parent._position)for(a=0;a<e.axisX2.length;a++)this.parent===e.axisX2[a]&&(e.axisX2[a]._crosshairValue=t>=e.axisX2[a].viewportMinimum&&t<=e.axisX2[a].viewportMaximum?t:null)}else if("bottom"===this.parent._position)for(a=0;a<e.axisX.length;a++)this.parent===e.axisX[a]&&(e.axisX[a]._crosshairValue=t>=e.axisX[a].viewportMinimum&&t<=e.axisX[a].viewportMaximum?t:null);else if("top"===this.parent._position)for(a=0;a<e.axisX2.length;a++)this.parent===e.axisX2[a]&&(e.axisX2[a]._crosshairValue=t>=e.axisX2[a].viewportMinimum&&t<=e.axisX2[a].viewportMaximum?t:null);else if("left"===this.parent._position)for(a=0;a<e.axisY.length;a++)this.parent===e.axisY[a]&&(e.axisY[a]._crosshairValue=t>=e.axisY[a].viewportMinimum&&t<=e.axisY[a].viewportMaximum?t:null);else if("right"===this.parent._position)for(a=0;a<e.axisY2.length;a++)this.parent===e.axisY2[a]&&(e.axisY2[a]._crosshairValue=t>=e.axisY2[a].viewportMinimum&&t<=e.axisY2[a].viewportMaximum?t:null);for(a=0;a<e.axisX.length;a++)t=e.axisX[a]._crosshairValue,e.axisX[a].crosshair&&e.axisX[a].crosshair.enabled&&!c(t)&&t>=e.axisX[a].viewportMinimum&&t<=e.axisX[a].viewportMaximum&&(e.axisX[a].showCrosshair(t),e.axisX[a].crosshair._updatedValue=t,this===e.axisX[a].crosshair&&(i=!0));for(a=0;a<e.axisX2.length;a++)t=e.axisX2[a]._crosshairValue,e.axisX2[a].crosshair&&e.axisX2[a].crosshair.enabled&&!c(t)&&t>=e.axisX2[a].viewportMinimum&&t<=e.axisX2[a].viewportMaximum&&(e.axisX2[a].showCrosshair(t),e.axisX2[a].crosshair._updatedValue=t,this===e.axisX2[a].crosshair&&(i=!0));for(a=0;a<e.axisY.length;a++)t=e.axisY[a]._crosshairValue,e.axisY[a].crosshair&&e.axisY[a].crosshair.enabled&&!c(t)&&t>=e.axisY[a].viewportMinimum&&t<=e.axisY[a].viewportMaximum&&(e.axisY[a].showCrosshair(t),e.axisY[a].crosshair._updatedValue=t,this===e.axisY[a].crosshair&&(i=!0));for(a=0;a<e.axisY2.length;a++)t=e.axisY2[a]._crosshairValue,e.axisY2[a].crosshair&&e.axisY2[a].crosshair.enabled&&!c(t)&&t>=e.axisY2[a].viewportMinimum&&t<=e.axisY2[a].viewportMaximum&&(e.axisY2[a].showCrosshair(t),e.axisY2[a].crosshair._updatedValue=t,this===e.axisY2[a].crosshair&&(i=!0));return this.chart.toolTip&&this.chart.toolTip._entries&&this.chart.toolTip.highlightObjects(this.chart.toolTip._entries),i},N.prototype.hide=function(){this.chart.resetOverlayedCanvas(),this.chart.renderCrosshairs(this.parent),this._hidden=!0},N.prototype.render=function(t,e,i){var a,s,n,o,r=null,h=null,l=null,d="";if(!this.valueFormatString)if("dateTime"===this.parent.valueType)this.valueFormatString=this.parent.valueFormatString;else{var p=0;p="xySwapped"===this.chart.plotInfo.axisPlacement?50<this.parent.range?0:500<this.chart.width&&25>this.parent.range?2:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0):50<this.parent.range?0:Math.floor(Math.abs(Math.log(this.parent.range)/Math.LN10))+(5>this.parent.range?2:10>this.parent.range?1:0);this.valueFormatString=D.generateValueFormatString(this.parent.range,p)}l=null===this.opacity?1:this.opacity,p=Math.abs("pixel"===this._thicknessType?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness);var u=this.chart.overlaidCanvasCtx,x=u.globalAlpha;if(u.globalAlpha=l,u.beginPath(),u.strokeStyle=this.color,u.lineWidth=p,u.save(),this.labelFontSize=Math.abs(c(this.options.labelFontSize)?this.parent.labelFontSize:this.labelFontSize),this.labelMaxWidth=c(this.options.labelMaxWidth)?.3*this.chart.width:this.labelMaxWidth,this.labelMaxHeight=c(this.options.labelWrap)||this.labelWrap?.3*this.chart.height:2*this.labelFontSize,0<p&&u.setLineDash&&u.setLineDash(m(this.lineDashType,p)),l=new A(u,{x:0,y:0,padding:{top:2,right:3,bottom:2,left:4},backgroundColor:this.labelBackgroundColor,borderColor:this.labelBorderColor,borderThickness:this.labelBorderThickness,cornerRadius:this.labelCornerRadius,maxWidth:this.labelMaxWidth,maxHeight:this.labelMaxHeight,angle:this.labelAngle,text:d,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this.snapToDataPoint){var g=0;d=[];if("xySwapped"===this.chart.plotInfo.axisPlacement){var f=null;"bottom"===this.parent._position||"top"===this.parent._position?g=this.parent.dataSeries[0].axisX.convertPixelToValue({y:e}):"left"!==this.parent._position&&"right"!==this.parent._position||(g=this.parent.convertPixelToValue({y:e}));for(var y=0;y<this.parent.dataSeries.length;y++)(f=this.parent.dataSeries[y].getDataPointAtX(g,!0))&&0<=f.index&&(f.dataSeries=this.parent.dataSeries[y],null!==f.dataPoint.y&&f.dataSeries.visible&&d.push(f));if(f=null,0===d.length)return;if(d.sort((function(t,e){return t.distance-e.distance})),f=Math.abs(t-this.parent.convertValueToPixel(d[0].dataPoint.y)),y=0,"rangeBar"===d[0].dataSeries.type||"error"===d[0].dataSeries.type){f=Math.abs(t-this.parent.convertValueToPixel(d[y].dataPoint.y[0]));var b=0;for(g=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(var v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(t-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else(b=Math.abs(t-this.parent.convertValueToPixel(d[g].dataPoint.y)))<f&&(f=b,y=g)}else if("stackedBar"===d[0].dataSeries.type){f=Math.abs(t-this.parent.convertValueToPixel(d[0].dataPoint.y));var _=b=0;for(g=y=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(t-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else _+=d[g].dataPoint.y,(b=Math.abs(t-this.parent.convertValueToPixel(_)))<f&&(f=b,y=g)}else if("stackedBar100"===d[0].dataSeries.type){f=Math.abs(t-this.parent.convertValueToPixel(d[0].dataPoint.y));var k=_=b=0;for(g=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(t-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else _+=d[g].dataPoint.y,k=d[g].dataPoint.x.getTime?d[g].dataPoint.x.getTime():d[g].dataPoint.x,k=_/d[g].dataSeries.plotUnit.dataPointYSums[k]*100,(b=Math.abs(t-this.parent.convertValueToPixel(k)))<f&&(f=b,y=g)}else for(f=Math.abs(t-this.parent.convertValueToPixel(d[0].dataPoint.y)),g=y=b=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(t-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else(b=Math.abs(t-this.parent.convertValueToPixel(d[g].dataPoint.y)))<f&&(f=b,y=g);if(v=d[y],"bottom"===this.parent._position||"top"===this.parent._position){if(a=0,"rangeBar"===this.parent.dataSeries[y].type||"error"===this.parent.dataSeries[y].type){for(f=Math.abs(t-this.parent.convertValueToPixel(v.dataPoint.y[0])),g=b=0;g<v.dataPoint.y.length;g++)(b=Math.abs(t-this.parent.convertValueToPixel(v.dataPoint.y[g])))<f&&(f=b,a=g);r=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(v.dataPoint.y[a])<<0):this.parent.convertValueToPixel(v.dataPoint.y[a])<<0,this.value=v.dataPoint.y[a],l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.y[a]}):c(this.options.label)?rt(c(i)?v.dataPoint.y[a]:i,this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar"===this.parent.dataSeries[y].type){for(f=Math.abs(t-this.parent.convertValueToPixel(d[0].dataPoint.y)),_=b=0,g=y;0<=g;g--)_+=d[g].dataPoint.y,(b=Math.abs(t-this.parent.convertValueToPixel(_)))<f&&(f=b,a=g);r=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(_)<<0):this.parent.convertValueToPixel(_)<<0,this.value=_,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.y}):c(this.options.label)?rt(c(i)?v.dataPoint.y:i,this.valueFormatString,this.chart._cultureInfo):this.label}else if("stackedBar100"===this.parent.dataSeries[y].type){for(f=Math.abs(t-this.parent.convertValueToPixel(d[0].dataPoint.y)),k=_=b=0,g=y;0<=g;g--)_+=d[g].dataPoint.y,k=d[g].dataPoint.x.getTime?d[g].dataPoint.x.getTime():d[g].dataPoint.x,k=_/d[g].dataSeries.plotUnit.dataPointYSums[k]*100,(b=Math.abs(t-this.parent.convertValueToPixel(k)))<f&&(f=b,a=g);r=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(k)<<0):this.parent.convertValueToPixel(k)<<0,this.value=k,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:k}):c(this.options.label)?rt(c(i)?k:i,this.valueFormatString,this.chart._cultureInfo):this.label}else r=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(v.dataPoint.y)<<0):this.parent.convertValueToPixel(v.dataPoint.y)<<0,this.value=v.dataPoint.y,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.y}):c(this.options.label)?rt(c(i)?v.dataPoint.y:i,this.valueFormatString,this.chart._cultureInfo):this.label;a=s=r,n=this.chart.plotArea.y1,o=this.chart.plotArea.y2,this.bounds={x1:a-p/2,y1:n,x2:s+p/2,y2:o},l.x=a-l.measureText().width/2,l.x+l.width>this.chart.bounds.x2?l.x=this.chart.bounds.x2-l.width:l.x<this.chart.bounds.x1&&(l.x=this.chart.bounds.x1),l.y=this.parent.lineCoordinates.y2+("top"===this.parent._position?-l.height+this.parent.tickLength:l.fontSize/2)+2,l.y+l.height>this.chart.bounds.y2?l.y=this.chart.bounds.y2-l.height:l.y<this.chart.bounds.y1&&(l.y=this.chart.bounds.y1)}else if("left"===this.parent._position||"right"===this.parent._position){if(n=o=h=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(v.dataPoint.x)<<0):this.parent.convertValueToPixel(v.dataPoint.x)<<0,a=this.chart.plotArea.x1,s=this.chart.plotArea.x2,this.bounds={x1:a,y1:n-p/2,x2:s,y2:o+p/2},k=!1,this.parent.labels)for(d=Math.ceil(this.parent.interval),g=0;g<this.parent.viewportMaximum;g+=d){if(!this.parent.labels[g]){k=!1;break}k=!0}if(k){if("axisX"===this.parent.type)for(g=this.parent.convertPixelToValue({y:e}),f=null,y=0;y<this.parent.dataSeries.length;y++)(f=this.parent.dataSeries[y].getDataPointAtX(g,!0))&&0<=f.index&&(l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.x}):c(this.options.label)?f.dataPoint.label:this.label)}else l.text="dateTime"!==this.parent.valueType||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.x}):c(this.options.label)?rt(v.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.x}):c(this.options.label)?ot(v.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=v.dataPoint.x,l.y=o+l.fontSize/2-l.measureText().height/2+2,l.y-l.fontSize/2<this.chart.bounds.y1?l.y=this.chart.bounds.y1+l.fontSize/2+2:l.y+l.measureText().height-l.fontSize/2>this.chart.bounds.y2&&(l.y=this.chart.bounds.y2-l.measureText().height+l.fontSize/2),"left"===this.parent._position?l.x=this.parent.lineCoordinates.x2-l.measureText().width:"right"===this.parent._position&&(l.x=this.parent.lineCoordinates.x2)}}else if("bottom"===this.parent._position||"top"===this.parent._position){for(g=this.parent.convertPixelToValue({x:t}),y=0;y<this.parent.dataSeries.length;y++)(f=this.parent.dataSeries[y].getDataPointAtX(g,!0))&&0<=f.index&&(f.dataSeries=this.parent.dataSeries[y],null!==f.dataPoint.y&&f.dataSeries.visible&&d.push(f));if(0===d.length)return;if(d.sort((function(t,e){return t.distance-e.distance})),v=d[0],a=s=r=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(v.dataPoint.x)<<0):this.parent.convertValueToPixel(v.dataPoint.x)<<0,n=this.chart.plotArea.y1,o=this.chart.plotArea.y2,this.bounds={x1:a-p/2,y1:n,x2:s+p/2,y2:o},k=!1,this.parent.labels)for(d=Math.ceil(this.parent.interval),g=0;g<this.parent.viewportMaximum;g+=d){if(!this.parent.labels[g]){k=!1;break}k=!0}if(k){if("axisX"===this.parent.type)for(g=this.parent.convertPixelToValue({x:t}),f=null,y=0;y<this.parent.dataSeries.length;y++)(f=this.parent.dataSeries[y].getDataPointAtX(g,!0))&&0<=f.index&&(l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.x}):c(this.options.label)?f.dataPoint.label:this.label)}else l.text="dateTime"!==this.parent.valueType||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.x}):c(this.options.label)?rt(v.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.x}):c(this.options.label)?ot(v.dataPoint.x,this.valueFormatString,this.chart._cultureInfo):this.label;this.value=v.dataPoint.x,l.x=a-l.measureText().width/2,l.x+l.width>this.chart.bounds.x2&&(l.x=this.chart.bounds.x2-l.width),l.x<this.chart.bounds.x1&&(l.x=this.chart.bounds.x1),"bottom"===this.parent._position?l.y=this.parent.lineCoordinates.y2+l.fontSize/2+2:"top"===this.parent._position&&(l.y=this.parent.lineCoordinates.y1-l.height+l.fontSize/2+2)}else if("left"===this.parent._position||"right"===this.parent._position){for(!c(this.parent.dataSeries)&&0<this.parent.dataSeries.length&&(g=this.parent.dataSeries[0].axisX.convertPixelToValue({x:t})),y=0;y<this.parent.dataSeries.length;y++)(f=this.parent.dataSeries[y].getDataPointAtX(g,!0))&&0<=f.index&&(f.dataSeries=this.parent.dataSeries[y],null!==f.dataPoint.y&&f.dataSeries.visible&&d.push(f));if(0===d.length)return;if(d.sort((function(t,e){return t.distance-e.distance})),y=0,"rangeColumn"===d[0].dataSeries.type||"rangeArea"===d[0].dataSeries.type||"error"===d[0].dataSeries.type||"rangeSplineArea"===d[0].dataSeries.type||"candlestick"===d[0].dataSeries.type||"ohlc"===d[0].dataSeries.type||"boxAndWhisker"===d[0].dataSeries.type)for(f=Math.abs(e-this.parent.convertValueToPixel(d[0].dataPoint.y[0])),g=b=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(e-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else(b=Math.abs(e-this.parent.convertValueToPixel(d[g].dataPoint.y)))<f&&(f=b,y=g);else if("stackedColumn"===d[0].dataSeries.type||"stackedArea"===d[0].dataSeries.type)for(f=Math.abs(e-this.parent.convertValueToPixel(d[0].dataPoint.y)),g=_=b=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(e-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else _+=d[g].dataPoint.y,(b=Math.abs(e-this.parent.convertValueToPixel(_)))<f&&(f=b,y=g);else if("stackedColumn100"===d[0].dataSeries.type||"stackedArea100"===d[0].dataSeries.type)for(f=Math.abs(e-this.parent.convertValueToPixel(d[0].dataPoint.y)),g=k=_=b=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(e-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else _+=d[g].dataPoint.y,k=d[g].dataPoint.x.getTime?d[g].dataPoint.x.getTime():d[g].dataPoint.x,k=_/d[g].dataSeries.plotUnit.dataPointYSums[k]*100,(b=Math.abs(e-this.parent.convertValueToPixel(k)))<f&&(f=b,y=g);else for(f=Math.abs(e-this.parent.convertValueToPixel(d[0].dataPoint.y)),g=b=0;g<d.length;g++)if(d[g].dataPoint.y&&d[g].dataPoint.y.length)for(v=0;v<d[g].dataPoint.y.length;v++)(b=Math.abs(e-this.parent.convertValueToPixel(d[g].dataPoint.y[v])))<f&&(f=b,y=g);else(b=Math.abs(e-this.parent.convertValueToPixel(d[g].dataPoint.y)))<f&&(f=b,y=g);if(v=d[y],a=0,"rangeColumn"===this.parent.dataSeries[y].type||"rangeArea"===this.parent.dataSeries[y].type||"error"===this.parent.dataSeries[y].type||"rangeSplineArea"===this.parent.dataSeries[y].type||"candlestick"===this.parent.dataSeries[y].type||"ohlc"===this.parent.dataSeries[y].type||"boxAndWhisker"===this.parent.dataSeries[y].type){for(f=Math.abs(e-this.parent.convertValueToPixel(v.dataPoint.y[0])),g=b=0;g<v.dataPoint.y.length;g++)(b=Math.abs(e-this.parent.convertValueToPixel(v.dataPoint.y[g])))<f&&(f=b,a=g);h=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(v.dataPoint.y[a])<<0):this.parent.convertValueToPixel(v.dataPoint.y[a])<<0,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.y[a]}):c(this.options.label)?rt(c(i)?v.dataPoint.y[a]:i,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=v.dataPoint.y[a]}else if("stackedColumn"===this.parent.dataSeries[y].type||"stackedArea"===this.parent.dataSeries[y].type){for(f=Math.abs(e-this.parent.convertValueToPixel(d[0].dataPoint.y)),_=b=0,g=y;0<=g;g--)_+=d[g].dataPoint.y,(b=Math.abs(e-this.parent.convertValueToPixel(_)))<f&&(f=b,a=g);h=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(_)<<0):this.parent.convertValueToPixel(_)<<0,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataPoint.y}):c(this.options.label)?rt(c(i)?v.dataPoint.y:i,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=_}else if("stackedColumn100"===this.parent.dataSeries[y].type||"stackedArea100"===this.parent.dataSeries[y].type){for(f=Math.abs(e-this.parent.convertValueToPixel(d[0].dataPoint.y)),_=b=0,g=y;0<=g;g--)_+=d[g].dataPoint.y,k=d[g].dataPoint.x.getTime?d[g].dataPoint.x.getTime():d[g].dataPoint.x,k=_/d[g].dataSeries.plotUnit.dataPointYSums[k]*100,(b=Math.abs(e-this.parent.convertValueToPixel(k)))<f&&(f=b,a=g);h=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(k)<<0):this.parent.convertValueToPixel(k)<<0,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:k}):c(this.options.label)?rt(c(i)?k:i,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=k}else"waterfall"===this.parent.dataSeries[y].type?(h=1===u.lineWidth%2?.5+(this.parent.convertValueToPixel(v.dataSeries.dataPointEOs[v.index].cumulativeSum)<<0):this.parent.convertValueToPixel(v.dataSeries.dataPointEOs[v.index].cumulativeSum)<<0,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:v.dataSeries.dataPointEOs[v.index].cumulativeSum}):c(this.options.label)?rt(c(i)?v.dataSeries.dataPointEOs[v.index].cumulativeSum:i,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=v.dataSeries.dataPointEOs[v.index].cumulativeSum):(h=1===u.lineWidth%2?(c(t)?e:this.parent.convertValueToPixel(v.dataPoint.y)<<0)+.5:c(t)?e:this.parent.convertValueToPixel(v.dataPoint.y)<<0,l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?v.dataPoint.y:i}):c(this.options.label)?rt(c(i)?v.dataPoint.y:i,this.valueFormatString,this.chart._cultureInfo):this.label,this.value=v.dataPoint.y);n=o=h,a=this.chart.plotArea.x1,s=this.chart.plotArea.x2,this.bounds={x1:a,y1:n-p/2,x2:s,y2:o+p/2},l.y=o+l.fontSize/2-l.measureText().height/2+2,l.y-l.fontSize/2<this.chart.bounds.y1?l.y=this.chart.bounds.y1+l.fontSize/2+2:l.y+l.measureText().height-l.fontSize/2>this.chart.bounds.y2&&(l.y=this.chart.bounds.y2-l.measureText().height+l.fontSize/2),"left"===this.parent._position?l.x=this.parent.lineCoordinates.x2-l.measureText().width:"right"===this.parent._position&&(l.x=this.parent.lineCoordinates.x2)}d=null,"bottom"!==this.parent._position&&"top"!==this.parent._position||("top"===this.parent._position&&l.y-l.fontSize/2<this.chart.bounds.y1&&(l.y=this.chart.bounds.y1+l.fontSize/2),"bottom"===this.parent._position&&this.parent.lineCoordinates.y2-l.fontSize/2+l.measureText().height>this.chart.bounds.y2&&(l.y=this.chart.bounds.y2-l.height+l.fontSize/2+2),a>=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMaximum:this.parent.viewportMinimum)&&s<=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMinimum:this.parent.viewportMaximum)&&(0<p&&(u.moveTo(a,n),u.lineTo(s,o),u.stroke(),this._hidden=!1),u.restore())),"left"!==this.parent._position&&"right"!==this.parent._position||("left"===this.parent._position&&l.x<this.chart.bounds.x1&&(l.x=this.chart.bounds.x1),"right"===this.parent._position&&l.x+l.measureText().width>this.chart.bounds.x2&&(l.x=this.chart.bounds.x2-l.measureText().width),o>=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMinimum:this.parent.viewportMaximum)&&n<=this.parent.convertValueToPixel(this.parent.reversed?this.parent.viewportMaximum:this.parent.viewportMinimum)&&(0<p&&(u.moveTo(a,n),u.lineTo(s,o),u.stroke(),this._hidden=!1),u.restore()))}else{if("bottom"===this.parent._position||"top"===this.parent._position?(a=s=r=1===u.lineWidth%2?.5+(t<<0):t<<0,n=this.chart.plotArea.y1,o=this.chart.plotArea.y2,this.bounds={x1:a-p/2,y1:n,x2:s+p/2,y2:o}):"left"!==this.parent._position&&"right"!==this.parent._position||(n=o=h=1===u.lineWidth%2?.5+(e<<0):e<<0,a=this.chart.plotArea.x1,s=this.chart.plotArea.x2,this.bounds={x1:a,y1:n-p/2,x2:s,y2:o+p/2}),"xySwapped"===this.chart.plotInfo.axisPlacement)if("left"===this.parent._position||"right"===this.parent._position){if(k=!1,this.parent.labels)for(d=Math.ceil(this.parent.interval),g=0;g<this.parent.viewportMaximum;g+=d){if(!this.parent.labels[g]){k=!1;break}k=!0}if(k){if("axisX"===this.parent.type)for(g=this.parent.convertPixelToValue({y:e}),f=null,y=0;y<this.parent.dataSeries.length;y++)(f=this.parent.dataSeries[y].getDataPointAtX(g,!0))&&0<=f.index&&(l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?this.parent.convertPixelToValue(t):i}):c(this.options.label)?f.dataPoint.label:this.label)}else l.text="dateTime"!==this.parent.valueType||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?this.parent.convertPixelToValue(e):i}):c(this.options.label)?rt(c(i)?this.parent.convertPixelToValue(e):i,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?this.parent.convertPixelToValue(e):i}):c(this.options.label)?ot(c(i)?this.parent.convertPixelToValue(e):i,this.valueFormatString,this.chart._cultureInfo):this.label;l.y=e+l.fontSize/2-l.measureText().height/2+2,l.y-l.fontSize/2<this.chart.bounds.y1?l.y=this.chart.bounds.y1+l.fontSize/2+2:l.y+l.measureText().height-l.fontSize/2>this.chart.bounds.y2&&(l.y=this.chart.bounds.y2-l.measureText().height+l.fontSize/2),"left"===this.parent._position?l.x=this.parent.lineCoordinates.x1-l.measureText().width:"right"===this.parent._position&&(l.x=this.parent.lineCoordinates.x2)}else"bottom"!==this.parent._position&&"top"!==this.parent._position||(l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?this.parent.convertPixelToValue(t):i}):c(this.options.label)?rt(c(i)?this.parent.convertPixelToValue(t):i,this.valueFormatString,this.chart._cultureInfo):this.label,l.x=a-l.measureText().width/2,l.x+l.width>this.chart.bounds.x2&&(l.x=this.chart.bounds.x2-l.width),l.x<this.chart.bounds.x1&&(l.x=this.chart.bounds.x1),"bottom"===this.parent._position?l.y=this.parent.lineCoordinates.y2+l.fontSize/2+2:"top"===this.parent._position&&(l.y=this.parent.lineCoordinates.y1-l.height+l.fontSize/2+2));else if("bottom"===this.parent._position||"top"===this.parent._position){if(k=!1,d="",this.parent.labels)for(d=Math.ceil(this.parent.interval),g=0;g<this.parent.viewportMaximum;g+=d){if(!this.parent.labels[g]){k=!1;break}k=!0}if(k){if("axisX"===this.parent.type)for(g=this.parent.convertPixelToValue({x:t}),f=null,y=0;y<this.parent.dataSeries.length;y++)(f=this.parent.dataSeries[y].getDataPointAtX(g,!0))&&0<=f.index&&(l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?this.parent.convertPixelToValue(t):i}):c(this.options.label)?c(i)?f.dataPoint.label:i:this.label)}else l.text="dateTime"!==this.parent.valueType||this.parent.logarithmic?this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?0<this.parent.dataSeries.length?this.parent.convertPixelToValue(t):"":i}):c(this.options.label)?rt(c(i)?this.parent.convertPixelToValue(t):i,this.valueFormatString,this.chart._cultureInfo):this.label:this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?this.parent.convertPixelToValue(t):i}):c(this.options.label)?ot(c(i)?this.parent.convertPixelToValue(t):i,this.valueFormatString,this.chart._cultureInfo):this.label;l.x=a-l.measureText().width/2,l.x+l.width>this.chart.bounds.x2&&(l.x=this.chart.bounds.x2-l.width),l.x<this.chart.bounds.x1&&(l.x=this.chart.bounds.x1),"bottom"===this.parent._position?l.y=this.parent.lineCoordinates.y2+l.fontSize/2+2:"top"===this.parent._position&&(l.y=this.parent.lineCoordinates.y1-l.height+l.fontSize/2+2)}else"left"!==this.parent._position&&"right"!==this.parent._position||(l.text=this.labelFormatter?this.labelFormatter({chart:this.chart,axis:this.parent.options,crosshair:this.options,value:c(i)?this.parent.convertPixelToValue(e):i}):c(this.options.label)?rt(c(i)?this.parent.convertPixelToValue(e):i,this.valueFormatString,this.chart._cultureInfo):this.label,l.y=e+l.fontSize/2-l.measureText().height/2+2,l.y-l.fontSize/2<this.chart.bounds.y1?l.y=this.chart.bounds.y1+l.fontSize/2+2:l.y+l.measureText().height-l.fontSize/2>this.chart.bounds.y2&&(l.y=this.chart.bounds.y2-l.measureText().height+l.fontSize/2),"left"===this.parent._position?l.x=this.parent.lineCoordinates.x2-l.measureText().width:"right"===this.parent._position&&(l.x=this.parent.lineCoordinates.x2));"left"===this.parent._position&&l.x<this.chart.bounds.x1?l.x=this.chart.bounds.x1:"right"===this.parent._position&&l.x+l.measureText().width>this.chart.bounds.x2?l.x=this.chart.bounds.x2-l.measureText().width:"top"===this.parent._position&&l.y-l.fontSize/2<this.chart.bounds.y1?l.y=this.chart.bounds.y1+l.fontSize/2:"bottom"===this.parent._position&&this.parent.lineCoordinates.y2-l.fontSize/2+l.measureText().height>this.chart.bounds.y2&&(l.y=this.chart.bounds.y2-l.height+l.fontSize/2+2),0<p&&(u.moveTo(a,n),u.lineTo(s,o),u.stroke(),this._hidden=!1),u.restore(),this.value="bottom"===this.parent._position||"top"===this.parent._position?this.parent.convertPixelToValue(t):this.parent.convertPixelToValue(e)}"bottom"!==this.parent._position&&"top"!==this.parent._position||(this._updatedValue=this.parent.convertPixelToValue(r)),"left"!==this.parent._position&&"right"!==this.parent._position||(this._updatedValue=this.parent.convertPixelToValue(h)),this._textBlock=l,this._label=i,c(i)||this.renderLabel(),u.globalAlpha=x},N.prototype.renderLabel=function(){c(this._textBlock)||c(this._textBlock.text)||!("number"===typeof this._textBlock.text.valueOf()||0<this._textBlock.text.length)||this._hidden||this._textBlock.render(!0),c(this._label)&&this.dispatchEvent("updated",{chart:this.chart,crosshair:this.options,axis:this.parent,value:this.value},this.parent)},a(H,C),H.prototype._initialize=function(){if(this.updateOption("updated"),this.updateOption("hidden"),this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.pointerEvents="none",this.container.style.display="none";var t=document.createElement("div");t.style.width="auto",t.style.height="auto",t.style.minWidth="50px",t.style.lineHeight="normal",t.style.margin="0px 0px 0px 0px",t.style.padding="5px",t.style.fontFamily="Calibri, Arial, Georgia, serif",t.style.fontWeight="normal",t.style.fontStyle=R?"italic":"normal",t.style.fontSize="14px",t.style.color="#000000",t.style.textShadow="1px 1px 1px rgba(0, 0, 0, 0.1)",t.style.textAlign="left",t.style.border="2px solid gray",t.style.background=R?"rgba(255,255,255,.9)":"rgb(255,255,255)",t.style.textIndent="0px",t.style.whiteSpace="nowrap",t.style.borderRadius="5px",t.style.MozUserSelect="none",t.style.WebkitUserSelect="none",t.style.msUserSelect="none",t.style.userSelect="none",R||(t.style.filter="alpha(opacity = 90)",t.style.filter="progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666')"),t.innerText="Sample Tooltip",this.container.appendChild(t),this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},H.prototype.mouseMoveHandler=function(t,e){this._lastUpdated&&4>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this.chart.resetOverlayedCanvas(),this._updateToolTip(t,e),!this._updatedEventParameters||isNaN(this._prevX)||isNaN(this._prevY)||this.dispatchEvent("updated",this._updatedEventParameters,this))},H.prototype._updateToolTip=function(t,e,i){if(i="undefined"===typeof i||i,this.container||this._initialize(),this.enabled||this.hide(),!this.chart.disableToolTip){if("undefined"===typeof t||"undefined"===typeof e){if(isNaN(this._prevX)||isNaN(this._prevY))return;t=this._prevX,e=this._prevY}else this._prevX=t,this._prevY=e;var a=null,s=null,n=[],o=0;if(this.shared&&this.enabled&&"none"!==this.chart.plotInfo.axisPlacement){var r=[];if(this.chart.axisX)for(var h=0;h<this.chart.axisX.length;h++){o="xySwapped"===this.chart.plotInfo.axisPlacement?this.chart.axisX[h].convertPixelToValue({y:e}):this.chart.axisX[h].convertPixelToValue({x:t});var l=null;for(a=0;a<this.chart.axisX[h].dataSeries.length;a++)(l=this.chart.axisX[h].dataSeries[a].getDataPointAtX(o,i))&&0<=l.index&&(l.dataSeries=this.chart.axisX[h].dataSeries[a],null!==l.dataPoint.y&&l.dataSeries.visible&&r.push(l));l=null}if(this.chart.axisX2)for(h=0;h<this.chart.axisX2.length;h++){for(o="xySwapped"===this.chart.plotInfo.axisPlacement?this.chart.axisX2[h].convertPixelToValue({y:e}):this.chart.axisX2[h].convertPixelToValue({x:t}),l=null,a=0;a<this.chart.axisX2[h].dataSeries.length;a++)(l=this.chart.axisX2[h].dataSeries[a].getDataPointAtX(o,i))&&0<=l.index&&(l.dataSeries=this.chart.axisX2[h].dataSeries[a],null!==l.dataPoint.y&&l.dataSeries.visible&&r.push(l));l=null}if(0===r.length)return;for(r.sort((function(t,e){return t.distance-e.distance})),i=r[0],a=0;a<r.length;a++)r[a].dataPoint.x.valueOf()===i.dataPoint.x.valueOf()&&n.push(r[a]);r=null}else{if(a=this.chart.getDataPointAtXY(t,e,i))this.currentDataPointIndex=a.dataPointIndex,this.currentSeriesIndex=a.dataSeries.index;else if(R)if(0<(a=f(t,e,this.chart._eventManager.ghostCtx))&&"undefined"!==typeof this.chart._eventManager.objectMap[a]){if("legendItem"===(a=this.chart._eventManager.objectMap[a]).objectType)return;this.currentSeriesIndex=a.dataSeriesIndex,this.currentDataPointIndex=0<=a.dataPointIndex?a.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(s=this.chart.data[this.currentSeriesIndex],l={},0<=this.currentDataPointIndex)a=s.dataPoints[this.currentDataPointIndex],l.dataSeries=s,l.dataPoint=a,l.index=this.currentDataPointIndex,l.distance=Math.abs(a.x-o),"waterfall"===s.type&&(l.cumulativeSumYStartValue=s.dataPointEOs[this.currentDataPointIndex].cumulativeSumYStartValue,l.cumulativeSum=s.dataPointEOs[this.currentDataPointIndex].cumulativeSum);else{if(!this.enabled||"line"!==s.type&&"stepLine"!==s.type&&"spline"!==s.type&&"area"!==s.type&&"stepArea"!==s.type&&"splineArea"!==s.type&&"stackedArea"!==s.type&&"stackedArea100"!==s.type&&"rangeArea"!==s.type&&"rangeSplineArea"!==s.type&&"candlestick"!==s.type&&"ohlc"!==s.type&&"boxAndWhisker"!==s.type)return;o=s.axisX.convertPixelToValue({x:t}),c(l=s.getDataPointAtX(o,i))||(l.dataSeries=s,this.currentDataPointIndex=l.index,a=l.dataPoint)}if(!c(l)&&!c(l.dataPoint)&&!c(l.dataPoint.y))if(l.dataSeries.axisY)if(0<l.dataPoint.y.length){for(a=i=0;a<l.dataPoint.y.length;a++)l.dataPoint.y[a]<l.dataSeries.axisY.viewportMinimum?i--:l.dataPoint.y[a]>l.dataSeries.axisY.viewportMaximum&&i++;i<l.dataPoint.y.length&&i>-l.dataPoint.y.length&&n.push(l)}else"column"===s.type||"bar"===s.type?0>l.dataPoint.y?0>l.dataSeries.axisY.viewportMinimum&&l.dataSeries.axisY.viewportMaximum>=l.dataPoint.y&&n.push(l):l.dataSeries.axisY.viewportMinimum<=l.dataPoint.y&&0<=l.dataSeries.axisY.viewportMaximum&&n.push(l):"bubble"===s.type?(i=this.chart._eventManager.objectMap[s.dataPointIds[l.index]].size/2,l.dataPoint.y>=l.dataSeries.axisY.viewportMinimum-i&&l.dataPoint.y<=l.dataSeries.axisY.viewportMaximum+i&&n.push(l)):"waterfall"===s.type?(i=0,l.cumulativeSumYStartValue<l.dataSeries.axisY.viewportMinimum?i--:l.cumulativeSumYStartValue>l.dataSeries.axisY.viewportMaximum&&i++,l.cumulativeSum<l.dataSeries.axisY.viewportMinimum?i--:l.cumulativeSum>l.dataSeries.axisY.viewportMaximum&&i++,2>i&&-2<i&&n.push(l)):(0<=l.dataSeries.type.indexOf("100")||"stackedColumn"===s.type||"stackedBar"===s.type||l.dataPoint.y>=l.dataSeries.axisY.viewportMinimum&&l.dataPoint.y<=l.dataSeries.axisY.viewportMaximum)&&n.push(l);else n.push(l)}}if(0<n.length){if(this.highlightObjects(n),this.enabled){if(i="",null!==(i=this.getToolTipInnerHTML({entries:n}))){if(this.contentDiv.innerHTML=i,this.isToolTipDefinedInData&&c(this.options.content)&&c(this.options.contentFormatter))for(o=this.contentDiv.getElementsByTagName("span"),a=0;a<o.length;a++)o[a]&&(o[a].style.color=o[a].getAttribute("data-color"));o=!1,"none"===this.container.style.display&&(o=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:R?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor="waterfall"===n[0].dataSeries.type?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:n[0].dataPoint.color?n[0].dataPoint.color:0<n[0].dataPoint.y?n[0].dataSeries.risingColor:n[0].dataSeries.fallingColor:"error"===n[0].dataSeries.type?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:n[0].dataSeries.color?n[0].dataSeries.color:n[0].dataSeries._colorSet[s.index%n[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:n[0].dataPoint.color?n[0].dataPoint.color:n[0].dataSeries.color?n[0].dataSeries.color:n[0].dataSeries._colorSet[n[0].index%n[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||0===this.borderThickness?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||0===this.cornerRadius?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||0===this.fontSize?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:R?"italic":"normal"}catch(d){}"pie"===n[0].dataSeries.type||"doughnut"===n[0].dataSeries.type||"funnel"===n[0].dataSeries.type||"pyramid"===n[0].dataSeries.type||"bar"===n[0].dataSeries.type||"rangeBar"===n[0].dataSeries.type||"stackedBar"===n[0].dataSeries.type||"stackedBar100"===n[0].dataSeries.type?t=t-10-this.container.clientWidth:(t=n[0].dataSeries.axisX.convertValueToPixel(n[0].dataPoint.x)-this.container.clientWidth<<0,t-=10),0>t&&(t+=this.container.clientWidth+20),t+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(t=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),0<(e=10-(e=1!==n.length||this.shared||"line"!==n[0].dataSeries.type&&"stepLine"!==n[0].dataSeries.type&&"spline"!==n[0].dataSeries.type&&"area"!==n[0].dataSeries.type&&"stepArea"!==n[0].dataSeries.type&&"splineArea"!==n[0].dataSeries.type?"bar"===n[0].dataSeries.type||"rangeBar"===n[0].dataSeries.type||"stackedBar"===n[0].dataSeries.type||"stackedBar100"===n[0].dataSeries.type?n[0].dataSeries.axisX.convertValueToPixel(n[0].dataPoint.x):e:n[0].dataSeries.axisY.convertValueToPixel(n[0].dataPoint.y)))+this.container.clientHeight+5&&(e-=e+this.container.clientHeight+5-0),this.fixMozTransitionDelay(t,e),!this.animationEnabled||o?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.positionLeft=t,this.positionBottom=e,this.container.style.left=t+"px",this.container.style.bottom=e+"px"}else this.hide(!1),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this);for(e=[],a=0;a<n.length;a++)e.push({xValue:n[a].dataPoint.x,dataPoint:n[a].dataPoint,dataSeries:n[a].dataSeries,dataPointIndex:n[a].index,dataSeriesIndex:n[a].dataSeries._index});this._updatedEventParameters={chart:this.chart,toolTip:this.options,content:i,entries:e},this._entries=n}}else this.hide(),this.enabled&&this.dispatchEvent("hidden",{chart:this.chart,toolTip:this},this)}},H.prototype.highlightObjects=function(t){var e=this.chart.overlaidCanvasCtx;(c(this.chart.clearedOverlayedCanvas)||"toolTip"===this.chart.clearedOverlayedCanvas)&&(this.chart.resetOverlayedCanvas(),e.clearRect(0,0,this.chart.width,this.chart.height),this.chart.clearedOverlayedCanvas="toolTip"),e.save();var i=this.chart.plotArea,a=0;for(e.beginPath(),e.rect(i.x1,i.y1,i.x2-i.x1,i.y2-i.y1),e.clip(),i=0;i<t.length;i++){var s=t[i];if((s=this.chart._eventManager.objectMap[s.dataSeries.dataPointIds[s.index]])&&s.objectType&&"dataPoint"===s.objectType){var o=(a=this.chart.data[s.dataSeriesIndex]).dataPoints[s.dataPointIndex],r=s.dataPointIndex;!1===o.highlightEnabled||!0!==a.highlightEnabled&&!0!==o.highlightEnabled||("line"===a.type||"stepLine"===a.type||"spline"===a.type||"scatter"===a.type||"area"===a.type||"stepArea"===a.type||"splineArea"===a.type||"stackedArea"===a.type||"stackedArea100"===a.type||"rangeArea"===a.type||"rangeSplineArea"===a.type?((o=a.getMarkerProperties(r,s.x1,s.y1,this.chart.overlaidCanvasCtx)).size=Math.max(1.5*o.size<<0,10),o.borderColor=o.borderColor||"#FFFFFF",o.borderThickness=o.borderThickness||Math.ceil(.1*o.size),J.drawMarkers([o]),"undefined"!==typeof s.y2&&((o=a.getMarkerProperties(r,s.x1,s.y2,this.chart.overlaidCanvasCtx)).size=Math.max(1.5*o.size<<0,10),o.borderColor=o.borderColor||"#FFFFFF",o.borderThickness=o.borderThickness||Math.ceil(.1*o.size),J.drawMarkers([o]))):"bubble"===a.type?((o=a.getMarkerProperties(r,s.x1,s.y1,this.chart.overlaidCanvasCtx)).size=s.size,o.color="white",o.borderColor="white",e.globalAlpha=.3,J.drawMarkers([o]),e.globalAlpha=1):"column"===a.type||"stackedColumn"===a.type||"stackedColumn100"===a.type||"bar"===a.type||"rangeBar"===a.type||"stackedBar"===a.type||"stackedBar100"===a.type||"rangeColumn"===a.type||"waterfall"===a.type?ut(e,s.x1,s.y1,s.x2,s.y2,"white",0,null,!1,!1,!1,!1,.3):"pie"===a.type||"doughnut"===a.type?q(e,s.center,s.radius,"white",a.type,s.startAngle,s.endAngle,.3,s.percentInnerRadius):"funnel"===a.type||"pyramid"===a.type?G(e,s.funnelSection,.3,"white"):"candlestick"===a.type?(e.globalAlpha=1,e.strokeStyle=s.color,e.lineWidth=2*s.borderThickness,a=0===e.lineWidth%2?0:.5,e.beginPath(),e.moveTo(s.x3-a,Math.min(s.y2,s.y3)),e.lineTo(s.x3-a,Math.min(s.y1,s.y4)),e.stroke(),e.beginPath(),e.moveTo(s.x3-a,Math.max(s.y1,s.y4)),e.lineTo(s.x3-a,Math.max(s.y2,s.y3)),e.stroke(),ut(e,s.x1,Math.min(s.y1,s.y4),s.x2,Math.max(s.y1,s.y4),"transparent",2*s.borderThickness,s.color,!1,!1,!1,!1),e.globalAlpha=1):"ohlc"===a.type?(e.globalAlpha=1,e.strokeStyle=s.color,e.lineWidth=2*s.borderThickness,a=0===e.lineWidth%2?0:.5,e.beginPath(),e.moveTo(s.x3-a,s.y2),e.lineTo(s.x3-a,s.y3),e.stroke(),e.beginPath(),e.moveTo(s.x3,s.y1),e.lineTo(s.x1,s.y1),e.stroke(),e.beginPath(),e.moveTo(s.x3,s.y4),e.lineTo(s.x2,s.y4),e.stroke(),e.globalAlpha=1):"boxAndWhisker"===a.type?(e.save(),e.globalAlpha=1,e.strokeStyle=s.stemColor,e.lineWidth=2*s.stemThickness,0<s.stemThickness&&(e.beginPath(),e.moveTo(s.x3,s.y2+s.borderThickness/2),e.lineTo(s.x3,s.y1+s.whiskerThickness/2),e.stroke(),e.beginPath(),e.moveTo(s.x3,s.y4-s.whiskerThickness/2),e.lineTo(s.x3,s.y3-s.borderThickness/2),e.stroke()),e.beginPath(),ut(e,s.x1-s.borderThickness/2,Math.max(s.y2+s.borderThickness/2,s.y3+s.borderThickness/2),s.x2+s.borderThickness/2,Math.min(s.y2-s.borderThickness/2,s.y3-s.borderThickness/2),"transparent",s.borderThickness,s.color,!1,!1,!1,!1),e.globalAlpha=1,e.strokeStyle=s.whiskerColor,e.lineWidth=2*s.whiskerThickness,0<s.whiskerThickness&&(e.beginPath(),e.moveTo(Math.floor(s.x3-s.whiskerLength/2),s.y4),e.lineTo(Math.ceil(s.x3+s.whiskerLength/2),s.y4),e.stroke(),e.beginPath(),e.moveTo(Math.floor(s.x3-s.whiskerLength/2),s.y1),e.lineTo(Math.ceil(s.x3+s.whiskerLength/2),s.y1),e.stroke()),e.globalAlpha=1,e.strokeStyle=s.lineColor,e.lineWidth=2*s.lineThickness,0<s.lineThickness&&(e.beginPath(),e.moveTo(s.x1,s.y5),e.lineTo(s.x2,s.y5),e.stroke()),e.restore(),e.globalAlpha=1):"error"===a.type&&n(e,s.x1,s.y1,s.x2,s.y2,"white",s.whiskerProperties,s.stemProperties,s.isXYSwapped,.3))}}e.restore(),e.globalAlpha=1,e.beginPath()},H.prototype.getToolTipInnerHTML=function(t){t=t.entries;var e=null,i=null,a=null,s=0,n="";this.isToolTipDefinedInData=!0;for(var o=0;o<t.length;o++)if(t[o].dataSeries.toolTipContent||t[o].dataPoint.toolTipContent){this.isToolTipDefinedInData=!1;break}if(this.isToolTipDefinedInData&&(this.content&&"function"===typeof this.content||this.contentFormatter))t={chart:this.chart,toolTip:this.options,entries:t},e=this.contentFormatter?this.contentFormatter(t):this.content(t);else if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){var r=null,h="";for(o=0;o<t.length;o++){if(i=t[o].dataSeries,a=t[o].dataPoint,s=t[o].index,n="",0===o&&this.isToolTipDefinedInData&&!this.content){if(this.chart.axisX&&0<this.chart.axisX.length?h+="undefined"!==typeof this.chart.axisX[0].labels[a.x]?this.chart.axisX[0].labels[a.x]:"{x}":this.chart.axisX2&&0<this.chart.axisX2.length&&(h+="undefined"!==typeof this.chart.axisX2[0].labels[a.x]?this.chart.axisX2[0].labels[a.x]:"{x}"),h+="</br>",!i.visible)continue;h=this.chart.replaceKeywordsWithValue(h,a,i,s)}null===a.toolTipContent||"undefined"===typeof a.toolTipContent&&null===i.options.toolTipContent||("line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"column"===i.type||"bar"===i.type||"scatter"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type||"waterfall"===i.type?(this.chart.axisX&&1<this.chart.axisX.length&&(n+=r!=i.axisXIndex?i.axisX.title?i.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),n+=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}",r=i.axisXIndex):"bubble"===i.type?(this.chart.axisX&&1<this.chart.axisX.length&&(n+=r!=i.axisXIndex?i.axisX.title?i.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),n+=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}"):"rangeColumn"===i.type||"rangeBar"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type||"error"===i.type?(this.chart.axisX&&1<this.chart.axisX.length&&(n+=r!=i.axisXIndex?i.axisX.title?i.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),n+=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}"):"candlestick"===i.type||"ohlc"===i.type?(this.chart.axisX&&1<this.chart.axisX.length&&(n+=r!=i.axisXIndex?i.axisX.title?i.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),n+=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}"):"boxAndWhisker"===i.type&&(this.chart.axisX&&1<this.chart.axisX.length&&(n+=r!=i.axisXIndex?i.axisX.title?i.axisX.title+"<br/>":"X:{axisXIndex}<br/>":""),n+=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>{name}:</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),null===e&&(e=""),i.visible&&(!0===this.reversed?(e=this.chart.replaceKeywordsWithValue(n,a,i,s)+e,o<t.length-1&&(e="</br>"+e)):(e+=this.chart.replaceKeywordsWithValue(n,a,i,s),o<t.length-1&&(e+="</br>"))))}null!==e&&(e=h+e)}else{if(i=t[0].dataSeries,a=t[0].dataPoint,s=t[0].index,null===a.toolTipContent||"undefined"===typeof a.toolTipContent&&null===i.options.toolTipContent)return null;"line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"column"===i.type||"bar"===i.type||"scatter"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type||"waterfall"===i.type?n=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>"+(a.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":"bubble"===i.type?n=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>"+(a.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"pie"===i.type||"doughnut"===i.type||"funnel"===i.type||"pyramid"===i.type?n=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>"+(a.name?"{name}:</span>&nbsp;&nbsp;":a.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":"rangeColumn"===i.type||"rangeBar"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type||"error"===i.type?n=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>"+(a.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":"candlestick"===i.type||"ohlc"===i.type?n=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>"+(a.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}":"boxAndWhisker"===i.type&&(n=a.toolTipContent?a.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!==typeof this.content?this.content:"<span data-color='\""+(this.options.fontColor?"":"'{color}'")+"\"'>"+(a.label?"{label}":"{x}")+"</span><br/>Minimum: &nbsp;{y[0]}<br/>Q1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[1]}<br/>Q2:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[4]}<br/>Q3:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Maximum: &nbsp;{y[3]}"),null===e&&(e=""),e+=this.chart.replaceKeywordsWithValue(n,a,i,s)}return e},H.prototype.enableAnimation=function(){if(!this.container.style.WebkitTransition){var t=this.getContainerTransition(this.containerTransitionDuration);this.container.style.WebkitTransition=t,this.container.style.MsTransition=t,this.container.style.transition=t,this.container.style.MozTransition=this.mozContainerTransition}},H.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},H.prototype.hide=function(t){this.container&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,("undefined"===typeof t||t)&&this.chart.resetOverlayedCanvas())},H.prototype.show=function(t,e,i){this._updateToolTip(t,e,"undefined"!==typeof i&&i)},H.prototype.showAtIndex=function(t,e){},H.prototype.showAtX=function(t,i){if(!this.enabled)return!1;this.chart.clearedOverlayedCanvas=null;var a,s,n,o=[];if(n=!1,i=!c(i)&&0<=i&&i<this.chart.data.length?i:0,this.shared)for(var r=0;r<this.chart.data.length;r++)(s=(a=this.chart.data[r]).getDataPointAtX(t,!1))&&s.dataPoint&&!c(s.dataPoint.y)&&a.visible&&(s.dataSeries=a,o.push(s));else(s=(a=this.chart.data[i]).getDataPointAtX(t,!1))&&s.dataPoint&&!c(s.dataPoint.y)&&a.visible&&(s.dataSeries=a,o.push(s));if(!(0<o.length))return this.hide(),!1;for(r=0;r<o.length;r++){if(s=o[r],(this.shared||0<=s.dataSeries.type.indexOf("100"))&&s.dataPoint.x>=s.dataSeries.axisX.viewportMinimum&&s.dataPoint.x<=s.dataSeries.axisX.viewportMaximum){n=!1;break}if(!(s.dataPoint.x<s.dataSeries.axisX.viewportMinimum||s.dataPoint.x>s.dataSeries.axisX.viewportMaximum||s.dataPoint.y<s.dataSeries.axisY.viewportMinimum||s.dataPoint.y>s.dataSeries.axisY.viewportMaximum)){n=!1;break}n=!0}if(n)return this.hide(),!1;if(this.highlightObjects(o),this._entries=o,r="",null===(r=this.getToolTipInnerHTML({entries:o})))return this.hide(!1),!1;if(this.contentDiv.innerHTML=r,this.isToolTipDefinedInData&&c(this.options.content)&&c(this.options.contentFormatter))for(s=this.contentDiv.getElementsByTagName("span"),r=0;r<s.length;r++)s[r]&&(s[r].style.color=s[r].getAttribute("data-color"));r=!1,"none"===this.container.style.display&&(r=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:R?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.borderColor="waterfall"===o[0].dataSeries.type?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:o[0].dataPoint.color?o[0].dataPoint.color:0<o[0].dataPoint.y?o[0].dataSeries.risingColor:o[0].dataSeries.fallingColor:"error"===o[0].dataSeries.type?this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:o[0].dataSeries.color?o[0].dataSeries.color:o[0].dataSeries._colorSet[a.index%o[0].dataSeries._colorSet.length]:this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.options.borderColor?this.options.borderColor:o[0].dataPoint.color?o[0].dataPoint.color:o[0].dataSeries.color?o[0].dataSeries.color:o[0].dataSeries._colorSet[o[0].index%o[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||0===this.borderThickness?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||0===this.cornerRadius?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||0===this.fontSize?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:R?"italic":"normal"}catch(e){}return"pie"===o[0].dataSeries.type||"doughnut"===o[0].dataSeries.type||"funnel"===o[0].dataSeries.type||"pyramid"===o[0].dataSeries.type?a=mouseX-10-this.container.clientWidth:(a="bar"===o[0].dataSeries.type||"rangeBar"===o[0].dataSeries.type||"stackedBar"===o[0].dataSeries.type||"stackedBar100"===o[0].dataSeries.type?o[0].dataSeries.axisY.convertValueToPixel(o[0].dataPoint.y)-this.container.clientWidth<<0:o[0].dataSeries.axisX.convertValueToPixel(o[0].dataPoint.x)-this.container.clientWidth<<0,a-=10),0>a&&(a+=this.container.clientWidth+20),a+this.container.clientWidth>Math.max(this.chart.container.clientWidth,this.chart.width)&&(a=Math.max(0,Math.max(this.chart.container.clientWidth,this.chart.width)-this.container.clientWidth)),0<(o=10-(o=(1!==o.length||this.shared||"line"!==o[0].dataSeries.type&&"stepLine"!==o[0].dataSeries.type&&"spline"!==o[0].dataSeries.type&&"area"!==o[0].dataSeries.type&&"stepArea"!==o[0].dataSeries.type&&"splineArea"!==o[0].dataSeries.type)&&("bar"===o[0].dataSeries.type||"rangeBar"===o[0].dataSeries.type||"stackedBar"===o[0].dataSeries.type||"stackedBar100"===o[0].dataSeries.type)?o[0].dataSeries.axisX.convertValueToPixel(o[0].dataPoint.x):o[0].dataSeries.axisY.convertValueToPixel(o[0].dataPoint.y)))+this.container.clientHeight+5&&(o-=o+this.container.clientHeight+5-0),this.fixMozTransitionDelay(a,o),!this.animationEnabled||r?this.disableAnimation():(this.enableAnimation(),this.container.style.MozTransition=this.mozContainerTransition),this.container.style.left=a+"px",this.container.style.bottom=o+"px",!0},H.prototype.fixMozTransitionDelay=function(t,e){if(20<this.chart._eventManager.lastObjectId)this.mozContainerTransition=this.getContainerTransition(0);else{var i=parseFloat(this.container.style.left),a=(i=isNaN(i)?0:i,parseFloat(this.container.style.bottom));a=isNaN(a)?0:a;10<Math.sqrt(Math.pow(i-t,2)+Math.pow(a-e,2))?this.mozContainerTransition=this.getContainerTransition(.1):this.mozContainerTransition=this.getContainerTransition(0)}},H.prototype.getContainerTransition=function(t){return"left "+t+"s ease-out 0s, bottom "+t+"s ease-out 0s"},Z.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],R&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},Z.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},Z.prototype.mouseEventHandler=function(t){if("mousemove"===t.type||"click"===t.type){var e=[],i=ht(t),a=null;if((a=this.chart.getObjectAtXY(i.x,i.y,!1))&&"undefined"!==typeof this.objectMap[a])if("dataPoint"===(a=this.objectMap[a]).objectType){var s=this.chart.data[a.dataSeriesIndex],n=s.dataPoints[a.dataPointIndex],o=a.dataPointIndex;a.eventParameter={x:i.x,y:i.y,dataPoint:n,dataSeries:s.options,dataPointIndex:o,dataSeriesIndex:s.index,chart:this.chart},a.eventContext={context:n,userContext:n,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(a),(a=this.objectMap[s.id]).eventParameter={x:i.x,y:i.y,dataPoint:n,dataSeries:s.options,dataPointIndex:o,dataSeriesIndex:s.index,chart:this.chart},a.eventContext={context:s,userContext:s.options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},e.push(this.objectMap[s.id])}else"legendItem"===a.objectType&&(s=this.chart.data[a.dataSeriesIndex],n=null!==a.dataPointIndex?s.dataPoints[a.dataPointIndex]:null,a.eventParameter={x:i.x,y:i.y,dataSeries:s.options,dataPoint:n,dataPointIndex:a.dataPointIndex,dataSeriesIndex:a.dataSeriesIndex,chart:this.chart},a.eventContext={context:this.chart.legend,userContext:this.chart.legend.options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},e.push(a));for(s=[],i=0;i<this.mouseoveredObjectMaps.length;i++){for(n=!0,a=0;a<e.length;a++)if(e[a].id===this.mouseoveredObjectMaps[i].id){n=!1;break}n?this.fireEvent(this.mouseoveredObjectMaps[i],"mouseout",t):s.push(this.mouseoveredObjectMaps[i])}for(this.mouseoveredObjectMaps=s,i=0;i<e.length;i++){for(s=!1,a=0;a<this.mouseoveredObjectMaps.length;a++)if(e[i].id===this.mouseoveredObjectMaps[a].id){s=!0;break}s||(this.fireEvent(e[i],"mouseover",t),this.mouseoveredObjectMaps.push(e[i])),"click"===t.type?this.fireEvent(e[i],"click",t):"mousemove"===t.type&&this.fireEvent(e[i],"mousemove",t)}}},Z.prototype.fireEvent=function(t,e,i){if(t&&e){var a=t.eventParameter,s=t.eventContext,n=t.eventContext.userContext;n&&s&&n[s[e]]&&n[s[e]].call(n,a),"mouseout"!==e?n.cursor&&n.cursor!==i.target.style.cursor&&(i.target.style.cursor=n.cursor):(i.target.style.cursor=this.chart._defaultCursor,delete t.eventParameter,delete t.eventContext),"click"===e&&"dataPoint"===t.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[t.dataSeriesIndex],a),"click"===e&&"dataPoint"===t.objectType&&this.chart.funnelPyramidClickHandler&&this.chart.funnelPyramidClickHandler.call(this.chart.data[t.dataSeriesIndex],a)}},j.prototype.animate=function(t,e,i,a,s){var n=this;for(this.chart.isAnimating=!0,s=s||K.easing.linear,i&&this.animations.push({startTime:(new Date).getTime()+(t||0),duration:e,animationCallback:i,onComplete:a}),t=[];0<this.animations.length;)e=this.animations.shift(),i=(new Date).getTime(),a=0,e.startTime<=i&&(a=s(Math.min(i-e.startTime,e.duration),0,1,e.duration),a=Math.min(a,1),isNaN(a)||!isFinite(a))&&(a=1),1>a&&t.push(e),e.animationCallback(a),1<=a&&e.onComplete&&e.onComplete();this.animations=t,0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,(function(){n.animate.call(n)})):this.chart.isAnimating=!1},j.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var K={yScaleAnimation:function(t,e){if(0!==t){var i=e.dest,a=e.source.canvas,s=e.animationBase;i.drawImage(a,0,0,a.width,a.height,0,s-s*t,i.canvas.width/pt,t*i.canvas.height/pt)}},xScaleAnimation:function(t,e){if(0!==t){var i=e.dest,a=e.source.canvas,s=e.animationBase;i.drawImage(a,0,0,a.width,a.height,s-s*t,0,t*i.canvas.width/pt,i.canvas.height/pt)}},xClipAnimation:function(t,e){if(0!==t){var i=e.dest,a=e.source.canvas;i.save(),0<t&&i.drawImage(a,0,0,a.width*t,a.height,0,0,a.width*t/pt,a.height/pt),i.restore()}},fadeInAnimation:function(t,e){if(0!==t){var i=e.dest,a=e.source.canvas;i.save(),i.globalAlpha=t,i.drawImage(a,0,0,a.width,a.height,0,0,i.canvas.width/pt,i.canvas.height/pt),i.restore()}},easing:{linear:function(t,e,i,a){return i*t/a+e},easeOutQuad:function(t,e,i,a){return-i*(t/=a)*(t-2)+e},easeOutQuart:function(t,e,i,a){return-i*((t=t/a-1)*t*t*t-1)+e},easeInQuad:function(t,e,i,a){return i*(t/=a)*t+e},easeInQuart:function(t,e,i,a){return i*(t/=a)*t*t*t+e}}},J={drawMarker:function(t,e,i,a,s,n,o,r){if(i){var h=1;i.fillStyle=n||"#000000",i.strokeStyle=o||"#000000",i.lineWidth=r||0,i.setLineDash&&i.setLineDash(m("solid",r)),"circle"===a?(i.moveTo(t,e),i.beginPath(),i.arc(t,e,s/2,0,2*Math.PI,!1),n&&i.fill(),r&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h))):"square"===a?(i.beginPath(),i.rect(t-s/2,e-s/2,s,s),n&&i.fill(),r&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h))):"triangle"===a?(i.beginPath(),i.moveTo(t-s/2,e+s/2),i.lineTo(t+s/2,e+s/2),i.lineTo(t,e-s/2),i.closePath(),n&&i.fill(),r&&(o?i.stroke():(h=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=h)),i.beginPath()):"cross"===a&&(i.strokeStyle=n,i.lineWidth=s/4,i.beginPath(),i.moveTo(t-s/2,e-s/2),i.lineTo(t+s/2,e+s/2),i.stroke(),i.moveTo(t+s/2,e-s/2),i.lineTo(t-s/2,e+s/2),i.stroke())}},drawMarkers:function(t){for(var e=0;e<t.length;e++){var i=t[e];J.drawMarker(i.x,i.y,i.ctx,i.type,i.size,i.color,i.borderColor,i.borderThickness)}}};return e}(),Z.version="v3.7.32 GA",window.CanvasJS&&Z&&!window.CanvasJS.Chart&&(window.CanvasJS.Chart=Z)}(),document.createElement("canvas").getContext||function(){function t(){return this.context_||(this.context_=new c(this))}function e(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function i(t){t.namespaces.g_vml_||t.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),t.namespaces.g_o_||t.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),t.styleSheets.ex_canvas_||((t=t.createStyleSheet()).owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function a(t){var e=t.srcElement;switch(t.propertyName){case"width":e.getContext().clearRect(),e.style.width=e.attributes.width.nodeValue+"px",e.firstChild.style.width=e.clientWidth+"px";break;case"height":e.getContext().clearRect(),e.style.height=e.attributes.height.nodeValue+"px",e.firstChild.style.height=e.clientHeight+"px"}}function s(t){(t=t.srcElement).firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}function n(t,e){for(var i=[[1,0,0],[0,1,0],[0,0,1]],a=0;3>a;a++)for(var s=0;3>s;s++){for(var n=0,o=0;3>o;o++)n+=t[a][o]*e[o][s];i[a][s]=n}return i}function o(t,e){e.fillStyle=t.fillStyle,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY,e.strokeStyle=t.strokeStyle,e.globalAlpha=t.globalAlpha,e.font=t.font,e.textAlign=t.textAlign,e.textBaseline=t.textBaseline,e.arcScaleX_=t.arcScaleX_,e.arcScaleY_=t.arcScaleY_,e.lineScale_=t.lineScale_}function r(t){var e=t.indexOf("(",3),i=t.indexOf(")",e+1);return 4==(e=t.substring(e+1,i).split(",")).length&&"a"==t.charAt(3)||(e[3]=1),e}function h(t,e,i){return Math.min(i,Math.max(e,t))}function l(t,e,i){return 0>i&&i++,1<i&&i--,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}function d(t){if(t in z)return z[t];var e,i=1;if("#"==(t=String(t)).charAt(0))e=t;else if(/^rgb/.test(t)){i=r(t),e="#";for(var a,s=0;3>s;s++)a=-1!=i[s].indexOf("%")?Math.floor(parseFloat(i[s])/100*255):+i[s],e+=L[h(a,0,255)];i=+i[3]}else if(/^hsl/.test(t)){if(s=i=r(t),0>(e=parseFloat(s[0])/360%360)&&e++,a=h(parseFloat(s[1])/100,0,1),s=h(parseFloat(s[2])/100,0,1),0==a)a=s=e=s;else{var n=.5>s?s*(1+a):s+a-s*a,o=2*s-n;a=l(o,n,e+1/3),s=l(o,n,e),e=l(o,n,e-1/3)}e="#"+L[Math.floor(255*a)]+L[Math.floor(255*s)]+L[Math.floor(255*e)],i=i[3]}else e=I[t]||t;return z[t]={color:e,alpha:i}}function c(t){this.m_=[[1,0,0],[0,1,0],[0,0,1]],this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*P,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=t;var e="width:"+t.clientWidth+"px;height:"+t.clientHeight+"px;overflow:hidden;position:absolute",i=t.ownerDocument.createElement("div");i.style.cssText=e,t.appendChild(i),(e=i.cloneNode(!1)).style.backgroundColor="red",e.style.filter="alpha(opacity=0)",t.appendChild(e),this.element_=i,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function p(t,e,i,a){t.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:i.x,cp2y:i.y,x:a.x,y:a.y}),t.currentX_=a.x,t.currentY_=a.y}function u(t,e){var i=(a=d(t.strokeStyle)).color,a=a.alpha*t.globalAlpha,s=t.lineScale_*t.lineWidth;1>s&&(a*=s),e.push("<g_vml_:stroke",' opacity="',a,'"',' joinstyle="',t.lineJoin,'"',' miterlimit="',t.miterLimit,'"',' endcap="',D[t.lineCap]||"square",'"',' weight="',s,'px"',' color="',i,'" />')}function x(t,e,i,a){var s=t.fillStyle,n=t.arcScaleX_,o=t.arcScaleY_,r=a.x-i.x,h=a.y-i.y;if(s instanceof f){var l=0,c=a=0,p=0,u=1;if("gradient"==s.type_){l=s.x1_/n,i=s.y1_/o;var x=m(t,s.x0_/n,s.y0_/o);l=m(t,l,i);0>(l=180*Math.atan2(l.x-x.x,l.y-x.y)/Math.PI)&&(l+=360),1e-6>l&&(l=0)}else a=((x=m(t,s.x0_,s.y0_)).x-i.x)/r,c=(x.y-i.y)/h,r/=n*P,h/=o*P,u=v.max(r,h),p=2*s.r0_/u,u=2*s.r1_/u-p;(n=s.colors_).sort((function(t,e){return t.offset-e.offset})),o=n.length,x=n[0].color,i=n[o-1].color,r=n[0].alpha*t.globalAlpha,t=n[o-1].alpha*t.globalAlpha;h=[];for(var g=0;g<o;g++){var b=n[g];h.push(b.offset*u+p+" "+b.color)}e.push('<g_vml_:fill type="',s.type_,'"',' method="none" focus="100%"',' color="',x,'"',' color2="',i,'"',' colors="',h.join(","),'"',' opacity="',t,'"',' g_o_:opacity2="',r,'"',' angle="',l,'"',' focusposition="',a,",",c,'" />')}else s instanceof y?r&&h&&e.push("<g_vml_:fill",' position="',-i.x/r*n*n,",",-i.y/h*o*o,'"',' type="tile"',' src="',s.src_,'" />'):(s=d(t.fillStyle),e.push('<g_vml_:fill color="',s.color,'" opacity="',s.alpha*t.globalAlpha,'" />'))}function m(t,e,i){return t=t.m_,{x:P*(e*t[0][0]+i*t[1][0]+t[2][0])-C,y:P*(e*t[0][1]+i*t[1][1]+t[2][1])-C}}function g(t,e,i){isFinite(e[0][0])&&isFinite(e[0][1])&&isFinite(e[1][0])&&isFinite(e[1][1])&&isFinite(e[2][0])&&isFinite(e[2][1])&&(t.m_=e,i&&(t.lineScale_=T(w(e[0][0]*e[1][1]-e[0][1]*e[1][0]))))}function f(t){this.type_=t,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function y(t,e){if(!t||1!=t.nodeType||"IMG"!=t.tagName)throw new b("TYPE_MISMATCH_ERR");if("complete"!=t.readyState)throw new b("INVALID_STATE_ERR");switch(e){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=e;break;default:throw new b("SYNTAX_ERR")}this.src_=t.src,this.width_=t.width,this.height_=t.height}function b(t){this.code=this[t],this.message=t+": DOM Exception "+this.code}var v=Math,_=v.round,k=v.sin,M=v.cos,w=v.abs,T=v.sqrt,P=10,C=P/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var S=Array.prototype.slice;i(document);var A={init:function(t){(t=t||document).createElement("canvas"),t.attachEvent("onreadystatechange",function(t,e,i){var a=S.call(arguments,2);return function(){return t.apply(e,a.concat(S.call(arguments)))}}(this.init_,this,t))},init_:function(t){t=t.getElementsByTagName("canvas");for(var e=0;e<t.length;e++)this.initElement(t[e])},initElement:function(e){if(!e.getContext){e.getContext=t,i(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",a),e.attachEvent("onresize",s);var n=e.attributes;n.width&&n.width.specified?e.style.width=n.width.nodeValue+"px":e.width=e.clientWidth,n.height&&n.height.specified?e.style.height=n.height.nodeValue+"px":e.height=e.clientHeight}return e}};A.init();for(var L=[],B=0;16>B;B++)for(var F=0;16>F;F++)L[16*B+F]=B.toString(16)+F.toString(16);var I={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},z={},V={},D={butt:"flat",round:"round"};(B=c.prototype).clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},B.beginPath=function(){this.currentPath_=[]},B.moveTo=function(t,e){var i=m(this,t,e);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},B.lineTo=function(t,e){var i=m(this,t,e);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},B.bezierCurveTo=function(t,e,i,a,s,n){s=m(this,s,n),p(this,t=m(this,t,e),i=m(this,i,a),s)},B.quadraticCurveTo=function(t,e,i,a){t=m(this,t,e),i=m(this,i,a),p(this,a={x:this.currentX_+2/3*(t.x-this.currentX_),y:this.currentY_+2/3*(t.y-this.currentY_)},{x:a.x+(i.x-this.currentX_)/3,y:a.y+(i.y-this.currentY_)/3},i)},B.arc=function(t,e,i,a,s,n){i*=P;var o=n?"at":"wa",r=t+M(a)*i-C,h=e+k(a)*i-C;a=t+M(s)*i-C,s=e+k(s)*i-C,r!=a||n||(r+=.125),t=m(this,t,e),r=m(this,r,h),a=m(this,a,s),this.currentPath_.push({type:o,x:t.x,y:t.y,radius:i,xStart:r.x,yStart:r.y,xEnd:a.x,yEnd:a.y})},B.rect=function(t,e,i,a){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+a),this.lineTo(t,e+a),this.closePath()},B.strokeRect=function(t,e,i,a){var s=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+a),this.lineTo(t,e+a),this.closePath(),this.stroke(),this.currentPath_=s},B.fillRect=function(t,e,i,a){var s=this.currentPath_;this.beginPath(),this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+a),this.lineTo(t,e+a),this.closePath(),this.fill(),this.currentPath_=s},B.createLinearGradient=function(t,e,i,a){var s=new f("gradient");return s.x0_=t,s.y0_=e,s.x1_=i,s.y1_=a,s},B.createRadialGradient=function(t,e,i,a,s,n){var o=new f("gradientradial");return o.x0_=t,o.y0_=e,o.r0_=i,o.x1_=a,o.y1_=s,o.r1_=n,o},B.drawImage=function(t,e){var i,a,s,n,o,r,h,l;s=t.runtimeStyle.width,n=t.runtimeStyle.height,t.runtimeStyle.width="auto",t.runtimeStyle.height="auto";var d=t.width,c=t.height;if(t.runtimeStyle.width=s,t.runtimeStyle.height=n,3==arguments.length)i=arguments[1],a=arguments[2],o=r=0,h=s=d,l=n=c;else if(5==arguments.length)i=arguments[1],a=arguments[2],s=arguments[3],n=arguments[4],o=r=0,h=d,l=c;else{if(9!=arguments.length)throw Error("Invalid number of arguments");o=arguments[1],r=arguments[2],h=arguments[3],l=arguments[4],i=arguments[5],a=arguments[6],s=arguments[7],n=arguments[8]}var p=m(this,i,a),u=[];if(u.push(" <g_vml_:group",' coordsize="',10*P,",",10*P,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var x=[];x.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",_(p.x/P),",","Dy=",_(p.y/P),"");var g=m(this,i+s,a),f=m(this,i,a+n);i=m(this,i+s,a+n),p.x=v.max(p.x,g.x,f.x,i.x),p.y=v.max(p.y,g.y,f.y,i.y),u.push("padding:0 ",_(p.x/P),"px ",_(p.y/P),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",x.join(""),", sizingmethod='clip');")}else u.push("top:",_(p.y/P),"px;left:",_(p.x/P),"px;");u.push(' ">','<g_vml_:image src="',t.src,'"',' style="width:',P*s,"px;"," height:",P*n,'px"',' cropleft="',o/d,'"',' croptop="',r/c,'"',' cropright="',(d-o-h)/d,'"',' cropbottom="',(c-r-l)/c,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",u.join(""))},B.stroke=function(t){var e=[];e.push("<g_vml_:shape",' filled="',!!t,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*P,",",10*P,'"',' stroked="',!t,'"',' path="');for(var i={x:null,y:null},a={x:null,y:null},s=0;s<this.currentPath_.length;s++){var n=this.currentPath_[s];switch(n.type){case"moveTo":e.push(" m ",_(n.x),",",_(n.y));break;case"lineTo":e.push(" l ",_(n.x),",",_(n.y));break;case"close":e.push(" x "),n=null;break;case"bezierCurveTo":e.push(" c ",_(n.cp1x),",",_(n.cp1y),",",_(n.cp2x),",",_(n.cp2y),",",_(n.x),",",_(n.y));break;case"at":case"wa":e.push(" ",n.type," ",_(n.x-this.arcScaleX_*n.radius),",",_(n.y-this.arcScaleY_*n.radius)," ",_(n.x+this.arcScaleX_*n.radius),",",_(n.y+this.arcScaleY_*n.radius)," ",_(n.xStart),",",_(n.yStart)," ",_(n.xEnd),",",_(n.yEnd))}n&&((null==i.x||n.x<i.x)&&(i.x=n.x),(null==a.x||n.x>a.x)&&(a.x=n.x),(null==i.y||n.y<i.y)&&(i.y=n.y),(null==a.y||n.y>a.y)&&(a.y=n.y))}e.push(' ">'),t?x(this,e,i,a):u(this,e),e.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",e.join(""))},B.fill=function(){this.stroke(!0)},B.closePath=function(){this.currentPath_.push({type:"close"})},B.save=function(){var t={};o(this,t),this.aStack_.push(t),this.mStack_.push(this.m_),this.m_=n([[1,0,0],[0,1,0],[0,0,1]],this.m_)},B.restore=function(){this.aStack_.length&&(o(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},B.translate=function(t,e){g(this,n([[1,0,0],[0,1,0],[t,e,1]],this.m_),!1)},B.rotate=function(t){var e=M(t);g(this,n([[e,t=k(t),0],[-t,e,0],[0,0,1]],this.m_),!1)},B.scale=function(t,e){this.arcScaleX_*=t,this.arcScaleY_*=e,g(this,n([[t,0,0],[0,e,0],[0,0,1]],this.m_),!0)},B.transform=function(t,e,i,a,s,o){g(this,n([[t,e,0],[i,a,0],[s,o,1]],this.m_),!0)},B.setTransform=function(t,e,i,a,s,n){g(this,[[t,e,0],[i,a,0],[s,n,1]],!0)},B.drawText_=function(t,i,a,s,n){var o=this.m_;s=0;var r,h=1e3,l=0,d=[];if(r=this.font,V[r])r=V[r];else{var c=document.createElement("div").style;try{c.font=r}catch(f){}r=V[r]={style:c.fontStyle||"normal",variant:c.fontVariant||"normal",weight:c.fontWeight||"normal",size:c.fontSize||10,family:c.fontFamily||"sans-serif"}}c=r;var p=this.element_;for(var g in r={},c)r[g]=c[g];switch(g=parseFloat(p.currentStyle.fontSize),p=parseFloat(c.size),"number"==typeof c.size?r.size=c.size:-1!=c.size.indexOf("px")?r.size=p:-1!=c.size.indexOf("em")?r.size=g*p:-1!=c.size.indexOf("%")?r.size=g/100*p:-1!=c.size.indexOf("pt")?r.size=p/.75:r.size=g,r.size*=.981,g=r.style+" "+r.variant+" "+r.weight+" "+r.size+"px "+r.family,p=this.element_.currentStyle,c=this.textAlign.toLowerCase()){case"left":case"center":case"right":break;case"end":c="ltr"==p.direction?"right":"left";break;case"start":c="rtl"==p.direction?"right":"left";break;default:c="left"}switch(this.textBaseline){case"hanging":case"top":l=r.size/1.75;break;case"middle":break;default:l=-r.size/2.25}switch(c){case"right":s=1e3,h=.05;break;case"center":s=h=500}i=m(this,i+0,a+l),d.push('<g_vml_:line from="',-s,' 0" to="',h,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!n,'" stroked="',!!n,'" style="position:absolute;width:1px;height:1px;">'),n?u(this,d):x(this,d,{x:-s,y:0},{x:h,y:r.size}),n=o[0][0].toFixed(3)+","+o[1][0].toFixed(3)+","+o[0][1].toFixed(3)+","+o[1][1].toFixed(3)+",0,0",i=_(i.x/P)+","+_(i.y/P),d.push('<g_vml_:skew on="t" matrix="',n,'" ',' offset="',i,'" origin="',s,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',e(t),'" style="v-text-align:',c,";font:",e(g),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",d.join(""))},B.fillText=function(t,e,i,a){this.drawText_(t,e,i,a,!1)},B.strokeText=function(t,e,i,a){this.drawText_(t,e,i,a,!0)},B.measureText=function(t){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var e=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(e.createTextNode(t)),{width:this.textMeasureEl_.offsetWidth}},B.clip=function(){},B.arcTo=function(){},B.createPattern=function(t,e){return new y(t,e)},f.prototype.addColorStop=function(t,e){e=d(e),this.colors_.push({offset:t,color:e.color,alpha:e.alpha})},(B=b.prototype=Error()).INDEX_SIZE_ERR=1,B.DOMSTRING_SIZE_ERR=2,B.HIERARCHY_REQUEST_ERR=3,B.WRONG_DOCUMENT_ERR=4,B.INVALID_CHARACTER_ERR=5,B.NO_DATA_ALLOWED_ERR=6,B.NO_MODIFICATION_ALLOWED_ERR=7,B.NOT_FOUND_ERR=8,B.NOT_SUPPORTED_ERR=9,B.INUSE_ATTRIBUTE_ERR=10,B.INVALID_STATE_ERR=11,B.SYNTAX_ERR=12,B.INVALID_MODIFICATION_ERR=13,B.NAMESPACE_ERR=14,B.INVALID_ACCESS_ERR=15,B.VALIDATION_ERR=16,B.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=A,CanvasRenderingContext2D=c,CanvasGradient=f,CanvasPattern=y,DOMException=b}()},3787:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var a=i(2791),s=i(8047);s=s.Chart?s:window.CanvasJS;class n extends a.Component{constructor(t){super(t),this.options=t.options?t.options:{},this.containerProps=t.containerProps?{...t.containerProps}:{width:"100%",position:"relative"},this.containerProps.height=t.containerProps&&t.containerProps.height?t.containerProps.height:this.options.height?this.options.height+"px":"400px",this.containerRef=a.createRef()}componentDidMount(){this.chart=new s.Chart(this.containerRef.current,this.options),this.chart.render(),this.props.onRef&&this.props.onRef(this.chart)}shouldComponentUpdate(t,e){return!(t.options===this.options)}componentDidUpdate(){this.chart.options=this.props.options,this.chart.render()}componentWillUnmount(){this.chart&&this.chart.destroy(),this.props.onRef&&this.props.onRef(void 0)}render(){return a.createElement("div",{id:this.props.id,ref:this.containerRef,style:this.containerProps})}}const o={CanvasJSChart:n,CanvasJS:s}},8559:function(t,e){!function(t){"use strict";var e="1.9.4";function i(t){var e,i,a,s;for(i=1,a=arguments.length;i<a;i++)for(e in s=arguments[i])t[e]=s[e];return t}var a=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function s(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var a=i.call(arguments,2);return function(){return t.apply(e,a.length?a.concat(i.call(arguments)):arguments)}}var n=0;function o(t){return"_leaflet_id"in t||(t._leaflet_id=++n),t._leaflet_id}function r(t,e,i){var a,s,n,o;return o=function(){a=!1,s&&(n.apply(i,s),s=!1)},n=function(){a?s=arguments:(t.apply(i,arguments),setTimeout(o,e),a=!0)},n}function h(t,e,i){var a=e[1],s=e[0],n=a-s;return t===a&&i?t:((t-s)%n+n)%n+s}function l(){return!1}function d(t,e){if(!1===e)return t;var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function p(t){return c(t).split(/\s+/)}function u(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{}),e)t.options[i]=e[i];return t.options}function x(t,e,i){var a=[];for(var s in t)a.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(t[s]));return(e&&-1!==e.indexOf("?")?"&":"?")+a.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(m,(function(t,i){var a=e[i];if(void 0===a)throw new Error("No value provided for variable "+t);return"function"===typeof a&&(a=a(e)),a}))}var f=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function v(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var _=0;function k(t){var e=+new Date,i=Math.max(0,16-(e-_));return _=e+i,window.setTimeout(t,i)}var M=window.requestAnimationFrame||v("RequestAnimationFrame")||k,w=window.cancelAnimationFrame||v("CancelAnimationFrame")||v("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function T(t,e,i){if(!i||M!==k)return M.call(window,s(t,e));t.call(e)}function P(t){t&&w.call(window,t)}var C={__proto__:null,extend:i,create:a,bind:s,get lastId(){return n},stamp:o,throttle:r,wrapNum:h,falseFn:l,formatNum:d,trim:c,splitWords:p,setOptions:u,getParamString:x,template:g,isArray:f,indexOf:y,emptyImageUrl:b,requestFn:M,cancelFn:w,requestAnimFrame:T,cancelAnimFrame:P};function S(){}function A(t){if("undefined"!==typeof L&&L&&L.Mixin){t=f(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}S.extend=function(t){var e=function(){u(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},s=e.__super__=this.prototype,n=a(s);for(var o in n.constructor=e,e.prototype=n,this)Object.prototype.hasOwnProperty.call(this,o)&&"prototype"!==o&&"__super__"!==o&&(e[o]=this[o]);return t.statics&&i(e,t.statics),t.includes&&(A(t.includes),i.apply(null,[n].concat(t.includes))),i(n,t),delete n.statics,delete n.includes,n.options&&(n.options=s.options?a(s.options):{},i(n.options,t.options)),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){s.callInitHooks&&s.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},S.include=function(t){var e=this.prototype.options;return i(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},S.mergeOptions=function(t){return i(this.prototype.options,t),this},S.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var B={on:function(t,e,i){if("object"===typeof t)for(var a in t)this._on(a,t[a],e);else for(var s=0,n=(t=p(t)).length;s<n;s++)this._on(t[s],e,i);return this},off:function(t,e,i){if(arguments.length)if("object"===typeof t)for(var a in t)this._off(a,t[a],e);else{t=p(t);for(var s=1===arguments.length,n=0,o=t.length;n<o;n++)s?this._off(t[n]):this._off(t[n],e,i)}else delete this._events;return this},_on:function(t,e,i,a){if("function"===typeof e){if(!1===this._listens(t,e,i)){i===this&&(i=void 0);var s={fn:e,ctx:i};a&&(s.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(s)}}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,i){var a,s,n;if(this._events&&(a=this._events[t]))if(1!==arguments.length)if("function"===typeof e){var o=this._listens(t,e,i);if(!1!==o){var r=a[o];this._firingCount&&(r.fn=l,this._events[t]=a=a.slice()),a.splice(o,1)}}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(s=0,n=a.length;s<n;s++)a[s].fn=l;delete this._events[t]}},fire:function(t,e,a){if(!this.listens(t,a))return this;var s=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var n=this._events[t];if(n){this._firingCount=this._firingCount+1||1;for(var o=0,r=n.length;o<r;o++){var h=n[o],l=h.fn;h.once&&this.off(t,l,h.ctx),l.call(h.ctx||this,s)}this._firingCount--}}return a&&this._propagateEvent(s),this},listens:function(t,e,i,a){"string"!==typeof t&&console.warn('"string" type argument expected');var s=e;"function"!==typeof e&&(a=!!e,s=void 0,i=void 0);var n=this._events&&this._events[t];if(n&&n.length&&!1!==this._listens(t,s,i))return!0;if(a)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e,i,a))return!0;return!1},_listens:function(t,e,i){if(!this._events)return!1;var a=this._events[t]||[];if(!e)return!!a.length;i===this&&(i=void 0);for(var s=0,n=a.length;s<n;s++)if(a[s].fn===e&&a[s].ctx===i)return s;return!1},once:function(t,e,i){if("object"===typeof t)for(var a in t)this._on(a,t[a],e,!0);else for(var s=0,n=(t=p(t)).length;s<n;s++)this._on(t[s],e,i,!0);return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var F=S.extend(B);function I(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var z=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function V(t,e,i){return t instanceof I?t:f(t)?new I(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new I(t.x,t.y):new I(t,e,i)}function D(t,e){if(t)for(var i=e?[t,e]:t,a=0,s=i.length;a<s;a++)this.extend(i[a])}function W(t,e){return!t||t instanceof D?t:new D(t,e)}function E(t,e){if(t)for(var i=e?[t,e]:t,a=0,s=i.length;a<s;a++)this.extend(i[a])}function X(t,e){return t instanceof E?t:new E(t,e)}function O(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function Y(t,e,i){return t instanceof O?t:f(t)&&"object"!==typeof t[0]?3===t.length?new O(t[0],t[1],t[2]):2===t.length?new O(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new O(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new O(t,e,i)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(V(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(V(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new I(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new I(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=z(this.x),this.y=z(this.y),this},distanceTo:function(t){var e=(t=V(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=V(t)).x===this.x&&t.y===this.y},contains:function(t){return t=V(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}},D.prototype={extend:function(t){var e,i;if(!t)return this;if(t instanceof I||"number"===typeof t[0]||"x"in t)e=i=V(t);else if(e=(t=W(t)).min,i=t.max,!e||!i)return this;return this.min||this.max?(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)):(this.min=e.clone(),this.max=i.clone()),this},getCenter:function(t){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"===typeof t[0]||t instanceof I?V(t):W(t))instanceof D?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=W(t);var e=this.min,i=this.max,a=t.min,s=t.max,n=s.x>=e.x&&a.x<=i.x,o=s.y>=e.y&&a.y<=i.y;return n&&o},overlaps:function(t){t=W(t);var e=this.min,i=this.max,a=t.min,s=t.max,n=s.x>e.x&&a.x<i.x,o=s.y>e.y&&a.y<i.y;return n&&o},isValid:function(){return!(!this.min||!this.max)},pad:function(t){var e=this.min,i=this.max,a=Math.abs(e.x-i.x)*t,s=Math.abs(e.y-i.y)*t;return W(V(e.x-a,e.y-s),V(i.x+a,i.y+s))},equals:function(t){return!!t&&(t=W(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight()))}},E.prototype={extend:function(t){var e,i,a=this._southWest,s=this._northEast;if(t instanceof O)e=t,i=t;else{if(!(t instanceof E))return t?this.extend(Y(t)||X(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return a||s?(a.lat=Math.min(e.lat,a.lat),a.lng=Math.min(e.lng,a.lng),s.lat=Math.max(i.lat,s.lat),s.lng=Math.max(i.lng,s.lng)):(this._southWest=new O(e.lat,e.lng),this._northEast=new O(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,a=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new E(new O(e.lat-a,e.lng-s),new O(i.lat+a,i.lng+s))},getCenter:function(){return new O((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new O(this.getNorth(),this.getWest())},getSouthEast:function(){return new O(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof O||"lat"in t?Y(t):X(t);var e,i,a=this._southWest,s=this._northEast;return t instanceof E?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=a.lat&&i.lat<=s.lat&&e.lng>=a.lng&&i.lng<=s.lng},intersects:function(t){t=X(t);var e=this._southWest,i=this._northEast,a=t.getSouthWest(),s=t.getNorthEast(),n=s.lat>=e.lat&&a.lat<=i.lat,o=s.lng>=e.lng&&a.lng<=i.lng;return n&&o},overlaps:function(t){t=X(t);var e=this._southWest,i=this._northEast,a=t.getSouthWest(),s=t.getNorthEast(),n=s.lat>e.lat&&a.lat<i.lat,o=s.lng>e.lng&&a.lng<i.lng;return n&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=X(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},O.prototype={equals:function(t,e){return!!t&&(t=Y(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+d(this.lat,t)+", "+d(this.lng,t)+")"},distanceTo:function(t){return N.distance(this,Y(t))},wrap:function(){return N.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return X([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new O(this.lat,this.lng,this.alt)}};var R={latLngToPoint:function(t,e){var i=this.projection.project(t),a=this.scale(e);return this.transformation._transform(i,a)},pointToLatLng:function(t,e){var i=this.scale(e),a=this.transformation.untransform(t,i);return this.projection.unproject(a)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new D(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?h(t.lng,this.wrapLng,!0):t.lng;return new O(this.wrapLat?h(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),a=e.lat-i.lat,s=e.lng-i.lng;if(0===a&&0===s)return t;var n=t.getSouthWest(),o=t.getNorthEast();return new E(new O(n.lat-a,n.lng-s),new O(o.lat-a,o.lng-s))}},N=i({},R,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,a=t.lat*i,s=e.lat*i,n=Math.sin((e.lat-t.lat)*i/2),o=Math.sin((e.lng-t.lng)*i/2),r=n*n+Math.cos(a)*Math.cos(s)*o*o,h=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return this.R*h}}),H=6378137,Z={R:H,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,a=Math.max(Math.min(i,t.lat),-i),s=Math.sin(a*e);return new I(this.R*t.lng*e,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(t){var e=180/Math.PI;return new O((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=H*Math.PI;return new D([-t,-t],[t,t])}()};function j(t,e,i,a){if(f(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=a}function U(t,e,i,a){return new j(t,e,i,a)}j.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new I((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var q=i({},N,{code:"EPSG:3857",projection:Z,transformation:function(){var t=.5/(Math.PI*Z.R);return U(t,.5,-t,.5)}()}),G=i({},q,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t,e){var i,a,s,n,o,r,h="";for(i=0,s=t.length;i<s;i++){for(a=0,n=(o=t[i]).length;a<n;a++)h+=(a?"L":"M")+(r=o[a]).x+" "+r.y;h+=e?Dt.svg?"z":"x":""}return h||"M0 0"}var Q=document.documentElement.style,$="ActiveXObject"in window,tt=$&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),it=Vt("webkit"),at=Vt("android"),st=Vt("android 2")||Vt("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=at&&Vt("Google")&&nt<537&&!("AudioNode"in window),rt=!!window.opera,ht=!et&&Vt("chrome"),lt=Vt("gecko")&&!it&&!rt&&!$,dt=!ht&&Vt("safari"),ct=Vt("phantom"),pt="OTransition"in Q,ut=0===navigator.platform.indexOf("Win"),xt=$&&"transition"in Q,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,gt="MozPerspective"in Q,ft=!window.L_DISABLE_3D&&(xt||mt||gt)&&!pt&&!ct,yt="undefined"!==typeof orientation||Vt("mobile"),bt=yt&&it,vt=yt&&mt,_t=!window.PointerEvent&&window.MSPointerEvent,kt=!(!window.PointerEvent&&!_t),Mt="ontouchstart"in window||!!window.TouchEvent,wt=!window.L_NO_TOUCH&&(Mt||kt),Tt=yt&&rt,Pt=yt&&lt,Ct=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,St=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(i){}return t}(),At=!!document.createElement("canvas").getContext,Lt=!(!document.createElementNS||!K("svg").createSVGRect),Bt=!!Lt&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}(),Ft=!Lt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(i){return!1}}(),It=0===navigator.platform.indexOf("Mac"),zt=0===navigator.platform.indexOf("Linux");function Vt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Dt={ie:$,ielt9:tt,edge:et,webkit:it,android:at,android23:st,androidStock:ot,opera:rt,chrome:ht,gecko:lt,safari:dt,phantom:ct,opera12:pt,win:ut,ie3d:xt,webkit3d:mt,gecko3d:gt,any3d:ft,mobile:yt,mobileWebkit:bt,mobileWebkit3d:vt,msPointer:_t,pointer:kt,touch:wt,touchNative:Mt,mobileOpera:Tt,mobileGecko:Pt,retina:Ct,passiveEvents:St,canvas:At,svg:Lt,vml:Ft,inlineSvg:Bt,mac:It,linux:zt},Wt=Dt.msPointer?"MSPointerDown":"pointerdown",Et=Dt.msPointer?"MSPointerMove":"pointermove",Xt=Dt.msPointer?"MSPointerUp":"pointerup",Ot=Dt.msPointer?"MSPointerCancel":"pointercancel",Yt={touchstart:Wt,touchmove:Et,touchend:Xt,touchcancel:Ot},Rt={touchstart:Qt,touchmove:Jt,touchend:Jt,touchcancel:Jt},Nt={},Ht=!1;function Zt(t,e,i){return"touchstart"===e&&Kt(),Rt[e]?(i=Rt[e].bind(this,i),t.addEventListener(Yt[e],i,!1),i):(console.warn("wrong event specified:",e),l)}function jt(t,e,i){Yt[e]?t.removeEventListener(Yt[e],i,!1):console.warn("wrong event specified:",e)}function Ut(t){Nt[t.pointerId]=t}function qt(t){Nt[t.pointerId]&&(Nt[t.pointerId]=t)}function Gt(t){delete Nt[t.pointerId]}function Kt(){Ht||(document.addEventListener(Wt,Ut,!0),document.addEventListener(Et,qt,!0),document.addEventListener(Xt,Gt,!0),document.addEventListener(Ot,Gt,!0),Ht=!0)}function Jt(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var i in e.touches=[],Nt)e.touches.push(Nt[i]);e.changedTouches=[e],t(e)}}function Qt(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ue(e),Jt(t,e)}function $t(t){var e,i,a={};for(i in t)e=t[i],a[i]=e&&e.bind?e.bind(t):e;return t=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var te=200;function ee(t,e){t.addEventListener("dblclick",e);var i,a=0;function s(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var s=Ge(t);if(!s.some((function(t){return t instanceof HTMLLabelElement&&t.attributes.for}))||s.some((function(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement}))){var n=Date.now();n-a<=te?2===++i&&e($t(t)):i=1,a=n}}}else i=t.detail}return t.addEventListener("click",s),{dblclick:e,simDblclick:s}}function ie(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var ae,se,ne,oe,re,he=Te(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),le=Te(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),de="webkitTransition"===le||"OTransition"===le?le+"End":"transitionend";function ce(t){return"string"===typeof t?document.getElementById(t):t}function pe(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var a=document.defaultView.getComputedStyle(t,null);i=a?a[e]:null}return"auto"===i?null:i}function ue(t,e,i){var a=document.createElement(t);return a.className=e||"",i&&i.appendChild(a),a}function xe(t){var e=t.parentNode;e&&e.removeChild(t)}function me(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ge(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function fe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ye(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ke(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function be(t,e){if(void 0!==t.classList)for(var i=p(e),a=0,s=i.length;a<s;a++)t.classList.add(i[a]);else if(!ye(t,e)){var n=ke(t);_e(t,(n?n+" ":"")+e)}}function ve(t,e){void 0!==t.classList?t.classList.remove(e):_e(t,c((" "+ke(t)+" ").replace(" "+e+" "," ")))}function _e(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ke(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function Me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&we(t,e)}function we(t,e){var i=!1,a="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(a)}catch(s){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+a+"(opacity="+e+")"}function Te(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function Pe(t,e,i){var a=e||new I(0,0);t.style[he]=(Dt.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(i?" scale("+i+")":"")}function Ce(t,e){t._leaflet_pos=e,Dt.any3d?Pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Se(t){return t._leaflet_pos||new I(0,0)}if("onselectstart"in document)ae=function(){We(window,"selectstart",Ue)},se=function(){Xe(window,"selectstart",Ue)};else{var Ae=Te(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ae=function(){if(Ae){var t=document.documentElement.style;ne=t[Ae],t[Ae]="none"}},se=function(){Ae&&(document.documentElement.style[Ae]=ne,ne=void 0)}}function Le(){We(window,"dragstart",Ue)}function Be(){Xe(window,"dragstart",Ue)}function Fe(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Ie(),oe=t,re=t.style.outlineStyle,t.style.outlineStyle="none",We(window,"keydown",Ie))}function Ie(){oe&&(oe.style.outlineStyle=re,oe=void 0,re=void 0,Xe(window,"keydown",Ie))}function ze(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ve(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var De={__proto__:null,TRANSFORM:he,TRANSITION:le,TRANSITION_END:de,get:ce,getStyle:pe,create:ue,remove:xe,empty:me,toFront:ge,toBack:fe,hasClass:ye,addClass:be,removeClass:ve,setClass:_e,getClass:ke,setOpacity:Me,testProp:Te,setTransform:Pe,setPosition:Ce,getPosition:Se,get disableTextSelection(){return ae},get enableTextSelection(){return se},disableImageDrag:Le,enableImageDrag:Be,preventOutline:Fe,restoreOutline:Ie,getSizedParentNode:ze,getScale:Ve};function We(t,e,i,a){if(e&&"object"===typeof e)for(var s in e)Re(t,s,e[s],i);else for(var n=0,o=(e=p(e)).length;n<o;n++)Re(t,e[n],i,a);return this}var Ee="_leaflet_events";function Xe(t,e,i,a){if(1===arguments.length)Oe(t),delete t[Ee];else if(e&&"object"===typeof e)for(var s in e)Ne(t,s,e[s],i);else if(e=p(e),2===arguments.length)Oe(t,(function(t){return-1!==y(e,t)}));else for(var n=0,o=e.length;n<o;n++)Ne(t,e[n],i,a);return this}function Oe(t,e){for(var i in t[Ee]){var a=i.split(/\d/)[0];e&&!e(a)||Ne(t,a,null,null,i)}}var Ye={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Re(t,e,i,a){var s=e+o(i)+(a?"_"+o(a):"");if(t[Ee]&&t[Ee][s])return this;var n=function(e){return i.call(a||t,e||window.event)},r=n;!Dt.touchNative&&Dt.pointer&&0===e.indexOf("touch")?n=Zt(t,e,n):Dt.touch&&"dblclick"===e?n=ee(t,n):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ye[e]||e,n,!!Dt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(n=function(e){e=e||window.event,$e(t,e)&&r(e)},t.addEventListener(Ye[e],n,!1)):t.addEventListener(e,r,!1):t.attachEvent("on"+e,n),t[Ee]=t[Ee]||{},t[Ee][s]=n}function Ne(t,e,i,a,s){s=s||e+o(i)+(a?"_"+o(a):"");var n=t[Ee]&&t[Ee][s];if(!n)return this;!Dt.touchNative&&Dt.pointer&&0===e.indexOf("touch")?jt(t,e,n):Dt.touch&&"dblclick"===e?ie(t,n):"removeEventListener"in t?t.removeEventListener(Ye[e]||e,n,!1):t.detachEvent("on"+e,n),t[Ee][s]=null}function He(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ze(t){return Re(t,"wheel",He),this}function je(t){return We(t,"mousedown touchstart dblclick contextmenu",He),t._leaflet_disable_click=!0,this}function Ue(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function qe(t){return Ue(t),He(t),this}function Ge(t){if(t.composedPath)return t.composedPath();for(var e=[],i=t.target;i;)e.push(i),i=i.parentNode;return e}function Ke(t,e){if(!e)return new I(t.clientX,t.clientY);var i=Ve(e),a=i.boundingClientRect;return new I((t.clientX-a.left)/i.x-e.clientLeft,(t.clientY-a.top)/i.y-e.clientTop)}var Je=Dt.linux&&Dt.chrome?window.devicePixelRatio:Dt.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qe(t){return Dt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Je:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function $e(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(a){return!1}return i!==t}var ti={__proto__:null,on:We,off:Xe,stopPropagation:He,disableScrollPropagation:Ze,disableClickPropagation:je,preventDefault:Ue,stop:qe,getPropagationPath:Ge,getMousePosition:Ke,getWheelDelta:Qe,isExternalTarget:$e,addListener:We,removeListener:Xe},ei=F.extend({run:function(t,e,i,a){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=Se(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Ce(this._el,i),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),ii=F.extend({options:{crs:q,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=u(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(Y(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=le&&Dt.any3d&&!Dt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),We(this._proxy,de,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,a){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(Y(t),e,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&!0!==a&&(void 0!==a.animate&&(a.zoom=i({animate:a.animate},a.zoom),a.pan=i({animate:a.animate,duration:a.duration},a.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,a.zoom):this._tryAnimatedPan(t,a.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e,a.pan&&a.pan.noMoveStart),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var a=this.getZoomScale(e),s=this.getSize().divideBy(2),n=(t instanceof I?t:this.latLngToContainerPoint(t)).subtract(s).multiplyBy(1-1/a),o=this.containerPointToLatLng(s.add(n));return this.setView(o,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():X(t);var i=V(e.paddingTopLeft||e.padding||[0,0]),a=V(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(a));if((s="number"===typeof e.maxZoom?Math.min(e.maxZoom,s):s)===1/0)return{center:t.getCenter(),zoom:s};var n=a.subtract(i).divideBy(2),o=this.project(t.getSouthWest(),s),r=this.project(t.getNorthEast(),s);return{center:this.unproject(o.add(r).divideBy(2).add(n),s),zoom:s}},fitBounds:function(t,e){if(!(t=X(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=V(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ei,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){be(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!Dt.any3d)return this.setView(t,e,i);this._stop();var a=this.project(this.getCenter()),s=this.project(t),n=this.getSize(),o=this._zoom;t=Y(t),e=void 0===e?o:e;var r=Math.max(n.x,n.y),h=r*this.getZoomScale(o,e),l=s.distanceTo(a)||1,d=1.42,c=d*d;function p(t){var e=(h*h-r*r+(t?-1:1)*c*c*l*l)/(2*(t?h:r)*c*l),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function u(t){return(Math.exp(t)-Math.exp(-t))/2}function x(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return u(t)/x(t)}var g=p(0);function f(t){return r*(x(g)/x(g+d*t))}function y(t){return r*(x(g)*m(g+d*t)-u(g))/c}function b(t){return 1-Math.pow(1-t,1.5)}var v=Date.now(),_=(p(1)-g)/d,k=i.duration?1e3*i.duration:1e3*_*.8;function M(){var i=(Date.now()-v)/k,n=b(i)*_;i<=1?(this._flyToFrame=T(M,this),this._move(this.unproject(a.add(s.subtract(a).multiplyBy(y(n)/l)),o),this.getScaleZoom(r/f(n),o),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),M.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=X(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),a=this._limitCenter(i,this._zoom,X(t));return i.equals(a)||this.panTo(a,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=V((e=e||{}).paddingTopLeft||e.padding||[0,0]),a=V(e.paddingBottomRight||e.padding||[0,0]),s=this.project(this.getCenter()),n=this.project(t),o=this.getPixelBounds(),r=W([o.min.add(i),o.max.subtract(a)]),h=r.getSize();if(!r.contains(n)){this._enforcingBounds=!0;var l=n.subtract(r.getCenter()),d=r.extend(n).getSize().subtract(h);s.x+=l.x<0?-d.x:d.x,s.y+=l.y<0?-d.y:d.y,this.panTo(this.unproject(s),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),n=e.divideBy(2).round(),o=a.divideBy(2).round(),r=n.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:a})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s(this._handleGeolocationResponse,this),a=s(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,a,t):navigator.geolocation.getCurrentPosition(e,a,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new O(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),a=this._locateOptions;if(a.setView){var s=this.getBoundsZoom(i);this.setView(e,a.maxZoom?Math.min(s,a.maxZoom):s)}var n={latlng:e,bounds:i,timestamp:t.timestamp};for(var o in t.coords)"number"===typeof t.coords[o]&&(n[o]=t.coords[o]);this.fire("locationfound",n)}},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),xe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)xe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=ue("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new E(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=X(t),i=V(i||[0,0]);var a=this.getZoom()||0,s=this.getMinZoom(),n=this.getMaxZoom(),o=t.getNorthWest(),r=t.getSouthEast(),h=this.getSize().subtract(i),l=W(this.project(r,a),this.project(o,a)).getSize(),d=Dt.any3d?this.options.zoomSnap:1,c=h.x/l.x,p=h.y/l.y,u=e?Math.max(c,p):Math.min(c,p);return a=this.getScaleZoom(u,a),d&&(a=Math.round(a/(d/100))*(d/100),a=e?Math.ceil(a/d)*d:Math.floor(a/d)*d),Math.max(s,Math.min(n,a))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new D(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var a=i.zoom(t*i.scale(e));return isNaN(a)?1/0:a},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(Y(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(V(t),e)},layerPointToLatLng:function(t){var e=V(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(Y(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Y(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(X(t))},distance:function(t,e){return this.options.crs.distance(Y(t),Y(e))},containerPointToLayerPoint:function(t){return V(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return V(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(V(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Y(t)))},mouseEventToContainerPoint:function(t){return Ke(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ce(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");We(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Dt.any3d,be(t,"leaflet-container"+(Dt.touch?" leaflet-touch":"")+(Dt.retina?" leaflet-retina":"")+(Dt.ielt9?" leaflet-oldie":"")+(Dt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=pe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&"sticky"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ce(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(t.markerPane,"leaflet-zoom-hide"),be(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,i){Ce(this._mapPane,new I(0,0));var a=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var s=this._zoom!==e;this._moveStart(s,i)._move(t,e)._moveEnd(s),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i,a){void 0===e&&(e=this._zoom);var s=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),a?i&&i.pinch&&this.fire("zoom",i):((s||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Ce(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?Xe:We;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Dt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=T((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,a=[],s="mouseout"===e||"mouseover"===e,n=t.target||t.srcElement,r=!1;n;){if((i=this._targets[o(n)])&&("click"===e||"preclick"===e)&&this._draggableMoved(i)){r=!0;break}if(i&&i.listens(e,!0)){if(s&&!$e(n,t))break;if(a.push(i),s)break}if(n===this._container)break;n=n.parentNode}return a.length||r||s||!this.listens(e,!0)||(a=[this]),a},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var i=t.type;"mousedown"===i&&Fe(e),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,a){if("click"===t.type){var s=i({},t);s.type="preclick",this._fireDOMEvent(s,s.type,a)}var n=this._findEventTargets(t,e);if(a){for(var o=[],r=0;r<a.length;r++)a[r].listens(e,!0)&&o.push(a[r]);n=o.concat(n)}if(n.length){"contextmenu"===e&&Ue(t);var h=n[0],l={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var d=h.getLatLng&&(!h._radius||h._radius<=10);l.containerPoint=d?this.latLngToContainerPoint(h.getLatLng()):this.mouseEventToContainerPoint(t),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=d?h.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(r=0;r<n.length;r++)if(n[r].fire(e,l,!0),l.originalEvent._stopped||!1===n[r].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Se(this._mapPane)||new I(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var a=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(a)},_latLngBoundsToNewLayerBounds:function(t,e,i){var a=this._getNewPixelOrigin(i,e);return W([this.project(t.getSouthWest(),e)._subtract(a),this.project(t.getNorthWest(),e)._subtract(a),this.project(t.getSouthEast(),e)._subtract(a),this.project(t.getNorthEast(),e)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var a=this.project(t,e),s=this.getSize().divideBy(2),n=new D(a.subtract(s),a.add(s)),o=this._getBoundsOffset(n,i,e);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?t:this.unproject(a.add(o),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),a=new D(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(a,e))},_getBoundsOffset:function(t,e,i){var a=W(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),s=a.min.subtract(t.min),n=a.max.subtract(t.max);return new I(this._rebound(s.x,-n.x),this._rebound(s.y,-n.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),a=Dt.any3d?this.options.zoomSnap:1;return a&&(t=Math.round(t/a)*a),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ve(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=ue("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=he,i=this._proxy.style[e];Pe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/a);return!(!0!==i.animate&&!this.getSize().contains(s))&&(T((function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,i,a){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ve(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ai(t,e){return new ii(t,e)}var si=S.extend({options:{position:"topright"},initialize:function(t){u(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),a=t._controlCorners[i];return be(e,"leaflet-control"),-1!==i.indexOf("bottom")?a.insertBefore(e,a.firstChild):a.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),ni=function(t){return new si(t)};ii.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=ue("div",e+"control-container",this._container);function a(a,s){var n=e+a+" "+e+s;t[a+s]=ue("div",n,i)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)xe(this._controlCorners[t]);xe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var oi=si.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,a){return i<a?-1:a<i?1:0}},initialize:function(t,e,i){for(var a in u(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,t)this._addLayer(t[a],a);for(a in e)this._addLayer(e[a],a,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return si.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ve(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ve(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ue("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),je(e),Ze(e);var a=this._section=ue("section",t+"-list");i&&(this._map.on("click",this.collapse,this),We(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var s=this._layersLink=ue("a",t+"-toggle",e);s.href="#",s.title="Layers",s.setAttribute("role","button"),We(s,{keydown:function(t){13===t.keyCode&&this._expandSafely()},click:function(t){Ue(t),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=ue("div",t+"-base",a),this._separator=ue("div",t+"-separator",a),this._overlaysList=ue("div",t+"-overlays",a),e.appendChild(a)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(s((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;me(this._baseLayersList),me(this._overlaysList),this._layerControlInputs=[];var t,e,i,a,s=0;for(i=0;i<this._layers.length;i++)a=this._layers[i],this._addItem(a),e=e||a.overlay,t=t||!a.overlay,s+=a.overlay?0:1;return this.options.hideSingleBase&&(t=t&&s>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=i,a.firstChild},_addItem:function(t){var e,i=document.createElement("label"),a=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=a):e=this._createRadioElement("leaflet-base-layers_"+o(this),a),this._layerControlInputs.push(e),e.layerId=o(t.layer),We(e,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+t.name;var n=document.createElement("span");return i.appendChild(n),n.appendChild(e),n.appendChild(s),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var t,e,i=this._layerControlInputs,a=[],s=[];this._handlingClick=!0;for(var n=i.length-1;n>=0;n--)t=i[n],e=this._getLayer(t.layerId).layer,t.checked?a.push(e):t.checked||s.push(e);for(n=0;n<s.length;n++)this._map.hasLayer(s[n])&&this._map.removeLayer(s[n]);for(n=0;n<a.length;n++)this._map.hasLayer(a[n])||this._map.addLayer(a[n]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,a=this._map.getZoom(),s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&a<e.options.minZoom||void 0!==e.options.maxZoom&&a>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,We(t,"click",Ue),this.expand();var e=this;setTimeout((function(){Xe(t,"click",Ue),e._preventClick=!1}))}}),ri=function(t,e,i){return new oi(t,e,i)},hi=si.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=ue("div",e+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,a,s){var n=ue("a",i,a);return n.innerHTML=t,n.href="#",n.title=e,n.setAttribute("role","button"),n.setAttribute("aria-label",e),je(n),We(n,"click",qe),We(n,"click",s,this),We(n,"click",this._refocusOnMap,this),n},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ve(this._zoomInButton,e),ve(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(be(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(be(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});ii.mergeOptions({zoomControl:!0}),ii.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new hi,this.addControl(this.zoomControl))}));var li=function(t){return new hi(t)},di=si.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=ue("div",e),a=this.options;return this._addScales(a,e+"-line",i),t.on(a.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=ue("div",e,i)),t.imperial&&(this._iScale=ue("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,a,s=3.2808399*t;s>5280?(e=s/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(a=this._getRoundNum(s),this._updateScale(this._iScale,a+" ft",a/s))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),ci=function(t){return new di(t)},pi='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ui=si.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Dt.inlineSvg?pi+" ":"")+"Leaflet</a>"},initialize:function(t){u(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=ue("div","leaflet-control-attribution"),je(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});ii.mergeOptions({attributionControl:!0}),ii.addInitHook((function(){this.options.attributionControl&&(new ui).addTo(this)}));var xi=function(t){return new ui(t)};si.Layers=oi,si.Zoom=hi,si.Scale=di,si.Attribution=ui,ni.layers=ri,ni.zoom=li,ni.scale=ci,ni.attribution=xi;var mi=S.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mi.addTo=function(t,e){return t.addHandler(e,this),this};var gi={Events:B},fi=Dt.touch?"touchstart mousedown":"mousedown",yi=F.extend({options:{clickTolerance:3},initialize:function(t,e,i,a){u(this,a),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(We(this._dragStartTarget,fi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yi._dragging===this&&this.finishDrag(!0),Xe(this._dragStartTarget,fi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ye(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)yi._dragging===this&&this.finishDrag();else if(!(yi._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(yi._dragging=this,this._preventOutline&&Fe(this._element),Le(),ae(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,i=ze(this._element);this._startPoint=new I(e.clientX,e.clientY),this._startPos=Se(this._element),this._parentScale=Ve(i);var a="mousedown"===t.type;We(document,a?"mousemove":"touchmove",this._onMove,this),We(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new I(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ue(t),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Ce(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ve(document.body,"leaflet-dragging"),this._lastTarget&&(ve(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xe(document,"mousemove touchmove",this._onMove,this),Xe(document,"mouseup touchend touchcancel",this._onUp,this),Be(),se();var e=this._moved&&this._moving;this._moving=!1,yi._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function bi(t,e,i){var a,s,n,o,r,h,l,d,c,p=[1,4,2,8];for(s=0,l=t.length;s<l;s++)t[s]._code=Fi(t[s],e);for(o=0;o<4;o++){for(d=p[o],a=[],s=0,n=(l=t.length)-1;s<l;n=s++)r=t[s],h=t[n],r._code&d?h._code&d||((c=Bi(h,r,d,e,i))._code=Fi(c,e),a.push(c)):(h._code&d&&((c=Bi(h,r,d,e,i))._code=Fi(c,e),a.push(c)),a.push(r));t=a}return t}function vi(t,e){var i,a,s,n,o,r,h,l,d;if(!t||0===t.length)throw new Error("latlngs not passed");Vi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var c=Y([0,0]),p=X(t);p.getNorthWest().distanceTo(p.getSouthWest())*p.getNorthEast().distanceTo(p.getNorthWest())<1700&&(c=_i(t));var u=t.length,x=[];for(i=0;i<u;i++){var m=Y(t[i]);x.push(e.project(Y([m.lat-c.lat,m.lng-c.lng])))}for(r=h=l=0,i=0,a=u-1;i<u;a=i++)s=x[i],n=x[a],o=s.y*n.x-n.y*s.x,h+=(s.x+n.x)*o,l+=(s.y+n.y)*o,r+=3*o;d=0===r?x[0]:[h/r,l/r];var g=e.unproject(V(d));return Y([g.lat+c.lat,g.lng+c.lng])}function _i(t){for(var e=0,i=0,a=0,s=0;s<t.length;s++){var n=Y(t[s]);e+=n.lat,i+=n.lng,a++}return Y([e/a,i/a])}var ki,Mi={__proto__:null,clipPolygon:bi,polygonCenter:vi,centroid:_i};function wi(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=Ci(t=Ai(t,i),i)}function Ti(t,e,i){return Math.sqrt(zi(t,e,i,!0))}function Pi(t,e,i){return zi(t,e,i)}function Ci(t,e){var i=t.length,a=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(i);a[0]=a[i-1]=1,Si(t,a,e,0,i-1);var s,n=[];for(s=0;s<i;s++)a[s]&&n.push(t[s]);return n}function Si(t,e,i,a,s){var n,o,r,h=0;for(o=a+1;o<=s-1;o++)(r=zi(t[o],t[a],t[s],!0))>h&&(n=o,h=r);h>i&&(e[n]=1,Si(t,e,i,a,n),Si(t,e,i,n,s))}function Ai(t,e){for(var i=[t[0]],a=1,s=0,n=t.length;a<n;a++)Ii(t[a],t[s])>e&&(i.push(t[a]),s=a);return s<n-1&&i.push(t[n-1]),i}function Li(t,e,i,a,s){var n,o,r,h=a?ki:Fi(t,i),l=Fi(e,i);for(ki=l;;){if(!(h|l))return[t,e];if(h&l)return!1;r=Fi(o=Bi(t,e,n=h||l,i,s),i),n===h?(t=o,h=r):(e=o,l=r)}}function Bi(t,e,i,a,s){var n,o,r=e.x-t.x,h=e.y-t.y,l=a.min,d=a.max;return 8&i?(n=t.x+r*(d.y-t.y)/h,o=d.y):4&i?(n=t.x+r*(l.y-t.y)/h,o=l.y):2&i?(n=d.x,o=t.y+h*(d.x-t.x)/r):1&i&&(n=l.x,o=t.y+h*(l.x-t.x)/r),new I(n,o,s)}function Fi(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Ii(t,e){var i=e.x-t.x,a=e.y-t.y;return i*i+a*a}function zi(t,e,i,a){var s,n=e.x,o=e.y,r=i.x-n,h=i.y-o,l=r*r+h*h;return l>0&&((s=((t.x-n)*r+(t.y-o)*h)/l)>1?(n=i.x,o=i.y):s>0&&(n+=r*s,o+=h*s)),r=t.x-n,h=t.y-o,a?r*r+h*h:new I(n,o)}function Vi(t){return!f(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function Di(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Vi(t)}function Wi(t,e){var i,a,s,n,o,r,h,l;if(!t||0===t.length)throw new Error("latlngs not passed");Vi(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var d=Y([0,0]),c=X(t);c.getNorthWest().distanceTo(c.getSouthWest())*c.getNorthEast().distanceTo(c.getNorthWest())<1700&&(d=_i(t));var p=t.length,u=[];for(i=0;i<p;i++){var x=Y(t[i]);u.push(e.project(Y([x.lat-d.lat,x.lng-d.lng])))}for(i=0,a=0;i<p-1;i++)a+=u[i].distanceTo(u[i+1])/2;if(0===a)l=u[0];else for(i=0,n=0;i<p-1;i++)if(o=u[i],r=u[i+1],(n+=s=o.distanceTo(r))>a){h=(n-a)/s,l=[r.x-h*(r.x-o.x),r.y-h*(r.y-o.y)];break}var m=e.unproject(V(l));return Y([m.lat+d.lat,m.lng+d.lng])}var Ei={__proto__:null,simplify:wi,pointToSegmentDistance:Ti,closestPointOnSegment:Pi,clipSegment:Li,_getEdgeIntersection:Bi,_getBitCode:Fi,_sqClosestPointOnSegment:zi,isFlat:Vi,_flat:Di,polylineCenter:Wi},Xi={project:function(t){return new I(t.lng,t.lat)},unproject:function(t){return new O(t.y,t.x)},bounds:new D([-180,-90],[180,90])},Oi={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,a=t.lat*e,s=this.R_MINOR/i,n=Math.sqrt(1-s*s),o=n*Math.sin(a),r=Math.tan(Math.PI/4-a/2)/Math.pow((1-o)/(1+o),n/2);return a=-i*Math.log(Math.max(r,1e-10)),new I(t.lng*e*i,a)},unproject:function(t){for(var e,i=180/Math.PI,a=this.R,s=this.R_MINOR/a,n=Math.sqrt(1-s*s),o=Math.exp(-t.y/a),r=Math.PI/2-2*Math.atan(o),h=0,l=.1;h<15&&Math.abs(l)>1e-7;h++)e=n*Math.sin(r),e=Math.pow((1-e)/(1+e),n/2),r+=l=Math.PI/2-2*Math.atan(o*e)-r;return new O(r*i,t.x*i/a)}},Yi={__proto__:null,LonLat:Xi,Mercator:Oi,SphericalMercator:Z},Ri=i({},N,{code:"EPSG:3395",projection:Oi,transformation:function(){var t=.5/(Math.PI*Oi.R);return U(t,.5,-t,.5)}()}),Ni=i({},N,{code:"EPSG:4326",projection:Xi,transformation:U(1/180,1,-1/180,.5)}),Hi=i({},R,{projection:Xi,transformation:U(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,a=e.lat-t.lat;return Math.sqrt(i*i+a*a)},infinite:!0});R.Earth=N,R.EPSG3395=Ri,R.EPSG3857=q,R.EPSG900913=G,R.EPSG4326=Ni,R.Simple=Hi;var Zi=F.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});ii.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return o(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?f(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var a in this._zoomBoundLayers){var s=this._zoomBoundLayers[a].options;t=void 0===s.minZoom?t:Math.min(t,s.minZoom),e=void 0===s.maxZoom?e:Math.max(e,s.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ji=Zi.extend({initialize:function(t,e){var i,a;if(u(this,e),this._layers={},t)for(i=0,a=t.length;i<a;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"===typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,a=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,a);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),Ui=function(t,e){return new ji(t,e)},qi=ji.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ji.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ji.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new E;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Gi=function(t,e){return new qi(t,e)},Ki=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){u(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(a,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(a.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),a},_setIconStyles:function(t,e){var i=this.options,a=i[e+"Size"];"number"===typeof a&&(a=[a,a]);var s=V(a),n=V("shadow"===e&&i.shadowAnchor||i.iconAnchor||s&&s.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),n&&(t.style.marginLeft=-n.x+"px",t.style.marginTop=-n.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Dt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ji(t){return new Ki(t)}var Qi=Ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!==typeof Qi.imagePath&&(Qi.imagePath=this._detectIconPath()),(this.options.imagePath||Qi.imagePath)+Ki.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,i){var a=e.exec(t);return a&&a[i]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=ue("div","leaflet-default-icon-path",document.body),e=pe(t,"background-image")||pe(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),$i=mi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new yi(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ve(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,a=this._marker.options.autoPanSpeed,s=this._marker.options.autoPanPadding,n=Se(e._icon),o=i.getPixelBounds(),r=i.getPixelOrigin(),h=W(o.min._subtract(r).add(s),o.max._subtract(r).subtract(s));if(!h.contains(n)){var l=V((Math.max(h.max.x,n.x)-h.max.x)/(o.max.x-h.max.x)-(Math.min(h.min.x,n.x)-h.min.x)/(o.min.x-h.min.x),(Math.max(h.max.y,n.y)-h.max.y)/(o.max.y-h.max.y)-(Math.min(h.min.y,n.y)-h.min.y)/(o.min.y-h.min.y)).multiplyBy(a);i.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),Ce(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=T(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,a=Se(e._icon),s=e._map.layerPointToLatLng(a);i&&Ce(i,a),e._latlng=s,t.latlng=s,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ta=Zi.extend({options:{icon:new Qi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){u(this,e),this._latlng=Y(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=Y(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),a=!1;i!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),be(i,e),t.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&We(i,"focus",this._panOnFocus,this);var s=t.icon.createShadow(this._shadow),n=!1;s!==this._shadow&&(this._removeShadow(),n=!0),s&&(be(s,e),s.alt=""),this._shadow=s,t.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&n&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(this._icon,"focus",this._panOnFocus,this),xe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Ce(this._icon,t),this._shadow&&Ce(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$i)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $i(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Me(this._icon,t),this._shadow&&Me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,i=e.iconSize?V(e.iconSize):V(0,0),a=e.iconAnchor?V(e.iconAnchor):V(0,0);t.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:i.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ea(t,e){return new ta(t,e)}var ia=Zi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return u(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),aa=ia.extend({options:{fill:!0,radius:10},initialize:function(t,e){u(this,e),this._latlng=Y(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=Y(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ia.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),a=[t+i,e+i];this._pxBounds=new D(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sa(t,e){return new aa(t,e)}var na=aa.extend({initialize:function(t,e,a){if("number"===typeof e&&(e=i({},a,{radius:e})),u(this,e),this._latlng=Y(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new E(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ia.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,a=i.options.crs;if(a.distance===N.distance){var s=Math.PI/180,n=this._mRadius/N.R/s,o=i.project([e+n,t]),r=i.project([e-n,t]),h=o.add(r).divideBy(2),l=i.unproject(h).lat,d=Math.acos((Math.cos(n*s)-Math.sin(e*s)*Math.sin(l*s))/(Math.cos(e*s)*Math.cos(l*s)))/s;(isNaN(d)||0===d)&&(d=n/Math.cos(Math.PI/180*e)),this._point=h.subtract(i.getPixelOrigin()),this._radius=isNaN(d)?0:h.x-i.project([l,t-d]).x,this._radiusY=h.y-o.y}else{var c=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(c).x}this._updateBounds()}});function oa(t,e,i){return new na(t,e,i)}var ra=ia.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){u(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,a=1/0,s=null,n=zi,o=0,r=this._parts.length;o<r;o++)for(var h=this._parts[o],l=1,d=h.length;l<d;l++){var c=n(t,e=h[l-1],i=h[l],!0);c<a&&(a=c,s=n(t,e,i))}return s&&(s.distance=Math.sqrt(a)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=Y(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new E,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Vi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Vi(t),a=0,s=t.length;a<s;a++)i?(e[a]=Y(t[a]),this._bounds.extend(e[a])):e[a]=this._convertLatLngs(t[a]);return e},_project:function(){var t=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new I(t,t);this._rawPxBounds&&(this._pxBounds=new D([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,i){var a,s,n=t[0]instanceof O,o=t.length;if(n){for(s=[],a=0;a<o;a++)s[a]=this._map.latLngToLayerPoint(t[a]),i.extend(s[a]);e.push(s)}else for(a=0;a<o;a++)this._projectLatlngs(t[a],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,a,s,n,o,r,h=this._parts;for(e=0,a=0,s=this._rings.length;e<s;e++)for(i=0,n=(r=this._rings[e]).length;i<n-1;i++)(o=Li(r[i],r[i+1],t,i,!0))&&(h[a]=h[a]||[],h[a].push(o[0]),o[1]===r[i+1]&&i!==n-2||(h[a].push(o[1]),a++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,a=t.length;i<a;i++)t[i]=wi(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,a,s,n,o,r,h=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,n=this._parts.length;i<n;i++)for(a=0,s=(o=(r=this._parts[i]).length)-1;a<o;s=a++)if((e||0!==a)&&Ti(t,r[s],r[a])<=h)return!0;return!1}});function ha(t,e){return new ra(t,e)}ra._flat=Di;var la=ra.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vi(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=ra.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof O&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){ra.prototype._setLatLngs.call(this,t),Vi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Vi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new I(e,e);if(t=new D(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var a,s=0,n=this._rings.length;s<n;s++)(a=bi(this._rings[s],t,!0)).length&&this._parts.push(a)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,a,s,n,o,r,h,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(s=0,r=this._parts.length;s<r;s++)for(n=0,o=(h=(e=this._parts[s]).length)-1;n<h;o=n++)i=e[n],a=e[o],i.y>t.y!==a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(l=!l);return l||ra.prototype._containsPoint.call(this,t,!0)}});function da(t,e){return new la(t,e)}var ca=qi.extend({initialize:function(t,e){u(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,a,s=f(t)?t:t.features;if(s){for(e=0,i=s.length;e<i;e++)((a=s[e]).geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var n=this.options;if(n.filter&&!n.filter(t))return this;var o=pa(t,n);return o?(o.feature=ba(t),o.defaultOptions=o.options,this.resetStyle(o),n.onEachFeature&&n.onEachFeature(t,o),this.addLayer(o)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function pa(t,e){var i,a,s,n,o="Feature"===t.type?t.geometry:t,r=o?o.coordinates:null,h=[],l=e&&e.pointToLayer,d=e&&e.coordsToLatLng||xa;if(!r&&!o)return null;switch(o.type){case"Point":return ua(l,t,i=d(r),e);case"MultiPoint":for(s=0,n=r.length;s<n;s++)i=d(r[s]),h.push(ua(l,t,i,e));return new qi(h);case"LineString":case"MultiLineString":return a=ma(r,"LineString"===o.type?0:1,d),new ra(a,e);case"Polygon":case"MultiPolygon":return a=ma(r,"Polygon"===o.type?1:2,d),new la(a,e);case"GeometryCollection":for(s=0,n=o.geometries.length;s<n;s++){var c=pa({geometry:o.geometries[s],type:"Feature",properties:t.properties},e);c&&h.push(c)}return new qi(h);case"FeatureCollection":for(s=0,n=o.features.length;s<n;s++){var p=pa(o.features[s],e);p&&h.push(p)}return new qi(h);default:throw new Error("Invalid GeoJSON object.")}}function ua(t,e,i,a){return t?t(e,i):new ta(i,a&&a.markersInheritOptions&&a)}function xa(t){return new O(t[1],t[0],t[2])}function ma(t,e,i){for(var a,s=[],n=0,o=t.length;n<o;n++)a=e?ma(t[n],e-1,i):(i||xa)(t[n]),s.push(a);return s}function ga(t,e){return void 0!==(t=Y(t)).alt?[d(t.lng,e),d(t.lat,e),d(t.alt,e)]:[d(t.lng,e),d(t.lat,e)]}function fa(t,e,i,a){for(var s=[],n=0,o=t.length;n<o;n++)s.push(e?fa(t[n],Vi(t[n])?0:e-1,i,a):ga(t[n],a));return!e&&i&&s.length>0&&s.push(s[0].slice()),s}function ya(t,e){return t.feature?i({},t.feature,{geometry:e}):ba(e)}function ba(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var va={toGeoJSON:function(t){return ya(this,{type:"Point",coordinates:ga(this.getLatLng(),t)})}};function _a(t,e){return new ca(t,e)}ta.include(va),na.include(va),aa.include(va),ra.include({toGeoJSON:function(t){var e=!Vi(this._latlngs);return ya(this,{type:(e?"Multi":"")+"LineString",coordinates:fa(this._latlngs,e?1:0,!1,t)})}}),la.include({toGeoJSON:function(t){var e=!Vi(this._latlngs),i=e&&!Vi(this._latlngs[0]),a=fa(this._latlngs,i?2:e?1:0,!0,t);return e||(a=[a]),ya(this,{type:(i?"Multi":"")+"Polygon",coordinates:a})}}),ji.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),ya(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,a=[];return this.eachLayer((function(e){if(e.toGeoJSON){var s=e.toGeoJSON(t);if(i)a.push(s.geometry);else{var n=ba(s);"FeatureCollection"===n.type?a.push.apply(a,n.features):a.push(n)}}})),i?ya(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});var ka=_a,Ma=Zi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=X(e),u(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ge(this._image),this},bringToBack:function(){return this._map&&fe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=X(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ue("img");be(e,"leaflet-image-layer"),this._zoomAnimated&&be(e,"leaflet-zoom-animated"),this.options.className&&be(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=s(this.fire,this,"load"),e.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Pe(this._image,i,e)},_reset:function(){var t=this._image,e=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Ce(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){Me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),wa=function(t,e,i){return new Ma(t,e,i)},Ta=Ma.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ue("video");if(be(e,"leaflet-image-layer"),this._zoomAnimated&&be(e,"leaflet-zoom-animated"),this.options.className&&be(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=s(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),a=[],n=0;n<i.length;n++)a.push(i[n].src);this._url=i.length>0?a:[e.src]}else{f(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var r=ue("source");r.src=this._url[o],e.appendChild(r)}}}});function Pa(t,e,i){return new Ta(t,e,i)}var Ca=Ma.extend({_initImage:function(){var t=this._image=this._url;be(t,"leaflet-image-layer"),this._zoomAnimated&&be(t,"leaflet-zoom-animated"),this.options.className&&be(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});function Sa(t,e,i){return new Ca(t,e,i)}var Aa=Zi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof O||f(t))?(this._latlng=Y(t),u(this,e)):(u(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Me(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Me(this._container,0),this._removeTimeout=setTimeout(s(xe,void 0,this._container),200)):xe(this._container),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Y(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ge(this._container),this},bringToBack:function(){return this._map&&fe(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof qi){e=null;var i=this._source._layers;for(var a in i)if(i[a]._map){e=i[a];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=V(this.options.offset),i=this._getAnchor();this._zoomAnimated?Ce(this._container,t.add(i)):e=e.add(t).add(i);var a=this._containerBottom=-e.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=a+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}});ii.include({_initOverlay:function(t,e,i,a){var s=e;return s instanceof t||(s=new t(a).setContent(e)),i&&s.setLatLng(i),s}}),Zi.include({_initOverlay:function(t,e,i,a){var s=i;return s instanceof t?(u(s,a),s._source=this):(s=e&&!a?e:new t(a,this)).setContent(i),s}});var La=Aa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Aa.prototype.openOn.call(this,t)},onAdd:function(t){Aa.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ia||this._source.on("preclick",He))},onRemove:function(t){Aa.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ia||this._source.off("preclick",He))},getEvents:function(){var t=Aa.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=ue("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=ue("div",t+"-content-wrapper",e);if(this._contentNode=ue("div",t+"-content",i),je(e),Ze(this._contentNode),We(e,"contextmenu",He),this._tipContainer=ue("div",t+"-tip-container",e),this._tip=ue("div",t+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=ue("a",t+"-close-button",e);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',We(a,"click",(function(t){Ue(t),this.close()}),this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var a=t.offsetHeight,s=this.options.maxHeight,n="leaflet-popup-scrolled";s&&a>s?(e.height=s+"px",be(t,n)):ve(t,n),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Ce(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var t=this._map,e=parseInt(pe(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,a=this._containerWidth,s=new I(this._containerLeft,-i-this._containerBottom);s._add(Se(this._container));var n=t.layerPointToContainerPoint(s),o=V(this.options.autoPanPadding),r=V(this.options.autoPanPaddingTopLeft||o),h=V(this.options.autoPanPaddingBottomRight||o),l=t.getSize(),d=0,c=0;n.x+a+h.x>l.x&&(d=n.x+a-l.x+h.x),n.x-d-r.x<0&&(d=n.x-r.x),n.y+i+h.y>l.y&&(c=n.y+i-l.y+h.y),n.y-c-r.y<0&&(c=n.y-r.y),(d||c)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([d,c]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ba=function(t,e){return new La(t,e)};ii.mergeOptions({closePopupOnClick:!0}),ii.include({openPopup:function(t,e,i){return this._initOverlay(La,t,e,i).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Zi.include({bindPopup:function(t,e){return this._popup=this._initOverlay(La,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof qi||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){qe(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof ia?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Fa=Aa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Aa.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Aa.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Aa.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ue("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,i,a=this._map,s=this._container,n=a.latLngToContainerPoint(a.getCenter()),o=a.layerPointToContainerPoint(t),r=this.options.direction,h=s.offsetWidth,l=s.offsetHeight,d=V(this.options.offset),c=this._getAnchor();"top"===r?(e=h/2,i=l):"bottom"===r?(e=h/2,i=0):"center"===r?(e=h/2,i=l/2):"right"===r?(e=0,i=l/2):"left"===r?(e=h,i=l/2):o.x<n.x?(r="right",e=0,i=l/2):(r="left",e=h+2*(d.x+c.x),i=l/2),t=t.subtract(V(e,i,!0)).add(d).add(c),ve(s,"leaflet-tooltip-right"),ve(s,"leaflet-tooltip-left"),ve(s,"leaflet-tooltip-top"),ve(s,"leaflet-tooltip-bottom"),be(s,"leaflet-tooltip-"+r),Ce(s,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ia=function(t,e){return new Fa(t,e)};ii.include({openTooltip:function(t,e,i){return this._initOverlay(Fa,t,e,i).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Zi.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fa,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof qi||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e="function"===typeof t.getElement&&t.getElement();e&&(We(e,"focus",(function(){this._tooltip._source=t,this.openTooltip()}),this),We(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e="function"===typeof t.getElement&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",(function(){e._openOnceFlag=!1,e._openTooltip(t)}))}else this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,a=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),a=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(a)}});var za=Ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(me(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var a=V(i.bgPos);e.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Va(t){return new za(t)}Ki.Default=Qi;var Da=Zi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Dt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){u(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),xe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ge(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=r(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof I?t:new I(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,a=-t(-1/0,1/0),s=0,n=i.length;s<n;s++)e=i[s].style.zIndex,i[s]!==this._container&&e&&(a=t(a,+e));isFinite(a)&&(this.options.zIndex=a+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Dt.ielt9){Me(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var a in this._tiles){var s=this._tiles[a];if(s.current&&s.loaded){var n=Math.min(1,(t-s.loaded)/200);Me(s.el,n),n<1?e=!0:(s.active?i=!0:this._onOpaqueTile(s),s.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(P(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=ue("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(xe(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var a=this._levels[t],s=this._map;return a||((a=this._levels[t]={}).el=ue("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=e,a.origin=s.project(s.unproject(s.getPixelOrigin()),t).round(),a.zoom=t,this._setZoomTransform(a,s.getCenter(),s.getZoom()),l(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var a=e.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)xe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,a){var s=Math.floor(t/2),n=Math.floor(e/2),o=i-1,r=new I(+s,+n);r.z=+o;var h=this._tileCoordsToKey(r),l=this._tiles[h];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),o>a&&this._retainParent(s,n,o,a))},_retainChildren:function(t,e,i,a){for(var s=2*t;s<2*t+2;s++)for(var n=2*e;n<2*e+2;n++){var o=new I(s,n);o.z=i+1;var r=this._tileCoordsToKey(o),h=this._tiles[r];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),i+1<a&&this._retainChildren(s,n,i+1,a))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,a){var s=Math.round(e);s=void 0!==this.options.maxZoom&&s>this.options.maxZoom||void 0!==this.options.minZoom&&s<this.options.minZoom?void 0:this._clampZoom(s);var n=this.options.updateWhenZooming&&s!==this._tileZoom;a&&!n||(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==s&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var a=this._map.getZoomScale(i,t.zoom),s=t.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(e,i)).round();Dt.any3d?Pe(t.el,s,a):Ce(t.el,s)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),a=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],a).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],a).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],a).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],a).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),a=e.getZoomScale(i,this._tileZoom),s=e.project(t,this._tileZoom).floor(),n=e.getSize().divideBy(2*a);return new D(s.subtract(n),s.add(n))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var a=this._getTiledPixelBounds(t),s=this._pxBoundsToTileRange(a),n=s.getCenter(),o=[],r=this.options.keepBuffer,h=new D(s.getBottomLeft().subtract([r,-r]),s.getTopRight().add([r,-r]));if(!(isFinite(s.min.x)&&isFinite(s.min.y)&&isFinite(s.max.x)&&isFinite(s.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var d=this._tiles[l].coords;d.z===this._tileZoom&&h.contains(new I(d.x,d.y))||(this._tiles[l].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var c=s.min.y;c<=s.max.y;c++)for(var p=s.min.x;p<=s.max.x;p++){var u=new I(p,c);if(u.z=this._tileZoom,this._isValidTile(u)){var x=this._tiles[this._tileCoordsToKey(u)];x?x.current=!0:o.push(u)}}if(o.sort((function(t,e){return t.distanceTo(n)-e.distanceTo(n)})),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(p=0;p<o.length;p++)this._addTile(o[p],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(t);return X(this.options.bounds).overlaps(a)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),a=t.scaleBy(i),s=a.add(i);return[e.unproject(a,t.z),e.unproject(s,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new E(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new I(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(xe(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){be(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,Dt.ielt9&&this.options.opacity<1&&Me(t,this.options.opacity)},_addTile:function(t,e){var i=this._getTilePos(t),a=this._tileCoordsToKey(t),n=this.createTile(this._wrapCoords(t),s(this._tileReady,this,t));this._initTile(n),this.createTile.length<2&&T(s(this._tileReady,this,t,null,n)),Ce(n,i),this._tiles[a]={el:n,coords:t,current:!0},e.appendChild(n),this.fire("tileloadstart",{tile:n,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var a=this._tileCoordsToKey(t);(i=this._tiles[a])&&(i.loaded=+new Date,this._map._fadeAnimated?(Me(i.el,0),P(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(be(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Dt.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new I(this._wrapX?h(t.x,this._wrapX):t.x,this._wrapY?h(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new D(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Wa(t){return new Da(t)}var Ea=Da.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=u(this,e)).detectRetina&&Dt.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return We(i,"load",s(this._tileOnLoad,this,e,i)),We(i,"error",s(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:Dt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=a),e["-y"]=a}return g(this._url,i(e,this.options))},_tileOnLoad:function(t,e){Dt.ielt9?setTimeout(s(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var a=this.options.errorTileUrl;a&&e.getAttribute("src")!==a&&(e.src=a),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,!e.complete)){e.src=b;var i=this._tiles[t].coords;xe(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:i})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",b),Da.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==b))return Da.prototype._tileReady.call(this,t,e,i)}});function Xa(t,e){return new Ea(t,e)}var Oa=Ea.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var a=i({},this.defaultWmsParams);for(var s in e)s in this.options||(a[s]=e[s]);var n=(e=u(this,e)).detectRetina&&Dt.retina?2:1,o=this.getTileSize();a.width=o.x*n,a.height=o.y*n,this.wmsParams=a},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Ea.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,a=W(i.project(e[0]),i.project(e[1])),s=a.min,n=a.max,o=(this._wmsVersion>=1.3&&this._crs===Ni?[s.y,s.x,n.y,n.x]:[s.x,s.y,n.x,n.y]).join(","),r=Ea.prototype.getTileUrl.call(this,t);return r+x(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});function Ya(t,e){return new Oa(t,e)}Ea.WMS=Oa,Xa.wms=Ya;var Ra=Zi.extend({options:{padding:.1},initialize:function(t){u(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,e),n=a.multiplyBy(-i).add(s).subtract(this._map._getNewPixelOrigin(t,e));Dt.any3d?Pe(this._container,n,i):Ce(this._container,n)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new D(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Na=Ra.extend({options:{tolerance:0},getEvents:function(){var t=Ra.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ra.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");We(t,"mousemove",this._onMouseMove,this),We(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),We(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,xe(this._container),Xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ra.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),a=Dt.retina?2:1;Ce(e,t.min),e.width=a*i.x,e.height=a*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",Dt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ra.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,a=e.prev;i?i.prev=a:this._drawLast=a,a?a.next=i:this._drawFirst=i,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,i,a=t.options.dashArray.split(/[, ]+/),s=[];for(i=0;i<a.length;i++){if(e=Number(a[i]),isNaN(e))return;s.push(e)}t.options._dashArray=s}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)t=a.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,a,s,n,o=t._parts,r=o.length,h=this._ctx;if(r){for(h.beginPath(),i=0;i<r;i++){for(a=0,s=o[i].length;a<s;a++)n=o[i][a],h[a?"lineTo":"moveTo"](n.x,n.y);e&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,a=Math.max(Math.round(t._radius),1),s=(Math.max(Math.round(t._radiusY),1)||a)/a;1!==s&&(i.save(),i.scale(1,s)),i.beginPath(),i.arc(e.x,e.y/s,a,0,2*Math.PI,!1),1!==s&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,a=this._map.mouseEventToLayerPoint(t),s=this._drawFirst;s;s=s.next)(e=s.layer).options.interactive&&e._containsPoint(a)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(i=e);this._fireEvent(!!i&&[i],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ve(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,a,n=this._drawFirst;n;n=n.next)(i=n.layer).options.interactive&&i._containsPoint(e)&&(a=i);a!==this._hoveredLayer&&(this._handleMouseOut(t),a&&(be(this._container,"leaflet-interactive"),this._fireEvent([a],t,"mouseover"),this._hoveredLayer=a)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(s((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,a=e.prev;i&&(i.prev=a,a?a.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,a=e.prev;a&&(a.next=i,i?i.prev=a:a&&(this._drawLast=a),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Ha(t){return Dt.canvas?new Na(t):null}var Za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ja={_initContainer:function(){this._container=ue("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ra.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Za("shape");be(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Za("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;xe(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,a=t.options,s=t._container;s.stroked=!!a.stroke,s.filled=!!a.fill,a.stroke?(e||(e=t._stroke=Za("stroke")),s.appendChild(e),e.weight=a.weight+"px",e.color=a.color,e.opacity=a.opacity,a.dashArray?e.dashStyle=f(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=a.lineCap.replace("butt","flat"),e.joinstyle=a.lineJoin):e&&(s.removeChild(e),t._stroke=null),a.fill?(i||(i=t._fill=Za("fill")),s.appendChild(i),i.color=a.fillColor||a.color,i.opacity=a.fillOpacity):i&&(s.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),a=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+a+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ge(t._container)},_bringToBack:function(t){fe(t._container)}},Ua=Dt.vml?Za:K,qa=Ra.extend({_initContainer:function(){this._container=Ua("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ua("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xe(this._container),Xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ra.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Ce(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Ua("path");t.options.className&&be(e,t.options.className),t.options.interactive&&be(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){xe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,J(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),a="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",s=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+a+2*i+",0 "+a+2*-i+",0 ";this._setPath(t,s)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ge(t._path)},_bringToBack:function(t){fe(t._path)}});function Ga(t){return Dt.svg||Dt.vml?new qa(t):null}Dt.vml&&qa.include(ja),ii.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Ha(t)||Ga(t)}});var Ka=la.extend({initialize:function(t,e){la.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=X(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ja(t,e){return new Ka(t,e)}qa.create=Ua,qa.pointsToPath=J,ca.geometryToLayer=pa,ca.coordsToLatLng=xa,ca.coordsToLatLngs=ma,ca.latLngToCoords=ga,ca.latLngsToCoords=fa,ca.getFeature=ya,ca.asFeature=ba,ii.mergeOptions({boxZoom:!0});var Qa=mi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){We(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),ae(),Le(),this._startPoint=this._map.mouseEventToContainerPoint(t),We(document,{contextmenu:qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ue("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new D(this._point,this._startPoint),i=e.getSize();Ce(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(xe(this._box),ve(this._container,"leaflet-crosshair")),se(),Be(),Xe(document,{contextmenu:qe,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var e=new E(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ii.addInitHook("addHandler","boxZoom",Qa),ii.mergeOptions({doubleClickZoom:!0});var $a=mi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),a=e.options.zoomDelta,s=t.originalEvent.shiftKey?i-a:i+a;"center"===e.options.doubleClickZoom?e.setZoom(s):e.setZoomAround(t.containerPoint,s)}});ii.addInitHook("addHandler","doubleClickZoom",$a),ii.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ts=mi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new yi(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ve(this._map._container,"leaflet-grab"),ve(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=X(this._map.options.maxBounds);this._offsetLimit=W(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,a=this._draggable._newPos.x,s=(a-e+i)%t+e-i,n=(a+e+i)%t-e-i,o=Math.abs(s+i)<Math.abs(n+i)?s:n;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(t){var e=this._map,i=e.options,a=!i.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),a)e.fire("moveend");else{this._prunePositions(+new Date);var s=this._lastPos.subtract(this._positions[0]),n=(this._lastTime-this._times[0])/1e3,o=i.easeLinearity,r=s.multiplyBy(o/n),h=r.distanceTo([0,0]),l=Math.min(i.inertiaMaxSpeed,h),d=r.multiplyBy(l/h),c=l/(i.inertiaDeceleration*o),p=d.multiplyBy(-c/2).round();p.x||p.y?(p=e._limitOffset(p,e.options.maxBounds),T((function(){e.panBy(p,{duration:c,easeLinearity:o,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});ii.addInitHook("addHandler","dragging",ts),ii.mergeOptions({keyboard:!0,keyboardPanDelta:80});var es=mi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),We(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,a=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(a,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,a=this._panKeys={},s=this.keyCodes;for(e=0,i=s.left.length;e<i;e++)a[s.left[e]]=[-1*t,0];for(e=0,i=s.right.length;e<i;e++)a[s.right[e]]=[t,0];for(e=0,i=s.down.length;e<i;e++)a[s.down[e]]=[0,t];for(e=0,i=s.up.length;e<i;e++)a[s.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,a=this._zoomKeys={},s=this.keyCodes;for(e=0,i=s.zoomIn.length;e<i;e++)a[s.zoomIn[e]]=t;for(e=0,i=s.zoomOut.length;e<i;e++)a[s.zoomOut[e]]=-t},_addHooks:function(){We(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,a=this._map;if(i in this._panKeys){if(!a._panAnim||!a._panAnim._inProgress)if(e=this._panKeys[i],t.shiftKey&&(e=V(e).multiplyBy(3)),a.options.maxBounds&&(e=a._limitOffset(V(e),a.options.maxBounds)),a.options.worldCopyJump){var s=a.wrapLatLng(a.unproject(a.project(a.getCenter()).add(e)));a.panTo(s)}else a.panBy(e)}else if(i in this._zoomKeys)a.setZoom(a.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!a._popup||!a._popup.options.closeOnEscapeKey)return;a.closePopup()}qe(t)}}});ii.addInitHook("addHandler","keyboard",es),ii.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var is=mi.extend({addHooks:function(){We(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Qe(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var a=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),a),qe(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var a=this._delta/(4*this._map.options.wheelPxPerZoomLevel),s=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,n=i?Math.ceil(s/i)*i:s,o=t._limitZoom(e+(this._delta>0?n:-n))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});ii.addInitHook("addHandler","scrollWheelZoom",is);var as=600;ii.mergeOptions({tapHold:Dt.touchNative&&Dt.safari&&Dt.mobile,tapTolerance:15});var ss=mi.extend({addHooks:function(){We(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new I(e.clientX,e.clientY),this._holdTimeout=setTimeout(s((function(){this._cancel(),this._isTapValid()&&(We(document,"touchend",Ue),We(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),as),We(document,"touchend touchcancel contextmenu",this._cancel,this),We(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Xe(document,"touchend",Ue),Xe(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new I(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var i=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});i._simulated=!0,e.target.dispatchEvent(i)}});ii.addInitHook("addHandler","tapHold",ss),ii.mergeOptions({touchZoom:Dt.touch,bounceAtZoomLimits:!0});var ns=mi.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),We(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(a)._divideBy(2))),this._startDist=i.distanceTo(a),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),We(document,"touchmove",this._onTouchMove,this),We(document,"touchend touchcancel",this._onTouchEnd,this),Ue(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),a=e.mouseEventToContainerPoint(t.touches[1]),n=i.distanceTo(a)/this._startDist;if(this._zoom=e.getScaleZoom(n,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&n<1||this._zoom>e.getMaxZoom()&&n>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===n)return}else{var o=i._add(a)._divideBy(2)._subtract(this._centerPoint);if(1===n&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var r=s(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=T(r,this,!0),Ue(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,P(this._animRequest),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});ii.addInitHook("addHandler","touchZoom",ns),ii.BoxZoom=Qa,ii.DoubleClickZoom=$a,ii.Drag=ts,ii.Keyboard=es,ii.ScrollWheelZoom=is,ii.TapHold=ss,ii.TouchZoom=ns,t.Bounds=D,t.Browser=Dt,t.CRS=R,t.Canvas=Na,t.Circle=na,t.CircleMarker=aa,t.Class=S,t.Control=si,t.DivIcon=za,t.DivOverlay=Aa,t.DomEvent=ti,t.DomUtil=De,t.Draggable=yi,t.Evented=F,t.FeatureGroup=qi,t.GeoJSON=ca,t.GridLayer=Da,t.Handler=mi,t.Icon=Ki,t.ImageOverlay=Ma,t.LatLng=O,t.LatLngBounds=E,t.Layer=Zi,t.LayerGroup=ji,t.LineUtil=Ei,t.Map=ii,t.Marker=ta,t.Mixin=gi,t.Path=ia,t.Point=I,t.PolyUtil=Mi,t.Polygon=la,t.Polyline=ra,t.Popup=La,t.PosAnimation=ei,t.Projection=Yi,t.Rectangle=Ka,t.Renderer=Ra,t.SVG=qa,t.SVGOverlay=Ca,t.TileLayer=Ea,t.Tooltip=Fa,t.Transformation=j,t.Util=C,t.VideoOverlay=Ta,t.bind=s,t.bounds=W,t.canvas=Ha,t.circle=oa,t.circleMarker=sa,t.control=ni,t.divIcon=Va,t.extend=i,t.featureGroup=Gi,t.geoJSON=_a,t.geoJson=ka,t.gridLayer=Wa,t.icon=Ji,t.imageOverlay=wa,t.latLng=Y,t.latLngBounds=X,t.layerGroup=Ui,t.map=ai,t.marker=ea,t.point=V,t.polygon=da,t.polyline=ha,t.popup=Ba,t.rectangle=Ja,t.setOptions=u,t.stamp=o,t.svg=Ga,t.svgOverlay=Sa,t.tileLayer=Xa,t.tooltip=Ia,t.transformation=U,t.version=e,t.videoOverlay=Pa;var os=window.L;t.noConflict=function(){return window.L=os,this},window.L=t}(e)},3666:()=>{}}]);
//# sourceMappingURL=76.a35c9957.chunk.js.map